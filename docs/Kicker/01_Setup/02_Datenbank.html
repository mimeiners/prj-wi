
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Pi-Einrichtung von InfluxDB und Grafana &#8212; PRJ2/PRJ3 Wohninvest 4.0</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=f78ba3b0" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link media="all" rel="stylesheet" type="text/css" href="https://dokie.li/media/css/dokieli.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/clipboard.min.js?v=e637711f"></script>
    <script src="../../../_static/copybutton.js?v=56c01ce6"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script async="async" kind="dokieli" src="https://dokie.li/scripts/dokieli.js"></script>
    <script kind="utterances">

    var commentsRunWhenDOMLoaded = cb => {
    if (document.readyState != 'loading') {
        cb()
    } else if (document.addEventListener) {
        document.addEventListener('DOMContentLoaded', cb)
    } else {
        document.attachEvent('onreadystatechange', function() {
        if (document.readyState == 'complete') cb()
        })
    }
}

var addUtterances = () => {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src = "https://utteranc.es/client.js";
    script.async = "async";

    script.setAttribute("repo", "mimeiners/prj-wi");
    script.setAttribute("issue-term", "pathname");
    script.setAttribute("theme", "github-light");
    script.setAttribute("label", "💬 comment");
    script.setAttribute("crossorigin", "anonymous");

    sections = document.querySelectorAll("div.section");
    if (sections !== null) {
        section = sections[sections.length-1];
        section.appendChild(script);
    }
}
commentsRunWhenDOMLoaded(addUtterances);
</script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/design-tabs.js?v=36754332"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../../_static/sphinx-thebe.js?v=afe5de03"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'docs/Kicker/01_Setup/02_Datenbank';</script>
    <link rel="canonical" href="https://mimeiners.github.io/prj-wi/docs/Kicker/01_Setup/02_Datenbank.html" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Einrichtung der Softwareumgebung für Nutzerkontoverwaltung" href="03_Nutzerkontoverwaltung.html" />
    <link rel="prev" title="Einrichtung des Raspberry PI als Webserver" href="01_Webserver.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../../about/unsyllabus.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../_static/hsb-logo.png" class="logo__image only-light" alt="PRJ2/PRJ3 Wohninvest 4.0 - Home"/>
    <script>document.write(`<img src="../../../_static/hsb-logo.png" class="logo__image only-dark" alt="PRJ2/PRJ3 Wohninvest 4.0 - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../about/unsyllabus.html">
                    <no title>
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">HowTo</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../HowTo/HowTo_JB.html">How-To Jupyter-Book</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Gesamtsystem</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../Gesamtsystem/Projektbeschreibung.html">Projektbeschreibung</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../temp_prj_wohlinvest_requierements.html">Wohlinvestment Anforderungen</a></li>

<li class="toctree-l2"><a class="reference internal" href="../../AuVAReS/01_Requirements.html">Anforderungen AuVAReS</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../Gesamtsystem/interface_management.html">Schnittstelle Kicker - AuVAReS</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Gesamtsystem/network-communication-keywords.html">Schlüsselwörter bei Kommunikation im Netzwerk von Kicker-AuVAReS</a></li>


</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Hardware-Setup</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../AuVAReS/Anleitungen/setup.html">AuVAReS Nvidia Jetson Setup</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Kicker</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="00_Setup_index.html">Tischkicker Setup</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="01_Webserver.html">Einrichtung von Webserver und Hotspot</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Pi-Einrichtung von InfluxDB und Grafana</a></li>

<li class="toctree-l2"><a class="reference internal" href="03_Nutzerkontoverwaltung.html">Einrichtung der Nutzerkontoverwaltung</a></li>
<li class="toctree-l2"><a class="reference internal" href="04_Material.html">Listung der Materialien</a></li>
<li class="toctree-l2"><a class="reference internal" href="05_Verdrahtung.html">Übersicht der Verdrahtung des Subsystems</a></li>
<li class="toctree-l2"><a class="reference internal" href="06_Kurbelerkennung.html">Dokumentation zur Kurbelerkennung</a></li>


</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../02_Webseite/00_Webseite_Struktur.html">Funktionen der Webseite</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../02_Webseite/01_Webseite_pregame.html">Anmelde- und Registrierungsvorgänge der Webseite</a></li>

<li class="toctree-l2"><a class="reference internal" href="../02_Webseite/02_Webseite_ingame.html">Spielsteuerung und Übersicht</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02_Webseite/03_Webseite_json_abfrage.html">Spieldatenabfrage mit JSON-Datei</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02_Webseite/04_Webseite_json_beschreiben.html">Spieldatenverwaltung mit JSON-Datei</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02_Webseite/05_Webseite_Datenbankabfrage.html">Voraussetzungen und Installation der InfluxDB PHP Library</a></li>

<li class="toctree-l2"><a class="reference internal" href="../02_Webseite/06_Webseite_Anzeigetafel.html">Spielstandsanzeige auf Anzeigetafel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02_Webseite/07_Webseite_endgame.html">Spielabwicklung und Ergebnisbestimmung</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../03_Spielsteuerung.html">Programmablauf zur Spielsteuerung</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04_Appendix/01_Kicker.html">Dokumentation des Vorgängerprojekts</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">AuVAReS</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../AuVAReS/Anleitungen/Programm-AuVAReS.html">Programmablauf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../AuVAReS/Anleitungen/Objekterkennung.html">Objekterkennung</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../AuVAReS/Anleitungen/Known_Issues.html">Bekannte Probleme</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Meetings</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../Meetings/04-11_Protokoll.html">Kick-Off</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Meetings/04-17_Protokoll.html">Meeting am 2024-04-17</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Meetings/05-03_Protokoll.html">Meeting am 2024-05-03</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/mimeiners/prj-wi" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/mimeiners/prj-wi/edit/master/docs/Kicker/01_Setup/02_Datenbank.md" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/mimeiners/prj-wi/issues/new?title=Issue%20on%20page%20%2Fdocs/Kicker/01_Setup/02_Datenbank.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../_sources/docs/Kicker/01_Setup/02_Datenbank.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Pi-Einrichtung von InfluxDB und Grafana</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Pi-Einrichtung von InfluxDB und Grafana</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#einrichtung-von-influxdb">Einrichtung von InfluxDB</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#installation-von-influxdb">Installation von InfluxDB</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#struktur-der-datenbank-und-daten-in-influxdb">Struktur der Datenbank und Daten in InfluxDB</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#beispielhafter-datenaufbau">Beispielhafter Datenaufbau</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#measurement-game-123">Measurement: <code class="docutils literal notranslate"><span class="pre">game_123</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#abfrage">Abfrage</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#code-beispiel-zur-abfrage">Code-Beispiel zur Abfrage</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#zusammenfassung">Zusammenfassung</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#einrichtung-von-grafana-auf-dem-raspberry-pi">Einrichtung von Grafana auf dem Raspberry Pi</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#fusznoten">Fußnoten</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="pi-einrichtung-von-influxdb-und-grafana">
<h1>Pi-Einrichtung von InfluxDB und Grafana<a class="headerlink" href="#pi-einrichtung-von-influxdb-und-grafana" title="Link to this heading">#</a></h1>
<section id="einrichtung-von-influxdb">
<h2>Einrichtung von InfluxDB<a class="headerlink" href="#einrichtung-von-influxdb" title="Link to this heading">#</a></h2>
<p>Wir haben uns bei diesen Projekt für InfluxDB entschieden, da dies als Empfehlung vorgegeben wurde und InfluxDB einige Vorteile bietet was das zeitliche Erfassen von Ereignissen betrifft.</p>
<section id="installation-von-influxdb">
<h3>Installation von InfluxDB<a class="headerlink" href="#installation-von-influxdb" title="Link to this heading">#</a></h3>
<p><strong>Installation von InfluxDB auf Linux</strong></p>
<p>Um InfluxDB auf Linux zu installieren, befolgen Sie diese Schritte:</p>
<ol class="arabic">
<li><p><strong>Paketverzeichnis aktualisieren:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt<span class="w"> </span>update
</pre></div>
</div>
</li>
<li><p><strong>InfluxDB installieren:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>influxdb
</pre></div>
</div>
</li>
<li><p><strong>InfluxDB-Dienst starten:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>service<span class="w"> </span>influxdb<span class="w"> </span>start
</pre></div>
</div>
</li>
<li><p><strong>Status überprüfen:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>service<span class="w"> </span>influxdb<span class="w"> </span>status
</pre></div>
</div>
</li>
<li><p><strong>Webanwendung öffnen:</strong>
Besuchen Sie <a class="reference external" href="http://localhost:8086">http://localhost:8086</a> in Ihrem Browser.</p></li>
<li><p><strong>Weitere Konfiguration:</strong>
Erstellen Sie eine Datenbank und beginnen Sie mit der Nutzung von InfluxDB für Ihre Projekte.</p></li>
</ol>
<p>Das sind die Schritte für die Installation und Konfiguration von InfluxDB auf Linux.</p>
</section>
<section id="struktur-der-datenbank-und-daten-in-influxdb">
<h3>Struktur der Datenbank und Daten in InfluxDB<a class="headerlink" href="#struktur-der-datenbank-und-daten-in-influxdb" title="Link to this heading">#</a></h3>
<p>Um die Datenstruktur in der InfluxDB für das Kickerspiel zu verstehen, betrachten wir zunächst, wie die Daten bei jedem neuen Spiel organisiert werden. Hier sind die Hauptpunkte zur Struktur und den relevanten Details:</p>
<ol class="arabic simple">
<li><p><strong>Measurement pro Spiel:</strong></p>
<ul class="simple">
<li><p>Für jedes neue Spiel wird ein neues Measurement in der InfluxDB angelegt. Der Name dieses Measurements entspricht der Spiel-ID. Dies ermöglicht eine klare Trennung der Daten für jedes Spiel und erleichtert das Abrufen und Verarbeiten der Daten für ein bestimmtes Spiel.</p></li>
</ul>
</li>
<li><p><strong>Datenpunkte (Points):</strong></p>
<ul class="simple">
<li><p>Jeder Datenpunkt (Point) in einem Measurement repräsentiert ein Tor, das ein Spieler zu einem bestimmten Zeitpunkt erzielt hat.</p></li>
</ul>
</li>
<li><p><strong>Tags und Felder:</strong></p>
<ul class="simple">
<li><p><strong>Tags:</strong></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Spieler</span></code>: Der Name des Spielers, der das Tor erzielt hat.</p></li>
</ul>
</li>
<li><p><strong>Felder:</strong></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Tore</span></code>: Die Anzahl der Tore, die der Spieler erzielt hat (in diesem Fall immer 1, da jeder Punkt ein einzelnes Tor darstellt).</p></li>
</ul>
</li>
<li><p><strong>Timestamp:</strong> Der Zeitstempel, wann das Tor erzielt wurde.</p></li>
</ul>
</li>
</ol>
<section id="beispielhafter-datenaufbau">
<h4>Beispielhafter Datenaufbau<a class="headerlink" href="#beispielhafter-datenaufbau" title="Link to this heading">#</a></h4>
<p>Angenommen, wir haben ein Spiel mit der Spiel-ID <code class="docutils literal notranslate"><span class="pre">game_123</span></code>. Während des Spiels erzielen die Spieler <code class="docutils literal notranslate"><span class="pre">PlayerA</span></code> und <code class="docutils literal notranslate"><span class="pre">PlayerB</span></code> mehrere Tore. Die Daten könnten dann wie folgt in InfluxDB gespeichert sein:</p>
</section>
<section id="measurement-game-123">
<h4>Measurement: <code class="docutils literal notranslate"><span class="pre">game_123</span></code><a class="headerlink" href="#measurement-game-123" title="Link to this heading">#</a></h4>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>_time</p></th>
<th class="head"><p>Spieler</p></th>
<th class="head"><p>Tore</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>2024-06-25T10:00:00Z</p></td>
<td><p>PlayerA</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>2024-06-25T10:02:00Z</p></td>
<td><p>PlayerB</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p>2024-06-25T10:05:00Z</p></td>
<td><p>PlayerA</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-odd"><td><p>2024-06-25T10:07:00Z</p></td>
<td><p>PlayerB</p></td>
<td><p>3</p></td>
</tr>
</tbody>
</table>
</div>
<ul class="simple">
<li><p><strong>_time</strong>: Zeitstempel des Events</p></li>
<li><p><strong>Spieler</strong>: Name des Spielers</p></li>
<li><p><strong>Tore</strong>: Anzahl der Tore (immer 1 in diesem Fall)</p></li>
</ul>
</section>
<section id="abfrage">
<h4>Abfrage<a class="headerlink" href="#abfrage" title="Link to this heading">#</a></h4>
<p>Die PHP-Abfrage im Code nutzt Flux, die Abfragesprache von InfluxDB, um die Daten zu verarbeiten. Die Query filtert die Daten nach Measurement (Spiel-ID), Spielername und Feld (<code class="docutils literal notranslate"><span class="pre">Tore</span></code>), und gibt den letzten Eintrag innerhalb der letzten Stunde zurück. Die <code class="docutils literal notranslate"><span class="pre">last()</span></code> Funktion sorgt dafür, dass nur der letzte Wert (das zuletzt erzielte Tor) zurückgegeben wird.</p>
</section>
<section id="code-beispiel-zur-abfrage">
<h4>Code-Beispiel zur Abfrage<a class="headerlink" href="#code-beispiel-zur-abfrage" title="Link to this heading">#</a></h4>
<p>Hier ist der relevante Teil der PHP-Abfrage aus deinem Code:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">$query = &#39;from(bucket:&quot;kicker&quot;)</span>
<span class="x">  |&gt; range(start: -1h)</span>
<span class="x">  |&gt; filter(fn: (r) =&gt; r._measurement == &quot;&#39; . $gameID . &#39;&quot; and r._field == &quot;Tore&quot; and r.Spieler == &quot;&#39; . $playerName . &#39;&quot;)</span>
<span class="x">  |&gt; last()&#39;;</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>from(bucket:”kicker”)</strong>: Wählt den Bucket <code class="docutils literal notranslate"><span class="pre">kicker</span></code>.</p></li>
<li><p><strong>range(start: -1h)</strong>: Betrachtet die Daten der letzten Stunde.</p></li>
<li><p><strong>filter(fn: ® =&gt; r._measurement == “’ . <span class="math notranslate nohighlight">\(gameID . '&quot; and r._field == &quot;Tore&quot; and r.Spieler == &quot;' . \)</span>playerName . ‘”)</strong>: Filtert nach dem Measurement (Spiel-ID), dem Feld (<code class="docutils literal notranslate"><span class="pre">Tore</span></code>) und dem Spielername.</p></li>
<li><p><strong>last()</strong>: Gibt den letzten Eintrag zurück.</p></li>
</ul>
</section>
</section>
<section id="zusammenfassung">
<h3>Zusammenfassung<a class="headerlink" href="#zusammenfassung" title="Link to this heading">#</a></h3>
<p>Die Daten in InfluxDB sind so organisiert, dass jedes Spiel ein eigenes Measurement hat. Innerhalb jedes Measurements werden die Tore mit einem Zeitstempel und dem Namen des Spielers gespeichert. Dieser Aufbau erleichtert die Abfrage spezifischer Informationen für jedes Spiel und jeden Spieler, wie in deinem PHP-Code dargestellt.</p>
</section>
</section>
<section id="einrichtung-von-grafana-auf-dem-raspberry-pi">
<h2>Einrichtung von Grafana auf dem Raspberry Pi<a class="headerlink" href="#einrichtung-von-grafana-auf-dem-raspberry-pi" title="Link to this heading">#</a></h2>
<p>Im Folgenden installieren wir <code class="docutils literal notranslate"><span class="pre">grafana</span></code>. Nach der Installation erreichen wir die Oberfläche von <code class="docutils literal notranslate"><span class="pre">grafana</span></code> über <code class="docutils literal notranslate"><span class="pre">http://localhost:3000</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>wget<span class="w"> </span>-q<span class="w"> </span>-O<span class="w"> </span>-<span class="w"> </span>https://packages.grafana.com/gpg.key<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>apt-key<span class="w"> </span>add<span class="w"> </span>-
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;deb https://packages.grafana.com/oss/deb stable main&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/etc/apt/sources.list.d/grafana.list
sudo<span class="w"> </span>apt<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>grafana
sudo<span class="w"> </span>systemctl<span class="w"> </span>unmask<span class="w"> </span>grafana-server.service
sudo<span class="w"> </span>systemctl<span class="w"> </span>start<span class="w"> </span>grafana-server
sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>grafana-server.service
</pre></div>
</div>
<p>Um in grafana auf influxDB und zugreifen zu können legen wir in influxDB entsprechende Nutzer an.
Wir können influxDB mit dem Befehl <code class="docutils literal notranslate"><span class="pre">influx</span></code> aufrufen und die Datenbanken und Messungen im Terminal ausgeben.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>influx

Connected<span class="w"> </span>to<span class="w"> </span>http://localhost:8086<span class="w"> </span>version<span class="w"> </span><span class="m">1</span>.6.7~rc0
InfluxDB<span class="w"> </span>shell<span class="w"> </span>version:<span class="w"> </span><span class="m">1</span>.6.7~rc0
&gt;<span class="w"> </span>create<span class="w"> </span>database<span class="w"> </span>db01
&gt;<span class="w"> </span>use<span class="w"> </span>db01
Using<span class="w"> </span>database<span class="w"> </span>db01
&gt;<span class="w"> </span>create<span class="w"> </span>user<span class="w"> </span>grafana<span class="w"> </span>with<span class="w"> </span>password<span class="w"> </span><span class="s1">&#39;&lt;password&gt;&#39;</span><span class="w"> </span>with<span class="w"> </span>all<span class="w"> </span>privileges
&gt;<span class="w"> </span>grant<span class="w"> </span>all<span class="w"> </span>privileges<span class="w"> </span>on<span class="w"> </span>db01<span class="w"> </span>to<span class="w"> </span>grafana
&gt;<span class="w"> </span><span class="nb">exit</span><span class="w"> </span>
</pre></div>
</div>
<p>Wir können so beispielsweise auch über <code class="docutils literal notranslate"><span class="pre">HTTP</span></code> Werte in die Datenbank schreiben (siehe docs für Syntax <a class="footnote-reference brackets" href="#id3" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a>)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-i<span class="w"> </span>-XPOST<span class="w"> </span><span class="s1">&#39;http://localhost:8086/write?db=db01&#39;</span><span class="w"> </span>--data-binary<span class="w"> </span><span class="s1">&#39;&lt;measurement&gt;[,&lt;tag-key&gt;=&lt;tag-value&gt;...] &lt;field-key&gt;=&lt;field-value&gt;[,&lt;field2-key&gt;=&lt;field2-value&gt;...] [unix-nano-timestamp]&#39;</span>
</pre></div>
</div>
<p>Wir können die Services mit dem <code class="docutils literal notranslate"><span class="pre">systemctl</span> <span class="pre">stop</span> <span class="pre">&lt;grafana,</span> <span class="pre">influxdb&gt;</span></code> beenden oder mit <code class="docutils literal notranslate"><span class="pre">systemctl</span> <span class="pre">restart</span> <span class="pre">&lt;grafana,</span> <span class="pre">influxdb&gt;</span></code> neu starten.
In der grafana Oberfläche können wir influxDB als Datenquelle hinzufügen indem wir unter Menüpunkt “Data sources” unsere Datenbank eintragen.</p>
<ul class="simple">
<li><p>Database name: <code class="docutils literal notranslate"><span class="pre">influxdb-db01</span></code></p></li>
<li><p>HTTP</p>
<ul>
<li><p>URL: <code class="docutils literal notranslate"><span class="pre">http://localhost:8086</span></code></p></li>
</ul>
</li>
<li><p>InfluxDB Details</p>
<ul>
<li><p>Database: <code class="docutils literal notranslate"><span class="pre">db01</span></code></p></li>
<li><p>User: <code class="docutils literal notranslate"><span class="pre">grafana</span></code></p></li>
<li><p>Password: <code class="docutils literal notranslate"><span class="pre">&lt;password&gt;</span></code></p></li>
</ul>
</li>
</ul>
<p>Den Fußnoten ist der Link zu einem Video mit anschaulichen Erklärungen beigefügt <a class="footnote-reference brackets" href="#id4" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>.</p>
<p>Mit grafana können wir ein Dashboard erstellen, über welches das Gesamtsystem überwacht werden kann.</p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="fusznoten">
<h1>Fußnoten<a class="headerlink" href="#fusznoten" title="Link to this heading">#</a></h1>
<hr class="footnotes docutils" />
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id3" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">3</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://docs.influxdata.com/influxdb/v1/write_protocols/line_protocol_tutorial/">https://docs.influxdata.com/influxdb/v1/write_protocols/line_protocol_tutorial/</a></p>
</aside>
<aside class="footnote brackets" id="id4" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://www.youtube.com/watch?v=Jszd7zrl-_U&amp;amp;t=104s">https://www.youtube.com/watch?v=Jszd7zrl-_U&amp;t=104s</a></p>
</aside>
</aside>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "mimeiners/prj-wi",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./docs/Kicker/01_Setup"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="01_Webserver.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Einrichtung des Raspberry PI als Webserver</p>
      </div>
    </a>
    <a class="right-next"
       href="03_Nutzerkontoverwaltung.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Einrichtung der Softwareumgebung für Nutzerkontoverwaltung</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Pi-Einrichtung von InfluxDB und Grafana</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#einrichtung-von-influxdb">Einrichtung von InfluxDB</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#installation-von-influxdb">Installation von InfluxDB</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#struktur-der-datenbank-und-daten-in-influxdb">Struktur der Datenbank und Daten in InfluxDB</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#beispielhafter-datenaufbau">Beispielhafter Datenaufbau</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#measurement-game-123">Measurement: <code class="docutils literal notranslate"><span class="pre">game_123</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#abfrage">Abfrage</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#code-beispiel-zur-abfrage">Code-Beispiel zur Abfrage</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#zusammenfassung">Zusammenfassung</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#einrichtung-von-grafana-auf-dem-raspberry-pi">Einrichtung von Grafana auf dem Raspberry Pi</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#fusznoten">Fußnoten</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By M. Meiners / B. Lehmann
</p>

  </div>
  
  <div class="footer-item">
    

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  <div>
<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><img src="https://licensebuttons.net/l/by-nc-sa/3.0/88x31.png"></a>
    All content on this site (unless otherwise specified) is licensed under the <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0 license</a>
</div>

</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>