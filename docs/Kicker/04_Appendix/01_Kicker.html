
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Willkommen zur ewigen Liste! &#8212; PRJ2/PRJ3 Wohninvest 4.0</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=f78ba3b0" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link media="all" rel="stylesheet" type="text/css" href="https://dokie.li/media/css/dokieli.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/clipboard.min.js?v=e637711f"></script>
    <script src="../../../_static/copybutton.js?v=56c01ce6"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script async="async" kind="dokieli" src="https://dokie.li/scripts/dokieli.js"></script>
    <script kind="utterances">

    var commentsRunWhenDOMLoaded = cb => {
    if (document.readyState != 'loading') {
        cb()
    } else if (document.addEventListener) {
        document.addEventListener('DOMContentLoaded', cb)
    } else {
        document.attachEvent('onreadystatechange', function() {
        if (document.readyState == 'complete') cb()
        })
    }
}

var addUtterances = () => {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src = "https://utteranc.es/client.js";
    script.async = "async";

    script.setAttribute("repo", "mimeiners/prj-wi");
    script.setAttribute("issue-term", "pathname");
    script.setAttribute("theme", "github-light");
    script.setAttribute("label", "💬 comment");
    script.setAttribute("crossorigin", "anonymous");

    sections = document.querySelectorAll("div.section");
    if (sections !== null) {
        section = sections[sections.length-1];
        section.appendChild(script);
    }
}
commentsRunWhenDOMLoaded(addUtterances);
</script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/design-tabs.js?v=36754332"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../../_static/sphinx-thebe.js?v=afe5de03"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'docs/Kicker/04_Appendix/01_Kicker';</script>
    <link rel="canonical" href="https://mimeiners.github.io/prj-wi/docs/Kicker/04_Appendix/01_Kicker.html" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Programmablauf AuVAReS" href="../../AuVAReS/Anleitungen/Programm-AuVAReS.html" />
    <link rel="prev" title="Die Spielsteuerung des Kickers" href="../03_Spielsteuerung.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../../about/unsyllabus.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../_static/hsb-logo.png" class="logo__image only-light" alt="PRJ2/PRJ3 Wohninvest 4.0 - Home"/>
    <script>document.write(`<img src="../../../_static/hsb-logo.png" class="logo__image only-dark" alt="PRJ2/PRJ3 Wohninvest 4.0 - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../about/unsyllabus.html">
                    <no title>
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">HowTo</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../HowTo/HowTo_JB.html">How-To Jupyter-Book</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Gesamtsystem</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../Gesamtsystem/Projektbeschreibung.html">Projektbeschreibung</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../temp_prj_wohlinvest_requierements.html">Wohlinvestment Anforderungen</a></li>

<li class="toctree-l2"><a class="reference internal" href="../../AuVAReS/01_Requirements.html">Anforderungen AuVAReS</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../Gesamtsystem/interface_management.html">Schnittstelle Kicker - AuVAReS</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Gesamtsystem/network-communication-keywords.html">Schlüsselwörter bei Kommunikation im Netzwerk von Kicker-AuVAReS</a></li>


</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Hardware-Setup</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../AuVAReS/Anleitungen/setup.html">AuVAReS Nvidia Jetson Setup</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Kicker</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../01_Setup/00_Setup_index.html">Tischkicker Setup</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../01_Setup/01_Webserver.html">Einrichtung von Webserver und Hotspot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../01_Setup/02_Datenbank.html">Pi-Einrichtung von InfluxDB und Grafana</a></li>

<li class="toctree-l2"><a class="reference internal" href="../01_Setup/03_Nutzerkontoverwaltung.html">Einrichtung der Nutzerkontoverwaltung</a></li>
<li class="toctree-l2"><a class="reference internal" href="../01_Setup/04_Material.html">Listung der Materialien</a></li>
<li class="toctree-l2"><a class="reference internal" href="../01_Setup/05_Verdrahtung.html">Übersicht der Verdrahtung des Subsystems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../01_Setup/06_Kurbelerkennung.html">Dokumentation zur Kurbelerkennung</a></li>


</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../02_Webseite/00_Webseite_Struktur.html">Funktionen der Webseite</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../02_Webseite/01_Webseite_pregame.html">Anmelde- und Registrierungsvorgänge der Webseite</a></li>

<li class="toctree-l2"><a class="reference internal" href="../02_Webseite/02_Webseite_ingame.html">Spielsteuerung und Übersicht</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02_Webseite/03_Webseite_json_abfrage.html">Spieldatenabfrage mit JSON-Datei</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02_Webseite/04_Webseite_json_beschreiben.html">Spieldatenverwaltung mit JSON-Datei</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02_Webseite/05_Webseite_Datenbankabfrage.html">Voraussetzungen und Installation der InfluxDB PHP Library</a></li>

<li class="toctree-l2"><a class="reference internal" href="../02_Webseite/06_Webseite_Anzeigetafel.html">Spielstandsanzeige auf Anzeigetafel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02_Webseite/07_Webseite_endgame.html">Spielabwicklung und Ergebnisbestimmung</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../03_Spielsteuerung.html">Programmablauf zur Spielsteuerung</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Dokumentation des Vorgängerprojekts</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">AuVAReS</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../AuVAReS/Anleitungen/Programm-AuVAReS.html">Programmablauf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../AuVAReS/Anleitungen/Objekterkennung.html">Objekterkennung</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../AuVAReS/Anleitungen/Known_Issues.html">Bekannte Probleme</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Meetings</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../Meetings/04-11_Protokoll.html">Kick-Off</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Meetings/04-17_Protokoll.html">Meeting am 2024-04-17</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Meetings/05-03_Protokoll.html">Meeting am 2024-05-03</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/mimeiners/prj-wi" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/mimeiners/prj-wi/edit/master/docs/Kicker/04_Appendix/01_Kicker.md" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/mimeiners/prj-wi/issues/new?title=Issue%20on%20page%20%2Fdocs/Kicker/04_Appendix/01_Kicker.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../_sources/docs/Kicker/04_Appendix/01_Kicker.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Willkommen zur ewigen Liste!</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#softwareseite">Softwareseite</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#programmablauf">Programmablauf</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#vorgehen">Vorgehen</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#quellcode">Quellcode</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="willkommen-zur-ewigen-liste">
<h1>Willkommen zur ewigen Liste!<a class="headerlink" href="#willkommen-zur-ewigen-liste" title="Link to this heading">#</a></h1>
<p>Diese Schrift dokumentiert die softwareseitige Ausführung einer Erweiterung eines Tischkickers.</p>
<p>Das Ziel ist es, den Spielstand eines Spiels anzuzeigen und die Daten in einer Datenbank zu erfassen und
auszuwerten. Die Visualisierung des aktuellen Punktestandes erfolgt auf zwei Displays, welche auf dem
Tischkicker angebracht sind.</p>
<section id="softwareseite">
<h2>Softwareseite<a class="headerlink" href="#softwareseite" title="Link to this heading">#</a></h2>
<p>Im Folgenden wird die softwareseitige Erstellung aufgezeigt.</p>
<section id="programmablauf">
<h3>Programmablauf<a class="headerlink" href="#programmablauf" title="Link to this heading">#</a></h3>
<p>Das Programm auf dem Rasperry Pi startet, sobald dieser mit Netzspannung verbunden ist. Auf den beiden Displays steht zu
Beginn das HSB-Logo. Für ein schnelles Spiel, ohne die Ergebnisse in die Datenbank eintargen zu lassen, brauchen keine
weiteren Eingaben vorgenommen zu werden. Sobald eine Lichtschranke ein erstes Tor registriert, schaltet die Anzeige auf
den Displays um und zeigt nun den Spielstand an. Dabei stehen anonym Spieler eins und Spieler zwei als Spielernamen. Um
die Spielernamen einzugeben und auf den Displays auszugeben, kann über ein im Hochschulnetzwerk befindliches Gerät
verwendet werden. Zu diesem Zweck wird ein Tablett bereitgestellt. Von diesem aus kann auch die Einsicht in die
Spieltabellen geschehen. Der schematische Programmaufbau ist in der Abbildung 1 dargestellt.</p>
<figure class="align-center" id="abb-1">
<img alt="docs/images/Kicker/Ablauf.png" src="docs/images/Kicker/Ablauf.png" />
<figcaption>
<p><span class="caption-number">Fig. 1 </span><span class="caption-text">Ablaufplan des Programms</span><a class="headerlink" href="#abb-1" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Die Lichtschranken sind an den Eingängen des Rasperry Pi angeschlossen. Erfolgt ein Tor, so wird das Signal, welches
durch die Lichtschranken ausgegeben wird, durch das Torerfassungsprogramm auf dem Pi ausgewertet. Die HTML Eingabe kann
mittels des dazugehörigen Tabletts erfolgen. Dabei können die Spielernamen und der Spieltag eingegeben werden. Dabei
erfolgt der Zugriff auf die Datenbank. Das Auswertungsprogramm wertet die Daten aus der Datenbank aus. Die Auswertung
kann über das Tablett abgerufen werden. In dem Auswertungsprogramm erfolgt die Berechnung der
Gewinnwahrscheinlichkeit. In einer Tabelle werden alle Spieler aufgelistet, die bisher mit dem Tischkicker gespielt
haben. In dem Displayausgabeprogramm wird die Ausgabe an die Displays vorbereitet. Über einen HDMI Splitter erfolgt die
Ausgabe an die Displays.</p>
</section>
<section id="vorgehen">
<h3>Vorgehen<a class="headerlink" href="#vorgehen" title="Link to this heading">#</a></h3>
<p>Als erstet wurde untersucht, welche Komponenten für das Projekt benötigt werden. Bei der Recherche wurden die
Datenblätter und Produktbeschreibungen der Bauteile studiert, um den Anforderungen an das Projekt gerecht zu
werden. Nachdem die genauen Bauteile festgestanden haben, wurden diese bestellt.</p>
<p>o Display</p>
<p>Für die beiden Displays wurden anhand der Abmessungen dieser ein Gehäuse
und ein Stützmuster mit dem Programm Solid Edge von Siemens gezeichnet.
Nach der Fertigstellung der Zeichnung wurde diese genutzt, um die
Bauteile mit einem 3D-Drucker zu erstellen. Nach dem Druck mussten die
Gehäuse nachbearbeitet werden, da die Gehäuse nicht exakt nach den
vorgegebenen Maßen gedruckt wurde. Nach der Anpassung wurden die Stützen
auf dem Tischkicker mit sechs Schrauben befestigt. Im Vorfeld wurde
unter jeder Stütze jeweils eine 20er Bohrung vorgenommen, um die
benötigten Anschlüsse zwischen Display und Rasperry Pi zu gewährleisten.</p>
<p>o Lichtschranke</p>
<p>Die Lichtschranken wurden im Inneren der Tore platziert. Von außen sind
diese nicht sichtbar. Bei einem ersten Test stellte sich heraus , dass
wenn der Ball unter einem bestimmten Winkel in das Tor eintrifft, die
Lichtschranke den Ball nicht erkennt. Daraufhin wurde eine zweite
Lichtschranke parallel geschaltet, um das komplette Tor sicher
abzudecken, damit jedes Tor sicher gezählt wird. Als Befestigung diente
pro Lichtschranke jeweils eine Schrauben. Damit ist der Schutz durch
verdrehen infolge von Erschütterungen gewährleistet.</p>
<p>o Rasperry Pi</p>
<p>Auf dem Rasperry Pi wurde der Programmcode hinterlegt. Der Pi befindet
sich unterhalb des Tischkickers und wurde dort mit Schrauben befestigt.
Um mit dem Tablet auf das System zu zugreifen, wurde der Raspberry Pi
als Access-Point eingerichtet. Der Raspberry Pi 3 besitzt einen
integrierten WLAN-Chip, wird kein zusätzlicher Stick benötigt. Um dem PI
zum Access-Point zu konfigurieren wurden die Pakete „hostpad” und
„udhcpd” installiert und im Anschluss die zugehörigen Dateien angepasst.
Damit die installierten Dienste nach einem Neustart ausgeführt werden,
wurde die Autostartfunktion angepasst. Der W-Lan Schlüssel ist identisch
mit der SSID des Netzwerkes.</p>
<p>o Tablet</p>
<p>Um ein Direktes Zugreifen auf die HTML Seite an dem Tisch zu
gewährleisten wurde ein Tablet zur Verfügung gestellt. Dies ist an dem
Aufbau des Tisches befestigt und wird mit 5.5V Ladespannung versorg. Das
Tablet ist mit dem W-LAN Hotspot des Raspberry Pi verbunden und hat so
direkten Zugriff auf die HTML Seiten. Um die Webseite im Vollbild Modus
anzeigen lassen zu können, der „Boat Browser” auf dem Android System
installiert. Das Tablet ist mit keinem Passwort gesichert und ist nur
für die Bedienung des Datenbank Programms vorgesehen.</p>
</section>
<section id="quellcode">
<h3>Quellcode<a class="headerlink" href="#quellcode" title="Link to this heading">#</a></h3>
<p>Nachfolgend sind die für dieses Projekt verwendeten Quellcodes
aufgelistet. Diese sind Abschnittsweise im Code kommentiert.</p>
<ul class="simple">
<li><p>Abfragen der Lichtschranken</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="c1"># -*- coding: UTF-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Die Lichtschranken an den GPIO Ports werden in der Hauptschleife abgefragt. Ändert eine der beiden</span>
<span class="sd">seinen Zustand so wird je nach Seite der Lichtschranke ein Tor dem Jeweiligen Spieler</span>
<span class="sd">zugerechnet. Dies wird direkt in der Datenbank abgelegt. Anschließend wird überprüft ob der</span>
<span class="sd">Spielstand das Ende des laufenden Spiels ist. Ist dies der Fall werden die Spielernamen und</span>
<span class="sd">Tore weitergegeben um diese auszuwerten und in der Datenbank abzulegen.</span>
<span class="sd">&quot;&quot;&quot;</span>	
<span class="n">__author__</span> <span class="o">=</span> <span class="s2">&quot;Oliver Bleeker&quot;</span>
<span class="n">__credits__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Christian Hannover&quot;</span><span class="p">]</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s2">&quot;1.0.1&quot;</span>
<span class="n">__status__</span> <span class="o">=</span> <span class="s2">&quot;Ready&quot;</span>

<span class="c1"># Laden der Verwendeten Bibliotheken</span>
<span class="kn">import</span> <span class="nn">time</span> 
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">RPi.GPIO</span> <span class="k">as</span> <span class="nn">GPIO</span> 
<span class="kn">import</span> <span class="nn">sqlite3</span> <span class="k">as</span> <span class="nn">sqlite</span> 
<span class="kn">import</span> <span class="nn">function_add_game</span>

<span class="c1"># Globale Variablen Definieren</span>
<span class="n">con</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;Stats.db&quot;</span><span class="p">)</span> 
<span class="n">cur</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="n">rungame</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1"># Definieren der GPIO Ports</span>
<span class="n">GPIO</span><span class="o">.</span><span class="n">setmode</span><span class="p">(</span><span class="n">GPIO</span><span class="o">.</span><span class="n">BOARD</span><span class="p">)</span>
<span class="n">GPIO</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="n">GPIO</span><span class="o">.</span><span class="n">IN</span><span class="p">)</span>
<span class="n">GPIO</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="n">GPIO</span><span class="o">.</span><span class="n">IN</span><span class="p">)</span>

<span class="c1"># Datenbank zu beginn erstellen wenn nicht vorhanden und mit Standard Werten beschreiben.</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;create table if not exists GamePlayers (Nummer INT,Spieler TEXT,Tore INT)&quot;</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE GamePlayers Set Tore=99 WHERE Nummer=1&quot;</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE GamePlayers Set Tore=99 WHERE Nummer=2&quot;</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE GamePlayers Set Spieler=&#39;Spieler1&#39; WHERE Nummer=1&quot;</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE GamePlayers Set Spieler=&#39;Spieler2&#39; WHERE Nummer=2&quot;</span><span class="p">)</span>
<span class="n">con</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

<span class="c1"># Funktionsblock Spielertore abfragen</span>
<span class="k">def</span> <span class="nf">ask_goals</span><span class="p">(</span><span class="n">number</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Abfrage der Tore des aktuellen Spiels eines Spielers&quot;&quot;&quot;</span>	
	<span class="n">playernumber</span> <span class="o">=</span> <span class="n">number</span>
	<span class="k">if</span> <span class="n">playernumber</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT Tore FROM GamePlayers WHERE Nummer=1&quot;</span><span class="p">)</span>
		<span class="n">ToreS1</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
		<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">ToreS1</span><span class="p">:</span>
			<span class="n">goals_player</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
	<span class="k">elif</span> <span class="n">playernumber</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT Tore FROM GamePlayers WHERE Nummer=2&quot;</span><span class="p">)</span>
		<span class="n">ToreS2</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
		<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">ToreS2</span><span class="p">:</span>
			<span class="n">goals_player</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		
	<span class="nb">print</span> <span class="n">goals_player</span>
	<span class="n">rungame</span> <span class="o">=</span> <span class="mi">1</span>
	<span class="k">return</span> <span class="n">goals_player</span>

<span class="c1"># Funktionsblock Spielernamen abfragen</span>
<span class="k">def</span> <span class="nf">ask_player</span><span class="p">(</span><span class="n">number</span><span class="p">):</span>
<span class="w">  </span><span class="sd">&quot;&quot;&quot;Abfrage der Spielernamen des aktuellen Spiels&quot;&quot;&quot;</span>	
  <span class="n">playernumber</span> <span class="o">=</span> <span class="n">number</span>
  <span class="k">if</span> <span class="n">playernumber</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Spieler FROM &#39;GamePlayers&#39; WHERE Nummer = 1&quot;</span> <span class="p">)</span>
    <span class="k">for</span> <span class="n">playerdb</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">:</span>
        <span class="n">name_player</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">%</span> <span class="n">playerdb</span>
  <span class="k">elif</span> <span class="n">playernumber</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Spieler FROM &#39;GamePlayers&#39; WHERE Nummer = 2&quot;</span> <span class="p">)</span>
    <span class="k">for</span> <span class="n">playerdb</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">:</span>
        <span class="n">name_player</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">%</span> <span class="n">playerdb</span>
  <span class="k">return</span> <span class="n">name_player</span>

<span class="c1"># Funktionsblock abfragen und prüfen ob das Spiel zu Ende ist</span>
<span class="k">def</span> <span class="nf">checkend</span><span class="p">():</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Überprüfen ob das aktuelle Spiel zu Ende ist. Dies ist der Fall wenn ein Spieler 6 Tore oder beide Spieler 5 Tore geschossen haben&quot;&quot;&quot;</span>
	<span class="n">check</span> <span class="o">=</span> <span class="s2">&quot;Noend&quot;</span>
	<span class="n">ToreS1</span><span class="o">=</span><span class="n">ask_goals</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
	<span class="n">ToreS2</span><span class="o">=</span><span class="n">ask_goals</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
	<span class="n">NameS1</span><span class="o">=</span><span class="n">ask_player</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
	<span class="n">NameS2</span><span class="o">=</span><span class="n">ask_player</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
	<span class="k">if</span> <span class="n">ToreS1</span> <span class="o">==</span> <span class="mi">6</span> <span class="ow">or</span> <span class="n">ToreS2</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
		<span class="k">if</span> <span class="n">NameS1</span> <span class="o">!=</span> <span class="s2">&quot;Spieler1&quot;</span> <span class="ow">and</span> <span class="n">ToreS2</span> <span class="o">!=</span> <span class="s2">&quot;Spieler2&quot;</span><span class="p">:</span>
			<span class="n">messagecode</span> <span class="o">=</span> <span class="n">function_add_game</span><span class="o">.</span> <span class="n">addgame</span><span class="p">(</span><span class="n">NameS1</span><span class="p">,</span><span class="n">ToreS1</span><span class="p">,</span><span class="n">ToreS2</span><span class="p">,</span><span class="n">NameS2</span><span class="p">)</span>
		<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE GamePlayers Set Tore=99 WHERE Nummer=1&quot;</span><span class="p">)</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE GamePlayers Set Tore=99 WHERE Nummer=2&quot;</span><span class="p">)</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE GamePlayers Set Spieler=&#39;Spieler1&#39; WHERE Nummer=1&quot;</span><span class="p">)</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE GamePlayers Set Spieler=&#39;Spieler2&#39; WHERE Nummer=2&quot;</span><span class="p">)</span>
		<span class="n">con</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
		<span class="n">check</span> <span class="o">=</span> <span class="s2">&quot;End&quot;</span>
		<span class="n">rungame</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="k">if</span> <span class="n">ToreS1</span> <span class="o">==</span> <span class="mi">5</span> <span class="ow">and</span> <span class="n">ToreS2</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
		<span class="k">if</span> <span class="n">NameS1</span> <span class="o">!=</span> <span class="s2">&quot;Spieler1&quot;</span> <span class="ow">and</span> <span class="n">ToreS2</span> <span class="o">!=</span> <span class="s2">&quot;Spieler2&quot;</span><span class="p">:</span>
			<span class="n">messagecode</span> <span class="o">=</span> <span class="n">function_add_game</span><span class="o">.</span> <span class="n">addgame</span><span class="p">(</span><span class="n">NameS1</span><span class="p">,</span><span class="n">ToreS1</span><span class="p">,</span><span class="n">ToreS2</span><span class="p">,</span><span class="n">NameS2</span><span class="p">)</span>
		<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE GamePlayers Set Tore=99 WHERE Nummer=1&quot;</span><span class="p">)</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE GamePlayers Set Tore=99 WHERE Nummer=2&quot;</span><span class="p">)</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE GamePlayers Set Spieler=&#39;Spieler1&#39; WHERE Nummer=1&quot;</span><span class="p">)</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE GamePlayers Set Spieler=&#39;Spieler2&#39; WHERE Nummer=2&quot;</span><span class="p">)</span>
		<span class="n">con</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
		<span class="n">check</span> <span class="o">=</span> <span class="s2">&quot;End&quot;</span>
		<span class="n">rungame</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="k">return</span> <span class="n">check</span>
 
<span class="c1"># Hauptschleife: Abrfage der GPIO Ports. Updaten des Spielstandes bei auslösen einer Lichtschranke</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
	<span class="k">if</span> <span class="n">GPIO</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span> <span class="o">==</span> <span class="n">GPIO</span><span class="o">.</span><span class="n">LOW</span><span class="p">:</span> <span class="c1">#Tor Spieler 1</span>
		<span class="n">ToreS1</span><span class="o">=</span><span class="n">ask_goals</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># Abfragen Tore Spieler 1</span>
		<span class="n">ToreS2</span><span class="o">=</span><span class="n">ask_goals</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># Abfragen Tore Spieler 2</span>
		<span class="k">if</span> <span class="n">ToreS1</span> <span class="o">==</span> <span class="mi">99</span> <span class="ow">or</span> <span class="n">ToreS2</span> <span class="o">==</span> <span class="mi">99</span><span class="p">:</span>
			<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE GamePlayers Set Tore=0 WHERE Nummer=1&quot;</span><span class="p">)</span>
			<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE GamePlayers Set Tore=0 WHERE Nummer=2&quot;</span><span class="p">)</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE GamePlayers Set Tore = Tore + 1 WHERE Nummer=1&quot;</span><span class="p">)</span>
		<span class="n">con</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
		<span class="nb">print</span> <span class="s2">&quot;Tor Spieler 1 Gruen&quot;</span>
		<span class="n">checkend</span><span class="p">()</span>
		<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
		
	<span class="k">if</span> <span class="n">GPIO</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span> <span class="o">==</span> <span class="n">GPIO</span><span class="o">.</span><span class="n">LOW</span><span class="p">:</span> <span class="c1">#Tor Spieler 2</span>
		<span class="n">ToreS1</span><span class="o">=</span><span class="n">ask_goals</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># Abfragen Tore Spieler 1</span>
		<span class="n">ToreS2</span><span class="o">=</span><span class="n">ask_goals</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># Abfragen Tore Spieler 2</span>
		<span class="k">if</span> <span class="n">ToreS1</span> <span class="o">==</span> <span class="mi">99</span> <span class="ow">or</span> <span class="n">ToreS2</span> <span class="o">==</span> <span class="mi">99</span><span class="p">:</span>
			<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE GamePlayers Set Tore=0 WHERE Nummer=1&quot;</span><span class="p">)</span>
			<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE GamePlayers Set Tore=0 WHERE Nummer=2&quot;</span><span class="p">)</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE GamePlayers Set Tore = Tore + 1 WHERE Nummer=2&quot;</span><span class="p">)</span>
		<span class="n">con</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
		<span class="nb">print</span> <span class="s2">&quot;Tor Spieler 2 Weiss&quot;</span>
		<span class="n">checkend</span><span class="p">()</span>
		<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
	<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Anzeige des Spielstands auf den Anzeigetafeln</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="c1"># -*- coding: UTF-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Wenn ein Spiel, durch eingeben zweier Spieler Namen oder durch durchqueren eines Balles einer</span>
<span class="sd">Lichtschranke, gestartet wird, wird der aktuelle Spielstand auf der Anzeige dargestellt. Ändert</span>
<span class="sd">sich der Spielstand so wird der Treffer mit durch Anzeige eines weiteren Bildes kenntlich gemacht.</span>
<span class="sd">Ist ein spiel beendet wird zu dem HSB Logo gewechselt</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">__author__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Oliver Bleeker&quot;</span><span class="p">,</span> <span class="s2">&quot;Christian Hannover&quot;</span><span class="p">]</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s2">&quot;1.0.1&quot;</span>
<span class="n">__status__</span> <span class="o">=</span> <span class="s2">&quot;Ready&quot;</span>	

<span class="c1"># Laden der Verwendeten Bibliotheken</span>
<span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="nn">tk</span>
<span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">sqlite3</span> <span class="k">as</span> <span class="nn">sqlite</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="n">root</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
<span class="n">screen</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">player1_go_alt</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">player2_go_alt</span> <span class="o">=</span> <span class="mi">100</span>

<span class="c1"># Verschiedene Datenbankpfade, da Debug aud Windows PC</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">con</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;/var/www/Kicker/cgi-bin/Stats.db&quot;</span><span class="p">)</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">con</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;Stats.db&quot;</span><span class="p">)</span>

<span class="n">cur</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

<span class="c1"># Laden der Bilder</span>
<span class="n">background</span> <span class="o">=</span> <span class="n">PhotoImage</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="s2">&quot;/home/kicker/Anzeigetafel/images/schirm.gif&quot;</span><span class="p">)</span>
<span class="n">logo</span> <span class="o">=</span> <span class="n">PhotoImage</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="s2">&quot;/home/kicker/Anzeigetafel/images/hsb.gif&quot;</span><span class="p">)</span>
<span class="n">goal1img</span> <span class="o">=</span> <span class="n">PhotoImage</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="s2">&quot;/home/kicker/Anzeigetafel/images/goal1img.gif&quot;</span><span class="p">)</span>
<span class="n">goal2img</span> <span class="o">=</span> <span class="n">PhotoImage</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="s2">&quot;/home/kicker/Anzeigetafel/images/goal2img.gif&quot;</span><span class="p">)</span>
<span class="n">player1img</span> <span class="o">=</span> <span class="n">PhotoImage</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="s2">&quot;/home/kicker/Anzeigetafel/images/player1img.gif&quot;</span><span class="p">)</span>
<span class="n">player2img</span> <span class="o">=</span> <span class="n">PhotoImage</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="s2">&quot;/home/kicker/Anzeigetafel/images/player2img.gif&quot;</span><span class="p">)</span>
<span class="n">tooor</span> <span class="o">=</span> <span class="n">PhotoImage</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="s2">&quot;/home/kicker/Anzeigetafel/images/tooor.gif&quot;</span><span class="p">)</span>

<span class="c1"># Anpassung der Anzeige an das Display</span>
<span class="n">root</span><span class="o">.</span><span class="n">overrideredirect</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Anzeigetafel&#39;</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">geometry</span><span class="p">(</span><span class="s1">&#39;800x480&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">ask_player</span><span class="p">(</span><span class="n">number</span><span class="p">):</span>
<span class="w">  </span><span class="sd">&quot;&quot;&quot;Abfrage der Spielernamen fuer die Anzeige&quot;&quot;&quot;</span>
  <span class="n">playernumber</span> <span class="o">=</span> <span class="n">number</span>
  <span class="k">if</span> <span class="n">playernumber</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Spieler FROM &#39;GamePlayers&#39; WHERE Nummer = 1&quot;</span> <span class="p">)</span>
    <span class="k">for</span> <span class="n">playerdb</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">:</span>
        <span class="n">name_player</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">%</span> <span class="n">playerdb</span>
<span class="c1">#    player1name.config(text=str(name_player))</span>
  <span class="k">elif</span> <span class="n">playernumber</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Spieler FROM &#39;GamePlayers&#39; WHERE Nummer = 2&quot;</span> <span class="p">)</span>
    <span class="k">for</span> <span class="n">playerdb</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">:</span>
        <span class="n">name_player</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">%</span> <span class="n">playerdb</span>
    <span class="c1">#player2name.config(text=str(name_player))</span>
  <span class="k">return</span> <span class="n">name_player</span>

<span class="k">def</span> <span class="nf">ask_goals</span><span class="p">(</span><span class="n">number</span><span class="p">):</span>
<span class="w">  </span><span class="sd">&quot;&quot;&quot;Abfrage der Spielertore fuer die Anzeige&quot;&quot;&quot;</span>
  <span class="n">playernumber</span> <span class="o">=</span> <span class="n">number</span>
  <span class="k">if</span> <span class="n">playernumber</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Tore FROM &#39;GamePlayers&#39; WHERE Nummer = 1&quot;</span> <span class="p">)</span>
    <span class="k">for</span> <span class="n">goalsdb</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">:</span>
        <span class="n">goals_player</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">goalsdb</span><span class="p">)))</span>
    <span class="c1">#player1goals.config(text=int(goals_player))</span>
  <span class="k">elif</span> <span class="n">playernumber</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Tore FROM &#39;GamePlayers&#39; WHERE Nummer = 2&quot;</span> <span class="p">)</span>
    <span class="k">for</span> <span class="n">goalsdb</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">:</span>
        <span class="n">goals_player</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">goalsdb</span><span class="p">)))</span>
    <span class="c1">#player2goals.config(text=int(goals_player))</span>
  <span class="k">return</span> <span class="n">goals_player</span>


<span class="c1"># Hintergund HSB Logo vorweg ausgewaehlt um schnellere Anzeige zu gewaehrleisten  </span>
<span class="n">background_main</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">root</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="n">logo</span><span class="p">)</span>				<span class="c1">#hab hier das von logo auf background geaendert</span>
<span class="n">background_main</span><span class="o">.</span><span class="n">place</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">480</span><span class="p">)</span>

<span class="c1"># Beginn der Hauptschleife</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
	<span class="c1"># Abrage der der Spielertore fuer die Bildauswahl</span>
	<span class="n">player1_go</span><span class="o">=</span> <span class="n">ask_goals</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
	<span class="n">player2_go</span><span class="o">=</span> <span class="n">ask_goals</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

	<span class="k">if</span> <span class="n">player1_go</span> <span class="o">==</span> <span class="s2">&quot;99&quot;</span> <span class="ow">and</span> <span class="n">player2_go</span> <span class="o">==</span> <span class="s2">&quot;99&quot;</span><span class="p">:</span>
		<span class="k">if</span> <span class="n">screen</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
			<span class="c1"># Hintergrund</span>
			<span class="n">background_main</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">root</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="n">logo</span><span class="p">)</span>
			<span class="n">background_main</span><span class="o">.</span><span class="n">place</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">480</span><span class="p">)</span>
			<span class="n">screen</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="k">if</span> <span class="n">player1_go</span> <span class="o">!=</span> <span class="n">player1_go_alt</span> <span class="ow">or</span> <span class="n">player2_go</span> <span class="o">!=</span> <span class="n">player2_go_alt</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">player1_go</span> <span class="o">!=</span> <span class="s2">&quot;0&quot;</span> <span class="ow">or</span> <span class="n">player2_go</span> <span class="o">!=</span> <span class="s2">&quot;0&quot;</span><span class="p">:</span>
				<span class="n">background_main</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">root</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="n">tooor</span><span class="p">)</span>				<span class="c1">#hab hier das von logo auf background geaendert</span>
				<span class="n">background_main</span><span class="o">.</span><span class="n">place</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">480</span><span class="p">)</span>
				<span class="n">root</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
				<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
				<span class="n">screen</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="k">if</span> <span class="n">screen</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
			<span class="c1"># Hintergrund</span>
			<span class="n">background_main</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">root</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="n">background</span><span class="p">)</span>
			<span class="n">background_main</span><span class="o">.</span><span class="n">place</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">480</span><span class="p">)</span>
			<span class="n">screen</span> <span class="o">=</span> <span class="mi">1</span>
			
			<span class="c1"># Spielernamen</span>
			<span class="n">player1name</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span>
							<span class="n">root</span><span class="p">,</span> 
							<span class="n">fg</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span>
							<span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;Arial&#39;</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span>
							<span class="n">text</span><span class="o">=</span><span class="n">ask_player</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> 
							<span class="n">compound</span> <span class="o">=</span> <span class="n">CENTER</span><span class="p">,</span>						<span class="c1">#Bild wird versetzt</span>
							<span class="n">image</span><span class="o">=</span><span class="n">player1img</span><span class="p">)</span>
			<span class="n">player1name</span><span class="o">.</span><span class="n">place</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">102</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">343</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
		
			<span class="n">player2name</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span>
							<span class="n">root</span><span class="p">,</span> 
							<span class="n">fg</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span>
							<span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;Arial&#39;</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span>
							<span class="n">text</span><span class="o">=</span><span class="n">ask_player</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> 
							<span class="n">compound</span> <span class="o">=</span> <span class="n">CENTER</span><span class="p">,</span>						<span class="c1">#Bild wird versetzt</span>
							<span class="n">image</span><span class="o">=</span><span class="n">player2img</span><span class="p">)</span>
			<span class="n">player2name</span><span class="o">.</span><span class="n">place</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">482</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">343</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>

		
		<span class="k">if</span> <span class="n">player1_go</span> <span class="o">!=</span> <span class="n">player1_go_alt</span> <span class="ow">or</span> <span class="n">player2_go</span> <span class="o">!=</span> <span class="n">player2_go_alt</span><span class="p">:</span>
			<span class="c1"># Anzahl der Tore</span>
			<span class="n">player1goals</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span>
								<span class="n">root</span><span class="p">,</span> 
								<span class="n">fg</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span>
								<span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;Arial&#39;</span><span class="p">,</span> <span class="mi">90</span><span class="p">),</span>
								<span class="n">text</span><span class="o">=</span><span class="n">ask_goals</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> 
								<span class="n">compound</span> <span class="o">=</span> <span class="n">CENTER</span><span class="p">,</span>						<span class="c1">#Bild wird versetzt</span>
								<span class="n">image</span><span class="o">=</span><span class="n">goal1img</span><span class="p">)</span>
			<span class="n">player1goals</span><span class="o">.</span><span class="n">place</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">102</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">129</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">198</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">203</span><span class="p">)</span>
			
			<span class="n">player2goals</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span>
								<span class="n">root</span><span class="p">,</span> 
								<span class="n">fg</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span>
								<span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;Arial&#39;</span><span class="p">,</span> <span class="mi">90</span><span class="p">),</span>
								<span class="n">text</span><span class="o">=</span><span class="n">ask_goals</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> 
								<span class="n">compound</span> <span class="o">=</span> <span class="n">CENTER</span><span class="p">,</span>						<span class="c1">#Bild wird versetzt</span>
								<span class="n">image</span><span class="o">=</span><span class="n">goal2img</span><span class="p">)</span>
			<span class="n">player2goals</span><span class="o">.</span><span class="n">place</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">486</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">129</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">198</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">203</span><span class="p">)</span>
			
			<span class="n">player1_go_alt</span> <span class="o">=</span> <span class="n">player1_go</span>
			<span class="n">player2_go_alt</span> <span class="o">=</span> <span class="n">player2_go</span>
	
	<span class="n">root</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
	<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
			
<span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Index Datei der WEBGUI</p></li>
</ul>
<ul class="simple">
<li><p>Funktion zum Hinzufügen und Löschen der Spiele</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="c1"># -*- coding: UTF-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Der erste der beiden Funktionsblöcke dient dem Auswerten und ablegen der Spielergebnisse.</span>
<span class="sd">Es wird anhand der Tore ermittelt welcher Spieler gewonnen hat und anhand dessen werden die Punkte</span>
<span class="sd">für die Tagestabelle ermittelt. Für die Ewige Tabelle wird mit Hilfe der ELO Formel und anhand</span>
<span class="sd">der Auswertung der vergangenen Spieler, eine Gewinnwahrscheinlichkeit errechnet. Hin Hilfe</span>
<span class="sd">dieser Wahrscheinlichkeit wird eine Bewertung des jeweiligen Spielers errechnet und abgelegt. Zudem</span>
<span class="sd">dient der Zweite Funktionsblock dem Löschen des Letzten Spiels falls ein Fehler in der Eingabe erfolgte.</span>
<span class="sd">&quot;&quot;&quot;</span>	
<span class="n">__author__</span> <span class="o">=</span> <span class="s2">&quot;Oliver Bleeker&quot;</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s2">&quot;1.0.1&quot;</span>
<span class="n">__status__</span> <span class="o">=</span> <span class="s2">&quot;Ready&quot;</span>

<span class="c1"># Laden der Verwendeten Bibliotheken</span>
<span class="kn">import</span> <span class="nn">sqlite3</span> <span class="k">as</span> <span class="nn">sqlite</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">cgi</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>


<span class="k">def</span> <span class="nf">addgame</span><span class="p">(</span><span class="n">player1_name</span><span class="p">,</span><span class="n">player1_goals</span><span class="p">,</span><span class="n">player2_goals</span><span class="p">,</span><span class="n">player2_name</span><span class="p">):</span>	
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Spieldaten entgegennehmen, auswerten und neu in der Datenbank ablegen&quot;&quot;&quot;</span>
	<span class="c1"># Definieren von Globelen Variablen </span>
	<span class="n">con</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;Stats.db&quot;</span><span class="p">)</span>
	<span class="n">cur</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
	<span class="n">datum</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">.%m.%Y&quot;</span><span class="p">)</span>
	<span class="n">null</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="n">zweitausend</span> <span class="o">=</span> <span class="mi">2000</span>
	<span class="n">Fehler</span> <span class="o">=</span> <span class="mi">0</span>
	
	<span class="c1"># Nur für Testzwecke</span>
	<span class="c1">#player1_goals = int(4)</span>
	<span class="c1">#player2_goals = int(3)</span>
	<span class="c1">#player1_name = &quot;Marius&quot;</span>
	<span class="c1">#player2_name = &quot;Oliver&quot;</span>
	<span class="c1">#gameplace = &quot;Oliver&quot;</span>
	<span class="c1">#gameday = int(9)        #später variabel</span>
	
	<span class="c1"># Erstellen der Tabellen in der Datenbank falls diese nicht Vorhanden sein Sollten </span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;create table if not exists Games (Datum TEXT,Spieler1 TEXT,Spieler2 TEXT,ToreSpieler1 INT,ToreSpieler2 INT,PunkteSpieler1 INT,PunkteSpieler2 INT,BewertungSpieler1 INT, BewertungSpieler2 INT, TrendSpieler1 INT, TrendSpieler2 INT,Spieltag INT,Spielort TEXT)&#39;&#39;&#39;</span><span class="p">)</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;create table if not exists EverTable (Spieler TEXT,Siege INT,Unentschieden INT,Niederlagen INT,Tore INT,Gegentore INT,Tordifferenz INT,Punkte INT,Spielanzahl INT,Bewertung FLOAT, BewertungTrend INT)&#39;&#39;&#39;</span><span class="p">)</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;create table if not exists DayTable (Spieler TEXT,Siege INT,Unentschieden INT,Niederlagen INT,Tore INT,Gegentore INT,Tordifferenz INT,Punkte INT,Spielanzahl INT, BewertungTrend INT)&#39;&#39;&#39;</span><span class="p">)</span>

	
	<span class="c1"># gameday aus Settings holen</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT (Spieltag) FROM Settings&quot;</span><span class="p">)</span>
	<span class="n">gameday</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">gameday</span><span class="p">:</span>
		<span class="n">gameday</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		<span class="k">if</span> <span class="n">gameday</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
			<span class="n">Fehler</span> <span class="o">=</span> <span class="mi">3</span>                <span class="c1"># Fehlercode 3 = gameday muss unter Settings definiert werden</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">gameday</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
	<span class="c1"># gameplace aus Settings holen</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT Spielort FROM Settings&quot;</span><span class="p">)</span>
	<span class="k">for</span> <span class="n">gameplacedb</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">:</span>
		<span class="n">gameplace</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">%</span> <span class="n">gameplacedb</span>
	<span class="c1"># Maximalen Spieltag aus Games holen</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT MAX(Spieltag) FROM Games&quot;</span><span class="p">)</span>
	<span class="n">maxSpieltag</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">maxSpieltag</span><span class="p">:</span>
		<span class="n">maxSpieltag</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		<span class="k">if</span> <span class="n">maxSpieltag</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
			<span class="n">maxSpieltag</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">maxSpieltag</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
	
	<span class="c1"># Prüfen ob eingegebener gameday größer oder gleich maxSpieltag ist - sonst Fehler...</span>
	<span class="k">if</span> <span class="n">maxSpieltag</span> <span class="o">&lt;</span> <span class="n">gameday</span><span class="p">:</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DROP Table IF EXISTS `DayTable`&quot;</span><span class="p">)</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;create table if not exists DayTable (Spieler TEXT,Siege INT,Unentschieden INT,Niederlagen INT,Tore INT,Gegentore INT,Tordifferenz INT,Punkte INT,Spielanzahl INT, BewertungTrend INT)&#39;&#39;&#39;</span><span class="p">)</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="k">if</span> <span class="n">maxSpieltag</span> <span class="o">&gt;</span> <span class="n">gameday</span><span class="p">:</span>
			<span class="n">Fehler</span> <span class="o">=</span> <span class="mi">2</span>                          <span class="c1">#Fehlercode 2 = maxSpieltag größer gameday</span>
	
	<span class="c1">#Zuweisung der Punkte für die Siegerauswertung</span>
	<span class="k">if</span> <span class="n">player1_goals</span> <span class="o">&gt;</span> <span class="n">player2_goals</span><span class="p">:</span>
		<span class="n">player1_points</span> <span class="o">=</span> <span class="mi">3</span>
		<span class="n">player2_points</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="n">win</span> <span class="o">=</span> <span class="n">player1_name</span>
		<span class="n">SS1</span> <span class="o">=</span> <span class="mi">1</span>
		<span class="n">SS2</span> <span class="o">=</span> <span class="mi">0</span>
	
	<span class="k">if</span> <span class="n">player1_goals</span> <span class="o">&lt;</span> <span class="n">player2_goals</span><span class="p">:</span>
		<span class="n">player1_points</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="n">player2_points</span> <span class="o">=</span> <span class="mi">3</span>
		<span class="n">win</span> <span class="o">=</span> <span class="n">player2_name</span>
		<span class="n">SS1</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="n">SS2</span> <span class="o">=</span> <span class="mi">1</span>
	
	<span class="k">if</span> <span class="n">player1_goals</span> <span class="o">==</span> <span class="n">player2_goals</span><span class="p">:</span>
		<span class="n">player1_points</span> <span class="o">=</span> <span class="mi">1</span>
		<span class="n">player2_points</span> <span class="o">=</span> <span class="mi">1</span>
		<span class="n">win</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="n">SS1</span> <span class="o">=</span> <span class="mf">0.5</span>
		<span class="n">SS2</span> <span class="o">=</span> <span class="mf">0.5</span>
	
	<span class="c1"># Fehler in der Spielernameneingabe erkennen</span>
	<span class="k">if</span> <span class="n">player1_name</span> <span class="o">==</span> <span class="s2">&quot;Spieler 1&quot;</span> <span class="ow">or</span> <span class="n">player2_name</span> <span class="o">==</span> <span class="s2">&quot;Spieler 2&quot;</span><span class="p">:</span>
		<span class="n">Fehler</span> <span class="o">=</span> <span class="mi">4</span>
		
	<span class="k">if</span> <span class="n">player1_name</span> <span class="o">==</span> <span class="n">player2_name</span><span class="p">:</span>
		<span class="n">Fehler</span> <span class="o">=</span> <span class="mi">5</span>
	
	<span class="c1"># Wenn keine Eingabefehler erkannt werden started das eintragen in die Datenbank 		</span>
	<span class="k">if</span> <span class="n">Fehler</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
		<span class="c1"># Spielernamen suchen ob in EverTable bereichts vorhanden - sonst erstellen</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT SUM (Spielanzahl) FROM EverTable WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>
		<span class="n">countplayS1</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
		<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">countplayS1</span><span class="p">:</span>
			<span class="n">countplayS1</span> <span class="o">=</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
			<span class="k">if</span> <span class="n">countplayS1</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
				<span class="n">countplayS1</span> <span class="o">=</span> <span class="mi">0</span>
				<span class="n">cur</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
				<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;INSERT INTO EverTable VALUES (?,?,?,?,?,?,?,?,?,?,?);&quot;</span><span class="p">,(</span><span class="n">player1_name</span><span class="p">,</span><span class="n">null</span><span class="p">,</span><span class="n">null</span><span class="p">,</span><span class="n">null</span><span class="p">,</span><span class="n">null</span><span class="p">,</span><span class="n">null</span><span class="p">,</span><span class="n">null</span><span class="p">,</span><span class="n">null</span><span class="p">,</span><span class="n">null</span><span class="p">,</span><span class="n">zweitausend</span><span class="p">,</span><span class="n">null</span><span class="p">))</span>
				<span class="n">con</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="n">countplayS1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT SUM (Spielanzahl) FROM EverTable WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>
		<span class="n">countplayS2</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
		<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">countplayS2</span><span class="p">:</span>
			<span class="n">countplayS2</span> <span class="o">=</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
			<span class="k">if</span> <span class="n">countplayS2</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
				<span class="n">countplayS2</span> <span class="o">=</span> <span class="mi">0</span>
				<span class="n">cur</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
				<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;INSERT INTO EverTable VALUES (?,?,?,?,?,?,?,?,?,?,?);&quot;</span><span class="p">,(</span><span class="n">player2_name</span><span class="p">,</span><span class="n">null</span><span class="p">,</span><span class="n">null</span><span class="p">,</span><span class="n">null</span><span class="p">,</span><span class="n">null</span><span class="p">,</span><span class="n">null</span><span class="p">,</span><span class="n">null</span><span class="p">,</span><span class="n">null</span><span class="p">,</span><span class="n">null</span><span class="p">,</span><span class="n">zweitausend</span><span class="p">,</span><span class="n">null</span><span class="p">))</span>
				<span class="n">con</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="n">countplayS2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		
		<span class="c1"># Spielernamen suchen ob in DayTable bereichts vorhanden - sonst erstellen</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT SUM (Spielanzahl) FROM DayTable WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>
		<span class="n">countplayS1</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
		<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">countplayS1</span><span class="p">:</span>
			<span class="n">countplayS1</span> <span class="o">=</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
			<span class="k">if</span> <span class="n">countplayS1</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
				<span class="n">countplayS1</span> <span class="o">=</span> <span class="mi">0</span>
				<span class="n">cur</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
				<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;INSERT INTO DayTable VALUES (?,?,?,?,?,?,?,?,?,?);&quot;</span><span class="p">,(</span><span class="n">player1_name</span><span class="p">,</span><span class="n">null</span><span class="p">,</span><span class="n">null</span><span class="p">,</span><span class="n">null</span><span class="p">,</span><span class="n">null</span><span class="p">,</span><span class="n">null</span><span class="p">,</span><span class="n">null</span><span class="p">,</span><span class="n">null</span><span class="p">,</span><span class="n">null</span><span class="p">,</span><span class="n">null</span><span class="p">))</span>
				<span class="n">con</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="n">countplayS1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT SUM (Spielanzahl) FROM DayTable WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>
		<span class="n">countplayS2</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
		<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">countplayS2</span><span class="p">:</span>
			<span class="n">countplayS2</span> <span class="o">=</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
			<span class="k">if</span> <span class="n">countplayS2</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
				<span class="n">countplayS2</span> <span class="o">=</span> <span class="mi">0</span>
				<span class="n">cur</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
				<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;INSERT INTO DayTable VALUES (?,?,?,?,?,?,?,?,?,?);&quot;</span><span class="p">,(</span><span class="n">player2_name</span><span class="p">,</span><span class="n">null</span><span class="p">,</span><span class="n">null</span><span class="p">,</span><span class="n">null</span><span class="p">,</span><span class="n">null</span><span class="p">,</span><span class="n">null</span><span class="p">,</span><span class="n">null</span><span class="p">,</span><span class="n">null</span><span class="p">,</span><span class="n">null</span><span class="p">,</span><span class="n">null</span><span class="p">))</span>
				<span class="n">con</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="n">countplayS2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
				
		<span class="c1"># Abfrage und berechnung Bewertung der Spieler Anfang</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT (Bewertung) FROM Players WHERE Name=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>
		<span class="n">RS1db</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
		<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">RS1db</span><span class="p">:</span>
			<span class="n">RS1db</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT (Bewertung) FROM Players WHERE Name=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>
		<span class="n">RS2db</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
		<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">RS2db</span><span class="p">:</span>
			<span class="n">RS2db</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		
		<span class="c1">#cur.execute (&quot;SELECT (Bewertung) FROM Players WHERE Name=?&quot;, (player1_name, ))</span>
		<span class="c1">#for RS1db1 in cur:</span>
		<span class="c1">#	RS1db = float(&#39;&#39;.join(map(str,RS1db1)))</span>
		<span class="c1">#</span>
		<span class="c1">#cur.execute (&quot;SELECT (Bewertung) FROM Players WHERE Name=?&quot;, (player2_name, ))</span>
		<span class="c1">#for RS2db1 in cur:</span>
		<span class="c1">#	RS2db = float(&#39;&#39;.join(map(str,RS2db1)))</span>
		
		<span class="c1">#    cur.execute(&quot;SELECT Spieler FROM &#39;GamePlayers&#39; WHERE Nummer = 1&quot; )</span>
		<span class="c1">#	for playerdb in cur:</span>
		<span class="c1">#		name_player = (&quot;%s&quot;) % playerdb</span>
		
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT KFaktor FROM Settings&quot;</span><span class="p">)</span>
		<span class="n">K</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
		<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">K</span><span class="p">:</span>
			<span class="n">K</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		
		<span class="c1">#Berechnug der Spielerbewertung mit Hilfe der ELO Formel</span>
		<span class="n">K</span> <span class="o">=</span> <span class="n">K</span> <span class="o">+</span> <span class="nb">abs</span><span class="p">(</span><span class="n">player1_goals</span> <span class="o">-</span> <span class="n">player2_goals</span><span class="p">)</span>
		<span class="n">ES1</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">10</span><span class="o">**</span><span class="p">((</span><span class="n">RS2db</span> <span class="o">-</span> <span class="n">RS1db</span><span class="p">)</span><span class="o">/</span><span class="mi">400</span><span class="p">)))</span>
		<span class="n">ES2</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">10</span><span class="o">**</span><span class="p">((</span><span class="n">RS1db</span> <span class="o">-</span> <span class="n">RS2db</span><span class="p">)</span><span class="o">/</span><span class="mi">400</span><span class="p">)))</span>
				
		<span class="n">RS1</span> <span class="o">=</span> <span class="n">RS1db</span> <span class="o">+</span> <span class="n">K</span> <span class="o">*</span> <span class="p">(</span><span class="n">SS1</span> <span class="o">-</span> <span class="n">ES1</span><span class="p">)</span>
		<span class="n">RS2</span> <span class="o">=</span> <span class="n">RS2db</span> <span class="o">+</span> <span class="n">K</span> <span class="o">*</span> <span class="p">(</span><span class="n">SS2</span> <span class="o">-</span> <span class="n">ES2</span><span class="p">)</span>
		
		
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE Players Set Bewertung=? WHERE Name=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">RS1</span><span class="p">,</span><span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE Players Set Bewertung=? WHERE Name=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">RS2</span><span class="p">,</span><span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>
		
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE Players Set Bewertung_Spiel=? WHERE Name=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">RS1db</span><span class="p">,</span><span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE Players Set Bewertung_Spiel=? WHERE Name=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">RS2db</span><span class="p">,</span><span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>
		
		<span class="n">player1_trend</span> <span class="o">=</span> <span class="n">RS1</span> <span class="o">-</span> <span class="n">RS1db</span>
		<span class="n">player2_trend</span> <span class="o">=</span> <span class="n">RS2</span> <span class="o">-</span> <span class="n">RS2db</span>

		<span class="n">RS1</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">RS1</span> <span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
		<span class="n">RS2</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">RS2</span> <span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
		
		<span class="c1"># Werte in Games speichern:</span>
		<span class="n">cur</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
		<span class="n">con</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
		<span class="n">cur</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;INSERT INTO Games VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?);&quot;</span><span class="p">,(</span><span class="n">datum</span><span class="p">,</span><span class="n">player1_name</span><span class="p">,</span><span class="n">player2_name</span><span class="p">,</span><span class="n">player1_goals</span><span class="p">,</span><span class="n">player2_goals</span><span class="p">,</span><span class="n">player1_points</span><span class="p">,</span><span class="n">player2_points</span><span class="p">,</span><span class="n">RS1</span><span class="p">,</span><span class="n">RS2</span><span class="p">,</span><span class="n">player1_trend</span><span class="p">,</span><span class="n">player2_trend</span><span class="p">,</span><span class="n">gameday</span><span class="p">,</span><span class="n">gameplace</span><span class="p">))</span>
	
		<span class="c1"># Start Update der EverTable:</span>
		<span class="k">if</span> <span class="n">win</span> <span class="o">==</span> <span class="n">player1_name</span><span class="p">:</span>
			<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Siege = Siege + 1 WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>                  <span class="c1"># Update &quot;EverTable&quot; Siege SP1</span>
			<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Niederlagen = Niederlagen + 1 WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>      <span class="c1"># Update &quot;EverTable&quot; Niederlagen SP2</span>
		<span class="k">if</span> <span class="n">win</span> <span class="o">==</span> <span class="n">player2_name</span><span class="p">:</span>
			<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Niederlagen = Niederlagen + 1 WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>      <span class="c1"># Update &quot;EverTable&quot; Niederlagen SP1</span>
			<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Siege = Siege + 1 WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>                  <span class="c1"># Update &quot;EverTable&quot; Siege SP2</span>
		<span class="k">if</span> <span class="n">win</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
			<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Unentschieden = Unentschieden + 1 WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>  <span class="c1"># Update &quot;EverTable&quot; Unentschieden SP1</span>
			<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Unentschieden = Unentschieden + 1 WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>  <span class="c1"># Update &quot;EverTable&quot; Unentschieden SP2</span>
	
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Tore = Tore + ? WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_goals</span><span class="p">,</span> <span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>          <span class="c1"># Update &quot;EverTable&quot; Tore SP1</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Tore = Tore + ? WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_goals</span><span class="p">,</span> <span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>          <span class="c1"># Update &quot;EverTable&quot; Tore SP2</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Gegentore = Gegentore + ? WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_goals</span><span class="p">,</span> <span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>    <span class="c1"># Update &quot;EverTable&quot; Gegentore SP1</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Gegentore = Gegentore + ? WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_goals</span><span class="p">,</span> <span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>    <span class="c1"># Update &quot;EverTable&quot; Gegentore SP2</span>
	
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Tordifferenz = Tordifferenz + ? - ? WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_goals</span><span class="p">,</span> <span class="n">player2_goals</span><span class="p">,</span> <span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>   <span class="c1"># Update &quot;EverTable&quot; Tordifferenz SP1</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Tordifferenz = Tordifferenz + ? - ? WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_goals</span><span class="p">,</span> <span class="n">player1_goals</span><span class="p">,</span> <span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>   <span class="c1"># Update &quot;EverTable&quot; Tordifferenz SP2</span>
	
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Spielanzahl = Spielanzahl + 1 WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>           <span class="c1"># Update &quot;EverTable&quot; Spielanzahl SP1</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Spielanzahl = Spielanzahl + 1 WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>           <span class="c1"># Update &quot;EverTable&quot; Spielanzahl SP2</span>
	
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Punkte = (Punkte + ?) WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_points</span><span class="p">,</span> <span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>   <span class="c1"># Update &quot;EverTable&quot; Punkte SP1</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Punkte = (Punkte + ?) WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_points</span><span class="p">,</span> <span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>   <span class="c1"># Update &quot;EverTable&quot; Punkte SP2</span>
	
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Bewertung=? WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">RS1</span><span class="p">,</span><span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>     <span class="c1"># Update &quot;EverTable&quot; Bewertung SP1</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Bewertung=? WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">RS2</span><span class="p">,</span><span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>     <span class="c1"># Update &quot;EverTable&quot; Bewertung SP2</span>
		
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT SUM (Spielanzahl) FROM EverTable WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>

		<span class="c1"># Start Update der DayTable:</span>
		<span class="k">if</span> <span class="n">win</span> <span class="o">==</span> <span class="n">player1_name</span><span class="p">:</span>
			<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE DayTable Set Siege = Siege + 1 WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>                  <span class="c1"># Update &quot;EverTable&quot; Siege SP1</span>
			<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE DayTable Set Niederlagen = Niederlagen + 1 WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>      <span class="c1"># Update &quot;EverTable&quot; Niederlagen SP2</span>
		<span class="k">if</span> <span class="n">win</span> <span class="o">==</span> <span class="n">player2_name</span><span class="p">:</span>
			<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE DayTable Set Niederlagen = Niederlagen + 1 WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>      <span class="c1"># Update &quot;EverTable&quot; Niederlagen SP1</span>
			<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE DayTable Set Siege = Siege + 1 WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>                  <span class="c1"># Update &quot;EverTable&quot; Siege SP2</span>
		<span class="k">if</span> <span class="n">win</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
			<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE DayTable Set Unentschieden = Unentschieden + 1 WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>  <span class="c1"># Update &quot;EverTable&quot; Unentschieden SP1</span>
			<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE DayTable Set Unentschieden = Unentschieden + 1 WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>  <span class="c1"># Update &quot;EverTable&quot; Unentschieden SP2</span>
	
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE DayTable Set Tore = Tore + ? WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_goals</span><span class="p">,</span> <span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>          <span class="c1"># Update &quot;EverTable&quot; Tore SP1</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE DayTable Set Tore = Tore + ? WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_goals</span><span class="p">,</span> <span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>          <span class="c1"># Update &quot;EverTable&quot; Tore SP2</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE DayTable Set Gegentore = Gegentore + ? WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_goals</span><span class="p">,</span> <span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>    <span class="c1"># Update &quot;EverTable&quot; Gegentore SP1</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE DayTable Set Gegentore = Gegentore + ? WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_goals</span><span class="p">,</span> <span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>    <span class="c1"># Update &quot;EverTable&quot; Gegentore SP2</span>
	
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE DayTable Set Tordifferenz = Tordifferenz + ? - ? WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_goals</span><span class="p">,</span> <span class="n">player2_goals</span><span class="p">,</span> <span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>   <span class="c1"># Update &quot;EverTable&quot; Tordifferenz SP1</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE DayTable Set Tordifferenz = Tordifferenz + ? - ? WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_goals</span><span class="p">,</span> <span class="n">player1_goals</span><span class="p">,</span> <span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>   <span class="c1"># Update &quot;EverTable&quot; Tordifferenz SP2</span>
	
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE DayTable Set Spielanzahl = Spielanzahl + 1 WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>           <span class="c1"># Update &quot;EverTable&quot; Spielanzahl SP1</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE DayTable Set Spielanzahl = Spielanzahl + 1 WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>           <span class="c1"># Update &quot;EverTable&quot; Spielanzahl SP2</span>
	
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE DayTable Set Punkte = (Punkte + ?) WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_points</span><span class="p">,</span> <span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>   <span class="c1"># Update &quot;EverTable&quot; Punkte SP1</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE DayTable Set Punkte = (Punkte + ?) WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_points</span><span class="p">,</span> <span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>   <span class="c1"># Update &quot;EverTable&quot; Punkte SP2</span>
	
	<span class="c1">#	cur.execute (&quot;SELECT SUM (Spielanzahl) FROM EverTable WHERE Spieler=?&quot;, (player1_name, ))</span>
	
		<span class="n">setdelete</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;UPDATE &#39;Settings&#39; SET Setgamedelete = ?&quot;</span><span class="p">,(</span><span class="n">setdelete</span><span class="p">,</span> <span class="p">))</span>
	
		<span class="n">con</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
		<span class="n">con</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
		
	<span class="c1"># Auswertung Eingabefehler</span>
	<span class="k">if</span> <span class="n">Fehler</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
		<span class="c1">#text = &quot;Spieldaten werden gespeichert&quot;</span>
		<span class="c1">#color = &quot;ADFF2F&quot;   #grün - erfolgreich gespeichert</span>
		<span class="n">messagecode</span> <span class="o">=</span> <span class="s2">&quot;50&quot;</span>
	<span class="k">if</span> <span class="n">Fehler</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
		<span class="c1">#text = &quot;Bitte alle Spieldaten Eingeben!&quot;</span>
		<span class="c1">#color = &quot;FF0000&quot;   #rot - Fehler!</span>
		<span class="n">messagecode</span> <span class="o">=</span> <span class="s2">&quot;51&quot;</span>
	<span class="k">if</span> <span class="n">Fehler</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
		<span class="c1">#text = &quot;Spieltag ist zu klein - muss groesser oder gleich %s sein&quot; % (maxSpieltag)</span>
		<span class="c1">#color = &quot;FF0000&quot;   #rot - Fehler!</span>
		<span class="n">messagecode</span> <span class="o">=</span> <span class="s2">&quot;51&quot;</span>
	<span class="k">if</span> <span class="n">Fehler</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
		<span class="c1">#text = &quot;Spieltag muss in den Einstellungen definiert sein!&quot;</span>
		<span class="c1">#color = &quot;FF0000&quot;   #rot - Fehler!</span>
		<span class="n">messagecode</span> <span class="o">=</span> <span class="s2">&quot;51&quot;</span>
	<span class="k">if</span> <span class="n">Fehler</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
		<span class="c1">#text = &quot;Spieler w&amp;auml;hlen!&quot;</span>
		<span class="c1">#color = &quot;FF0000&quot;   #rot - Fehler!</span>
		<span class="n">messagecode</span> <span class="o">=</span> <span class="s2">&quot;51&quot;</span>
	<span class="k">if</span> <span class="n">Fehler</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
		<span class="c1">#text = &quot;Zwei gleiche Spieler eingegeben!&quot;</span>
		<span class="c1">#color = &quot;FF0000&quot;   #rot - Fehler!</span>
		<span class="n">messagecode</span> <span class="o">=</span> <span class="s2">&quot;51&quot;</span>
		
	<span class="k">return</span> <span class="p">(</span><span class="n">messagecode</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">deletegame</span><span class="p">(</span><span class="n">rowid</span><span class="p">):</span>	
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Das zuletzt eingetragende Spiel aud der Wertung und der Tabelle löschen&quot;&quot;&quot;</span>
	<span class="n">con</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;Stats.db&quot;</span><span class="p">)</span>
	<span class="n">cur</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
	
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT Spieler1 FROM Games WHERE rowid=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">rowid</span><span class="p">,</span> <span class="p">))</span>
	<span class="n">player1_name</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">player1_name</span><span class="p">:</span>
		<span class="n">player1_name</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT Spieler2 FROM Games WHERE rowid=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">rowid</span><span class="p">,</span> <span class="p">))</span>
	<span class="n">player2_name</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">player2_name</span><span class="p">:</span>
		<span class="n">player2_name</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT ToreSpieler1 FROM Games WHERE rowid=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">rowid</span><span class="p">,</span> <span class="p">))</span>
	<span class="n">player1_goals</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">player1_goals</span><span class="p">:</span>
		<span class="n">player1_goals</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span>
		<span class="p">)</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT ToreSpieler2 FROM Games WHERE rowid=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">rowid</span><span class="p">,</span> <span class="p">))</span>
	<span class="n">player2_goals</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">player2_goals</span><span class="p">:</span>
		<span class="n">player2_goals</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
	
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT (Bewertung_Spiel) FROM Players WHERE Name=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>
	<span class="n">RS1db</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">RS1db</span><span class="p">:</span>
		<span class="n">RS1db</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
	
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT (Bewertung_Spiel) FROM Players WHERE Name=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>
	<span class="n">RS2db</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">RS2db</span><span class="p">:</span>
		<span class="n">RS2db</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
	
	<span class="k">if</span> <span class="n">player1_goals</span> <span class="o">&gt;</span> <span class="n">player2_goals</span><span class="p">:</span>
		<span class="n">player1_points</span> <span class="o">=</span> <span class="mi">3</span>
		<span class="n">player2_points</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="n">win</span> <span class="o">=</span> <span class="n">player1_name</span>

	<span class="k">if</span> <span class="n">player1_goals</span> <span class="o">&lt;</span> <span class="n">player2_goals</span><span class="p">:</span>
		<span class="n">player1_points</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="n">player2_points</span> <span class="o">=</span> <span class="mi">3</span>
		<span class="n">win</span> <span class="o">=</span> <span class="n">player2_name</span>

	<span class="k">if</span> <span class="n">player1_goals</span> <span class="o">==</span> <span class="n">player2_goals</span><span class="p">:</span>
		<span class="n">player1_points</span> <span class="o">=</span> <span class="mi">1</span>
		<span class="n">player2_points</span> <span class="o">=</span> <span class="mi">1</span>
		<span class="n">win</span> <span class="o">=</span> <span class="mi">0</span>
	
	
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE Players Set Bewertung=? WHERE Name=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">RS1db</span><span class="p">,</span><span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE Players Set Bewertung=? WHERE Name=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">RS2db</span><span class="p">,</span><span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>
	
	<span class="c1"># Start Update der EverTable:</span>
	<span class="k">if</span> <span class="n">win</span> <span class="o">==</span> <span class="n">player1_name</span><span class="p">:</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Siege = Siege - 1 WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>                  <span class="c1"># Update &quot;EverTable&quot; Siege SP1</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Niederlagen = Niederlagen - 1 WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>      <span class="c1"># Update &quot;EverTable&quot; Niederlagen SP2</span>
	<span class="k">if</span> <span class="n">win</span> <span class="o">==</span> <span class="n">player2_name</span><span class="p">:</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Niederlagen = Niederlagen - 1 WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>      <span class="c1"># Update &quot;EverTable&quot; Niederlagen SP1</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Siege = Siege - 1 WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>                  <span class="c1"># Update &quot;EverTable&quot; Siege SP2</span>
	<span class="k">if</span> <span class="n">win</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Unentschieden = Unentschieden - 1 WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>  <span class="c1"># Update &quot;EverTable&quot; Unentschieden SP1</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Unentschieden = Unentschieden - 1 WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>  <span class="c1"># Update &quot;EverTable&quot; Unentschieden SP2</span>
	
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Tore = Tore - ? WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_goals</span><span class="p">,</span> <span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>          <span class="c1"># Update &quot;EverTable&quot; Tore SP1</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Tore = Tore - ? WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_goals</span><span class="p">,</span> <span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>          <span class="c1"># Update &quot;EverTable&quot; Tore SP2</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Gegentore = Gegentore - ? WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_goals</span><span class="p">,</span> <span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>    <span class="c1"># Update &quot;EverTable&quot; Gegentore SP1</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Gegentore = Gegentore - ? WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_goals</span><span class="p">,</span> <span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>    <span class="c1"># Update &quot;EverTable&quot; Gegentore SP2</span>
	
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Tordifferenz = Tordifferenz - ? + ? WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_goals</span><span class="p">,</span> <span class="n">player2_goals</span><span class="p">,</span> <span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>   <span class="c1"># Update &quot;EverTable&quot; Tordifferenz SP1</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Tordifferenz = Tordifferenz - ? + ? WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_goals</span><span class="p">,</span> <span class="n">player1_goals</span><span class="p">,</span> <span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>   <span class="c1"># Update &quot;EverTable&quot; Tordifferenz SP2</span>
	
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Spielanzahl = Spielanzahl - 1 WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>           <span class="c1"># Update &quot;EverTable&quot; Spielanzahl SP1</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Spielanzahl = Spielanzahl - 1 WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>           <span class="c1"># Update &quot;EverTable&quot; Spielanzahl SP2</span>
	
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Punkte = (Punkte - ?) WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_points</span><span class="p">,</span> <span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>   <span class="c1"># Update &quot;EverTable&quot; Punkte SP1</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Punkte = (Punkte - ?) WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_points</span><span class="p">,</span> <span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>   <span class="c1"># Update &quot;EverTable&quot; Punkte SP2</span>
	
	<span class="n">RS1db</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">RS1db</span> <span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
	<span class="n">RS2db</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">RS2db</span> <span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
		
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Bewertung=? WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">RS1db</span><span class="p">,</span><span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>     <span class="c1"># Update &quot;EverTable&quot; Bewertung SP1</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE EverTable Set Bewertung=? WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">RS2db</span><span class="p">,</span><span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>     <span class="c1"># Update &quot;EverTable&quot; Bewertung SP2</span>
	

	<span class="c1"># Start Update der DayTable:</span>
	<span class="k">if</span> <span class="n">win</span> <span class="o">==</span> <span class="n">player1_name</span><span class="p">:</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE DayTable Set Siege = Siege - 1 WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>                  <span class="c1"># Update &quot;EverTable&quot; Siege SP1</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE DayTable Set Niederlagen = Niederlagen - 1 WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>      <span class="c1"># Update &quot;EverTable&quot; Niederlagen SP2</span>
	<span class="k">if</span> <span class="n">win</span> <span class="o">==</span> <span class="n">player2_name</span><span class="p">:</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE DayTable Set Niederlagen = Niederlagen - 1 WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>      <span class="c1"># Update &quot;EverTable&quot; Niederlagen SP1</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE DayTable Set Siege = Siege - 1 WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>                  <span class="c1"># Update &quot;EverTable&quot; Siege SP2</span>
	<span class="k">if</span> <span class="n">win</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE DayTable Set Unentschieden = Unentschieden - 1 WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>  <span class="c1"># Update &quot;EverTable&quot; Unentschieden SP1</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE DayTable Set Unentschieden = Unentschieden - 1 WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>  <span class="c1"># Update &quot;EverTable&quot; Unentschieden SP2</span>
	
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE DayTable Set Tore = Tore - ? WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_goals</span><span class="p">,</span> <span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>          <span class="c1"># Update &quot;EverTable&quot; Tore SP1</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE DayTable Set Tore = Tore - ? WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_goals</span><span class="p">,</span> <span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>          <span class="c1"># Update &quot;EverTable&quot; Tore SP2</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE DayTable Set Gegentore = Gegentore - ? WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_goals</span><span class="p">,</span> <span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>    <span class="c1"># Update &quot;EverTable&quot; Gegentore SP1</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE DayTable Set Gegentore = Gegentore - ? WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_goals</span><span class="p">,</span> <span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>    <span class="c1"># Update &quot;EverTable&quot; Gegentore SP2</span>
	
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE DayTable Set Tordifferenz = Tordifferenz - ? + ? WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_goals</span><span class="p">,</span> <span class="n">player2_goals</span><span class="p">,</span> <span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>   <span class="c1"># Update &quot;EverTable&quot; Tordifferenz SP1</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE DayTable Set Tordifferenz = Tordifferenz - ? + ? WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_goals</span><span class="p">,</span> <span class="n">player1_goals</span><span class="p">,</span> <span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>   <span class="c1"># Update &quot;EverTable&quot; Tordifferenz SP2</span>
	
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE DayTable Set Spielanzahl = Spielanzahl - 1 WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>           <span class="c1"># Update &quot;EverTable&quot; Spielanzahl SP1</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE DayTable Set Spielanzahl = Spielanzahl - 1 WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>           <span class="c1"># Update &quot;EverTable&quot; Spielanzahl SP2</span>
	
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE DayTable Set Punkte = (Punkte - ?) WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player1_points</span><span class="p">,</span> <span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>   <span class="c1"># Update &quot;EverTable&quot; Punkte SP1</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE DayTable Set Punkte = (Punkte - ?) WHERE Spieler=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">player2_points</span><span class="p">,</span> <span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>   <span class="c1"># Update &quot;EverTable&quot; Punkte SP2</span>
	
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;DELETE FROM `Games` WHERE `rowid` = ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">rowid</span><span class="p">,</span> <span class="p">))</span>
	
	<span class="n">setdelete</span> <span class="o">=</span> <span class="mi">1</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;UPDATE &#39;Settings&#39; SET Setgamedelete = ?&quot;</span><span class="p">,(</span><span class="n">setdelete</span><span class="p">,</span> <span class="p">))</span>

	<span class="n">con</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
	<span class="n">con</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
		
	<span class="n">messagecode</span> <span class="o">=</span> <span class="s2">&quot;71&quot;</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">messagecode</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>HTML Header der WEBGUI</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="c1"># -*- coding: UTF-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Header HTML Seite und Linkliste</span>
<span class="sd">&quot;&quot;&quot;</span>	
<span class="n">__author__</span> <span class="o">=</span> <span class="s2">&quot;Oliver Bleeker&quot;</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s2">&quot;1.0.1&quot;</span>
<span class="n">__status__</span> <span class="o">=</span> <span class="s2">&quot;Ready&quot;</span>


<span class="c1"># Laden der Verwendeten Bibliotheken</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">cgi</span>

<span class="c1"># Beginn HTML Ausgabe</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;!DOCTYPE HTML PUBLIC&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;html&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;head&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;title&gt;TOP&lt;/title&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=iso-8859-1&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/head&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;style.css&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;div id=&quot;top&quot;&gt;&quot;&quot;&quot;</span>
<span class="c1"># Anzeige Überschrift</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;div id=&quot;topinfo&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;body&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;a href=&quot;/Kicker/cgi-bin/main_home.py&quot; target=&quot;mainFrame&quot;&gt;Hochschule Bremen Kicker Spieledatenbank&lt;/a&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/body&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;/div&gt;&quot;&quot;&quot;</span>
<span class="c1"># Anzeige der Navigaltionsleiste für die Unterseiten</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;div id=&quot;navi&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;a href=&quot;/Kicker/cgi-bin/main_settings.py&quot; target=&quot;mainFrame&quot;&gt;Einstellungen&lt;/a&gt; | &quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;a href=&quot;/Kicker/cgi-bin/main_games.py&quot; target=&quot;mainFrame&quot;&gt;Alle Spiele&lt;/a&gt; | &quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;a href=&quot;/Kicker/cgi-bin/main_compare.py&quot; target=&quot;mainFrame&quot;&gt;Spielervergleich&lt;/a&gt; | &quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;a href=&quot;/Kicker/cgi-bin/main_ever_table.py&quot; target=&quot;mainFrame&quot;&gt;Ewige Tabelle&lt;/a&gt; | &quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;a href=&quot;/Kicker/cgi-bin/main_gameday.py&quot; target=&quot;mainFrame&quot;&gt;Spieltag&lt;/a&gt;&lt;/font&gt; &quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;/div&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/body&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/div&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/html&gt;&quot;&quot;&quot;</span>
<span class="c1"># Ende HTML Ausgabe</span>
</pre></div>
</div>
<ul class="simple">
<li><p>HTML Main Seite</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="c1"># -*- coding: UTF-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Datei: 			Main Home</span>
<span class="sd">Autor:			Oliver Bleeker</span>
<span class="sd">Funktion:		Anzeige des Posters als PDF Datei</span>
<span class="sd">Abhängigkeit:</span>
<span class="sd">Beschreibung:	Anzeige einer PDF Datei mit dem Projektposter</span>
<span class="sd">&quot;&quot;&quot;</span>	

<span class="c1"># Laden der Verwendeten Bibliotheken</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">cgi</span>

<span class="c1"># Beginn HTML Ausgabe</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;!DOCTYPE HTML PUBLIC&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;html&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;head&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;title&gt;Aktuell&lt;/title&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=iso-8859-1&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/head&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;style.css&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;body&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;div id=&quot;main&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;img src=&quot;images/Poster JPG.png&quot; alt=&quot;Poster&quot;&gt;&quot;&quot;&quot;</span>
<span class="c1">#print &quot;&quot;&quot;&lt;iframe frameborder=&quot;0&quot; src=&quot;images/Poster_Projekttisch.pdf&quot; width=&quot;100%&quot; height=&quot;700&quot;&gt;&lt;/iframe&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/div&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/front&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/font&gt; &quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/body&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/html&gt;&quot;</span>
<span class="c1"># Ende HTML Ausgabe</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Einstellungen an der HTML-Seite vornehmen</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="c1"># -*- coding: UTF-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Es können Spieler hinzugefügt oder gelöscht werden. Zudem ist es möglich den Spieltag zu ändern wenn</span>
<span class="sd">aktuell kein Spiel läuft. Wird aktuell ein Spiel ausgeführt so kann der Punktestand hier korrigiert</span>
<span class="sd">werden. Alle eingebebnen Werte werden in dieser Datei abgefragt und an die Funktionsdatei weitergeben wo sie verarbeitet werden.</span>
<span class="sd">&quot;&quot;&quot;</span>	
<span class="n">__author__</span> <span class="o">=</span> <span class="s2">&quot;Oliver Bleeker&quot;</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s2">&quot;1.0.1&quot;</span>
<span class="n">__status__</span> <span class="o">=</span> <span class="s2">&quot;Ready&quot;</span>

<span class="c1"># Laden der Verwendeten Bibliotheken</span>
<span class="kn">import</span> <span class="nn">sqlite3</span> <span class="k">as</span> <span class="nn">sqlite</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">cgi</span>
<span class="kn">import</span> <span class="nn">function_settings</span> <span class="k">as</span> <span class="nn">function_settings</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="c1"># Globale Variablen Definieren</span>
<span class="n">con</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;Stats.db&quot;</span><span class="p">)</span>
<span class="n">cur</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="n">tag</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">.%m.%Y&quot;</span><span class="p">)</span>
<span class="n">datum</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">.%m.%Y&quot;</span><span class="p">)</span>	
<span class="n">messagecode</span> <span class="o">=</span> <span class="mi">100</span>


<span class="c1"># Alle Zeilen der Spalte Players auslesen	</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Name FROM Players&quot;</span><span class="p">)</span>
<span class="n">players</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="n">playerlist</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="n">players</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">sub</span><span class="p">]</span>  <span class="c1"># Convert to list from tuple</span>

<span class="c1"># gameplace aus Settings holen</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT Spielort FROM Settings&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">gameplacedb</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">:</span>
    <span class="n">gameplace</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">%</span> <span class="n">gameplacedb</span>		

<span class="c1"># Spieltag aus Settings holen</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT (Spieltag) FROM Settings&quot;</span><span class="p">)</span>
<span class="n">gameday</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">gameday</span><span class="p">:</span>
	<span class="n">gameday</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
	<span class="k">if</span> <span class="n">gameday</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
		<span class="n">gameday</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="n">gameday</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>

<span class="c1"># Maximalen Spieltag aus Games holen</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT MAX(Spieltag) FROM Games&quot;</span><span class="p">)</span>
<span class="n">maxSpieltag</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">maxSpieltag</span><span class="p">:</span>
	<span class="n">maxSpieltag</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
	<span class="k">if</span> <span class="n">maxSpieltag</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
		<span class="n">maxSpieltag</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="n">maxSpieltag</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>		
<span class="n">neuSpieltag</span> <span class="o">=</span> <span class="n">maxSpieltag</span> <span class="o">+</span> <span class="mi">1</span>

<span class="c1"># Spielernamen aus aktuellem Spiel laden</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Spieler FROM &#39;GamePlayers&#39; WHERE Nummer = 1&quot;</span> <span class="p">)</span>
<span class="k">for</span> <span class="n">playerdb</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">:</span>
    <span class="n">NameS1</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">%</span> <span class="n">playerdb</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Spieler FROM &#39;GamePlayers&#39; WHERE Nummer = 2&quot;</span> <span class="p">)</span>
<span class="k">for</span> <span class="n">playerdb</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">:</span>
    <span class="n">NameS2</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">%</span> <span class="n">playerdb</span>
	
<span class="c1"># Spielertore aus aktuellem Spiel laden</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Tore FROM &#39;GamePlayers&#39; WHERE Nummer = 1&quot;</span> <span class="p">)</span>
<span class="k">for</span> <span class="n">goalsdb</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">:</span>
    <span class="n">ToreS1</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">goalsdb</span><span class="p">)))</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Tore FROM &#39;GamePlayers&#39; WHERE Nummer = 2&quot;</span> <span class="p">)</span>
<span class="k">for</span> <span class="n">goalsdb</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">:</span>
    <span class="n">ToreS2</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">goalsdb</span><span class="p">)))</span>

<span class="c1">#Datenbankverbindung schließen</span>
<span class="n">con</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>


<span class="c1"># Eingabe von HTML Seite abfragen. In diesem Fall aus eigener Datei	</span>
<span class="n">form</span> <span class="o">=</span> <span class="n">cgi</span><span class="o">.</span><span class="n">FieldStorage</span><span class="p">()</span>
<span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">getvalue</span><span class="p">(</span><span class="s2">&quot;newplayer&quot;</span><span class="p">):</span>
	<span class="n">playername</span><span class="o">=</span><span class="n">form</span><span class="o">.</span><span class="n">getvalue</span><span class="p">(</span><span class="s1">&#39;newplayer&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
	<span class="n">playername</span><span class="o">=</span><span class="s2">&quot;Neuer Spieler&quot;</span>   <span class="c1"># Wenn keine Eingabe dann &quot;Neuer Spieler&quot; um Fehler auszulösen</span>

<span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">getvalue</span><span class="p">(</span><span class="s2">&quot;delplayer&quot;</span><span class="p">):</span>	
	<span class="n">delplayername</span><span class="o">=</span><span class="n">form</span><span class="o">.</span><span class="n">getvalue</span><span class="p">(</span><span class="s1">&#39;delplayer&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
	<span class="n">delplayername</span> <span class="o">=</span> <span class="s2">&quot;Spieler Entfernen&quot;</span>

<span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">getvalue</span><span class="p">(</span><span class="s2">&quot;gameplaceinput&quot;</span><span class="p">):</span>
	<span class="n">newgameplace</span><span class="o">=</span><span class="n">form</span><span class="o">.</span><span class="n">getvalue</span><span class="p">(</span><span class="s1">&#39;gameplaceinput&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
	<span class="n">newgameplace</span> <span class="o">=</span> <span class="s2">&quot;unchanged&quot;</span>

<span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">getvalue</span><span class="p">(</span><span class="s2">&quot;gamedayinput&quot;</span><span class="p">):</span>
	<span class="n">newgameday</span><span class="o">=</span><span class="n">form</span><span class="o">.</span><span class="n">getvalue</span><span class="p">(</span><span class="s1">&#39;gamedayinput&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
	<span class="n">newgameday</span> <span class="o">=</span> <span class="s2">&quot;unchanged&quot;</span>

<span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">getvalue</span><span class="p">(</span><span class="s2">&quot;player1_goals_input&quot;</span><span class="p">):</span>
	<span class="n">player1_goals</span><span class="o">=</span><span class="n">form</span><span class="o">.</span><span class="n">getvalue</span><span class="p">(</span><span class="s1">&#39;player1_goals_input&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
	<span class="n">player1_goals</span> <span class="o">=</span> <span class="s2">&quot;unchanged&quot;</span>

<span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">getvalue</span><span class="p">(</span><span class="s2">&quot;player2_goals_input&quot;</span><span class="p">):</span>
	<span class="n">player2_goals</span><span class="o">=</span><span class="n">form</span><span class="o">.</span><span class="n">getvalue</span><span class="p">(</span><span class="s1">&#39;player2_goals_input&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
	<span class="n">player2_goals</span> <span class="o">=</span> <span class="s2">&quot;unchanged&quot;</span>
	
<span class="c1">#player2_goals = 3</span>

<span class="k">if</span> <span class="n">playername</span> <span class="o">!=</span> <span class="s2">&quot;Neuer Spieler&quot;</span><span class="p">:</span>
	<span class="n">messagecode</span> <span class="o">=</span> <span class="n">function_settings</span><span class="o">.</span> <span class="n">addplayer</span><span class="p">(</span><span class="n">playername</span><span class="p">)</span>
<span class="k">if</span> <span class="n">delplayername</span> <span class="o">!=</span> <span class="s2">&quot;Spieler Entfernen&quot;</span><span class="p">:</span>
	<span class="n">messagecode</span> <span class="o">=</span> <span class="n">function_settings</span><span class="o">.</span> <span class="n">delplayer</span><span class="p">(</span><span class="n">delplayername</span><span class="p">)</span>
<span class="k">if</span> <span class="n">newgameplace</span> <span class="o">!=</span> <span class="s2">&quot;unchanged&quot;</span><span class="p">:</span>
	<span class="n">messagecode</span> <span class="o">=</span> <span class="n">function_settings</span><span class="o">.</span> <span class="n">gameplace</span><span class="p">(</span><span class="n">newgameplace</span><span class="p">)</span>
<span class="k">if</span> <span class="n">newgameday</span> <span class="o">!=</span> <span class="s2">&quot;unchanged&quot;</span><span class="p">:</span>
	<span class="n">messagecode</span> <span class="o">=</span> <span class="n">function_settings</span><span class="o">.</span> <span class="n">gameday</span><span class="p">(</span><span class="n">newgameday</span><span class="p">)</span>
<span class="k">if</span> <span class="n">player1_goals</span> <span class="o">!=</span> <span class="s2">&quot;unchanged&quot;</span> <span class="ow">or</span> <span class="n">player2_goals</span> <span class="o">!=</span> <span class="s2">&quot;unchanged&quot;</span><span class="p">:</span>
	<span class="n">messagecode</span> <span class="o">=</span> <span class="n">function_settings</span><span class="o">.</span> <span class="n">goalcount</span><span class="p">(</span><span class="n">player1_goals</span><span class="p">,</span><span class="n">player2_goals</span><span class="p">)</span>	

	
<span class="c1"># Beginn der HTML Ausgabe</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;!DOCTYPE HTML PUBLIC&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;html&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;head&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;title&gt;Aktuell&lt;/title&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=iso-8859-1&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/head&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;style.css&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;div id=&quot;main&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;div id=&quot;center&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;h1&gt;Einstellungen&lt;/h1&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;h2&gt;Spieler Bearbeiten&lt;/h2&gt;&quot;&quot;&quot;</span>
<span class="k">if</span> <span class="n">messagecode</span> <span class="o">==</span> <span class="s2">&quot;10&quot;</span> <span class="ow">and</span> <span class="n">playername</span> <span class="o">!=</span> <span class="s2">&quot;Neuer Spieler&quot;</span><span class="p">:</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;div id=&quot;message-box-fail&quot;&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;Spieler konnte nicht hinzugef&amp;uuml;gt werden!&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;/div&gt;&quot;</span>

<span class="k">if</span> <span class="n">messagecode</span> <span class="o">==</span> <span class="s2">&quot;11&quot;</span><span class="p">:</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;div id=&quot;message-box-done&quot;&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;Spieler wurde erfolgreich hinzugef&amp;uuml;gt&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;/div&gt;&quot;</span>

<span class="k">if</span> <span class="n">messagecode</span> <span class="o">==</span> <span class="s2">&quot;21&quot;</span><span class="p">:</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;div id=&quot;message-box-done&quot;&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;Spieler wurde erfolgreich gel&amp;ouml;scht&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;/div&gt;&quot;</span>

<span class="k">if</span> <span class="n">messagecode</span> <span class="o">!=</span> <span class="s2">&quot;10&quot;</span> <span class="ow">and</span> <span class="n">messagecode</span> <span class="o">!=</span> <span class="s2">&quot;11&quot;</span> <span class="ow">and</span> <span class="n">messagecode</span> <span class="o">!=</span> <span class="s2">&quot;21&quot;</span><span class="p">:</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;  &lt;form method=&quot;post&quot; action=&quot;main_settings.py&quot; target=&quot;_self&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;   &lt;input type=&quot;text&quot; name=&quot;newplayer&quot; value=&quot;Neuer Spieler&quot; style=&quot;height: 25px; width: 200px;&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;  &lt;select name=&quot;delplayer&quot; style=&quot;height: 25px; width: 200px;&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;  &lt;option selected value=&quot;Spieler Entfernen&quot;&gt;Spieler l&amp;ouml;schen&lt;/option&gt;&quot;&quot;&quot;</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">playerlist</span><span class="p">:</span>
	<span class="nb">print</span> <span class="s1">&#39;&lt;option value=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/option&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;  &lt;/select&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;   &lt;form name=&quot;form2&quot; method=&quot;post&quot; action=&quot;&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;   &lt;input style=&quot;height: 25px; width: 100px;&quot; type=&quot;submit&quot; name=&quot;submit&quot; value=&quot;Speichern&quot;/&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;  &lt;/p&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/form&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>

<span class="k">if</span> <span class="n">ToreS1</span> <span class="o">==</span> <span class="s2">&quot;99&quot;</span> <span class="ow">and</span> <span class="n">ToreS2</span> <span class="o">==</span> <span class="s2">&quot;99&quot;</span><span class="p">:</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;h2&gt;Spieltag Bearbeiten&lt;/h2&gt;&quot;&quot;&quot;</span>
	<span class="k">if</span> <span class="n">messagecode</span> <span class="o">==</span> <span class="s2">&quot;40&quot;</span><span class="p">:</span>
		<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;div id=&quot;message-box-fail&quot;&gt;&quot;&quot;&quot;</span>
		<span class="nb">print</span> <span class="s2">&quot;Spieltag wurde nicht ge&amp;auml;dert!&quot;</span>
		<span class="nb">print</span> <span class="s2">&quot;&lt;/div&gt;&quot;</span>
	<span class="k">if</span> <span class="n">messagecode</span> <span class="o">==</span> <span class="s2">&quot;41&quot;</span><span class="p">:</span>
		<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;div id=&quot;message-box-done&quot;&gt;&quot;&quot;&quot;</span>
		<span class="nb">print</span> <span class="s2">&quot;Spieltag wurde erfolgreich ge&amp;auml;dert!&quot;</span>
		<span class="nb">print</span> <span class="s2">&quot;&lt;/div&gt;&quot;</span>
	<span class="k">if</span> <span class="n">messagecode</span> <span class="o">!=</span> <span class="s2">&quot;40&quot;</span> <span class="ow">and</span> <span class="n">messagecode</span> <span class="o">!=</span> <span class="s2">&quot;41&quot;</span><span class="p">:</span>
		<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;  &lt;form method=&quot;post&quot; action=&quot;main_settings.py&quot; target=&quot;_self&quot;&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;  &lt;p&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;  Spieltag: &quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;   &lt;input type=&quot;text&quot; size=&quot;4&quot; maxlength=&quot;3&quot; name=&quot;gamedayinput&quot; value=&quot;&quot;&quot;</span><span class="p">,</span><span class="n">neuSpieltag</span><span class="p">,</span><span class="s2">&quot;&quot;&quot;&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;   &lt;form name=&quot;form2&quot; method=&quot;post&quot; action=&quot;&quot;&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;   &lt;input style=&quot;height: 25px; width: 100px;&quot; type=&quot;submit&quot; name=&quot;submit&quot; value=&quot;Speichern&quot;/&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;  &lt;/p&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;/form&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>

<span class="k">if</span> <span class="n">messagecode</span> <span class="o">==</span> <span class="s2">&quot;40&quot;</span><span class="p">:</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;div id=&quot;message-box-fail&quot;&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;Spieltag wurde nicht ge&amp;auml;dert!&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;/div&gt;&quot;</span>

<span class="k">if</span> <span class="n">messagecode</span> <span class="o">==</span> <span class="s2">&quot;61&quot;</span><span class="p">:</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;div id=&quot;message-box-done&quot;&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;Spielstand wurde erfolgreich ge&amp;auml;dert!&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;/div&gt;&quot;</span>
<span class="k">if</span> <span class="n">messagecode</span> <span class="o">!=</span> <span class="s2">&quot;61&quot;</span><span class="p">:</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>

<span class="k">if</span> <span class="n">ToreS1</span> <span class="o">!=</span> <span class="s2">&quot;99&quot;</span> <span class="ow">and</span> <span class="n">ToreS2</span> <span class="o">!=</span> <span class="s2">&quot;99&quot;</span><span class="p">:</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;h2&gt;Spielstand Korregieren&lt;/h2&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;  &lt;form method=&quot;post&quot; action=&quot;main_settings.py&quot; target=&quot;_self&quot;&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;  &lt;p&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;Spieler Gr&amp;uuml;n:&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;  &lt;/select&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;select style=&quot;height: 25px; width: 40px;&quot; name=&quot;player1_goals_input&quot;&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot; 	 &lt;option selected value=&quot;&quot;&quot;</span><span class="p">,</span><span class="n">ToreS1</span><span class="p">,</span><span class="s2">&quot;&quot;&quot;&gt;&quot;&quot;&quot;</span><span class="p">,</span><span class="n">ToreS1</span><span class="p">,</span><span class="s2">&quot;&quot;&quot;&lt;/option&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;      &lt;option value=&quot;0&quot;&gt;0&lt;/option&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;      &lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;      &lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;      &lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;      &lt;option value=&quot;4&quot;&gt;4&lt;/option&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;      &lt;option value=&quot;5&quot;&gt;5&lt;/option&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;      &lt;option value=&quot;6&quot;&gt;6&lt;/option&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;   &lt;/select&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;Spieler Wei&amp;szlig;:&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;   &lt;select style=&quot;height: 25px; width: 40px;&quot; name=&quot;player2_goals_input&quot;&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot; 	&lt;option selected value=&quot;&quot;&quot;</span><span class="p">,</span><span class="n">ToreS2</span><span class="p">,</span><span class="s2">&quot;&quot;&quot;&gt;&quot;&quot;&quot;</span><span class="p">,</span><span class="n">ToreS2</span><span class="p">,</span><span class="s2">&quot;&quot;&quot;&lt;/option&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;      &lt;option value=&quot;0&quot;&gt;0&lt;/option&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;      &lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;      &lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;      &lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;      &lt;option value=&quot;4&quot;&gt;4&lt;/option&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;      &lt;option value=&quot;5&quot;&gt;5&lt;/option&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;      &lt;option value=&quot;6&quot;&gt;6&lt;/option&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;   &lt;/select&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;   &lt;form name=&quot;form2&quot; method=&quot;post&quot; action=&quot;&quot;&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;   &lt;input style=&quot;height: 25px; width: 100px;&quot; type=&quot;submit&quot; name=&quot;submit&quot; value=&quot;Speichern&quot;/&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;  &lt;/p&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;/form&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/div&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/div&gt;&quot;</span>
<span class="nb">print</span><span class="s2">&quot; &lt;/body&gt;&quot;</span>
<span class="nb">print</span><span class="s2">&quot; &lt;/html&gt;&quot;</span>
<span class="c1"># Ende HTML Ausgabe</span>

</pre></div>
</div>
<ul class="simple">
<li><p>Funktionsblock</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="c1"># -*- coding: UTF-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Einstellungen können über die HTML Seite geändert werden. Diese Änderungen werden hier in der Datenbank abgelegt.</span>
<span class="sd">&quot;&quot;&quot;</span>	
<span class="n">__author__</span> <span class="o">=</span> <span class="s2">&quot;Oliver Bleeker&quot;</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s2">&quot;1.0.1&quot;</span>
<span class="n">__status__</span> <span class="o">=</span> <span class="s2">&quot;Ready&quot;</span>

<span class="c1"># Laden der Verwendeten Bibliotheken</span>
<span class="kn">import</span> <span class="nn">sqlite3</span> <span class="k">as</span> <span class="nn">sqlite</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">cgi</span>

<span class="c1"># Definieren von Globelen Variablen </span>
<span class="n">con</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;Stats.db&quot;</span><span class="p">)</span>
<span class="n">cur</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;create table if not exists &quot;Players&quot; (Datum TEXT,Name TEXT,Nummer INTEGER,Bewertung FLOAT,Bewertung_Alt FLOAT)&#39;&#39;&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">addplayer</span><span class="p">(</span><span class="n">playername</span><span class="p">):</span>	
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Funktion: Spieler hinzufügen wenn ein Name eingegeben worden ist und dieser noch nicht vorhanden ist&quot;&quot;&quot;</span>
	<span class="n">playerpoints</span> <span class="o">=</span> <span class="s2">&quot;2000&quot;</span>
	<span class="n">playerpointsold</span> <span class="o">=</span> <span class="s2">&quot;2000&quot;</span>
	<span class="n">playerpointsgameday</span> <span class="o">=</span> <span class="s2">&quot;2000&quot;</span>	
	<span class="n">datum</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">.%m.%Y&quot;</span><span class="p">)</span>	
	<span class="k">if</span> <span class="n">playername</span> <span class="o">!=</span> <span class="s2">&quot;Neuer Spieler&quot;</span><span class="p">:</span>
		<span class="n">knownnumberdb</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="n">cur</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Nummer FROM Players WHERE Name=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">playername</span><span class="p">,</span> <span class="p">))</span>
		<span class="k">for</span> <span class="n">knownplayerdb</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">:</span>
			<span class="n">knownnumberdb</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">%</span> <span class="n">knownplayerdb</span> 
		<span class="n">knownplayernumber</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">knownnumberdb</span><span class="p">)</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="n">knownplayernumber</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="k">if</span> <span class="n">playername</span> <span class="o">!=</span> <span class="s2">&quot;Neuer Spieler&quot;</span> <span class="ow">and</span> <span class="n">knownplayernumber</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Nummer FROM `Players`&quot;</span><span class="p">)</span>
		<span class="k">for</span> <span class="n">playerdb</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">:</span>
			<span class="n">numberdb</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">%</span> <span class="n">playerdb</span> 
		<span class="n">playernumber</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">numberdb</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span>
		<span class="n">playernumberdb</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">%</span> <span class="n">playernumber</span>
		<span class="n">cur</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;INSERT INTO Players VALUES (?,?,?,?,?,?);&quot;</span><span class="p">,(</span><span class="n">datum</span><span class="p">,</span><span class="n">playername</span><span class="p">,</span><span class="n">playernumberdb</span><span class="p">,</span><span class="n">playerpoints</span><span class="p">,</span><span class="n">playerpointsold</span><span class="p">,</span><span class="n">playerpointsgameday</span><span class="p">))</span>
		<span class="n">con</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
		<span class="n">messagecode</span> <span class="o">=</span> <span class="s2">&quot;11&quot;</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="n">messagecode</span> <span class="o">=</span> <span class="s2">&quot;10&quot;</span>	
	<span class="k">return</span> <span class="p">(</span><span class="n">messagecode</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">delplayer</span><span class="p">(</span><span class="n">delplayername</span><span class="p">):</span>	
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Funktion: Spieler Löschen&quot;&quot;&quot;</span>
	<span class="k">if</span> <span class="n">delplayername</span> <span class="o">!=</span> <span class="s2">&quot;Spieler Entfernen&quot;</span><span class="p">:</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE FROM Players WHERE Name =?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">delplayername</span><span class="p">,</span> <span class="p">))</span>
		<span class="n">con</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
		<span class="n">messagecode</span> <span class="o">=</span> <span class="s2">&quot;21&quot;</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="n">messagecode</span> <span class="o">=</span> <span class="s2">&quot;20&quot;</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">messagecode</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">gameplace</span><span class="p">(</span><span class="n">newgameplace</span><span class="p">):</span>	
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Funktion: Spielort ändern&quot;&quot;&quot;</span>
	<span class="c1"># gameplace aus Settings holen</span>
	<span class="n">cur</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT Spielort FROM Settings&quot;</span><span class="p">)</span>
	<span class="k">for</span> <span class="n">gameplacedb</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">:</span>
		<span class="n">gameplace</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">%</span> <span class="n">gameplacedb</span>
	<span class="k">if</span> <span class="n">newgameplace</span> <span class="o">!=</span> <span class="n">gameplace</span><span class="p">:</span>
		<span class="n">cur</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;UPDATE &#39;Settings&#39; SET Spielort = ?&quot;</span><span class="p">,(</span><span class="n">newgameplace</span><span class="p">,</span> <span class="p">))</span>
		<span class="n">con</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
		<span class="n">messagecode</span> <span class="o">=</span> <span class="s2">&quot;31&quot;</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="n">messagecode</span> <span class="o">=</span> <span class="s2">&quot;30&quot;</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">messagecode</span><span class="p">)</span>
	
<span class="k">def</span> <span class="nf">gameday</span><span class="p">(</span><span class="n">newgameday</span><span class="p">):</span>	
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Funktion: Spieltag ändern&quot;&quot;&quot;</span>
	<span class="c1"># gameplace aus Settings holen</span>
	<span class="n">cur</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT (Spieltag) FROM Settings&quot;</span><span class="p">)</span>
	<span class="n">gameday</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">gameday</span><span class="p">:</span>
		<span class="n">gameday</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		<span class="k">if</span> <span class="n">gameday</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
			<span class="n">gameday</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">gameday</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
	<span class="k">if</span> <span class="n">newgameday</span> <span class="o">!=</span> <span class="s2">&quot;unchanged&quot;</span> <span class="ow">and</span> <span class="n">newgameday</span> <span class="o">!=</span> <span class="n">gameday</span><span class="p">:</span>
		<span class="n">cur</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
		<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;UPDATE &#39;Settings&#39; SET Spieltag = ?&quot;</span><span class="p">,(</span><span class="n">newgameday</span><span class="p">,</span> <span class="p">))</span>
		<span class="n">con</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
		<span class="n">messagecode</span> <span class="o">=</span> <span class="s2">&quot;41&quot;</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="n">messagecode</span> <span class="o">=</span> <span class="s2">&quot;40&quot;</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">messagecode</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">goalcount</span><span class="p">(</span><span class="n">player1_goals</span><span class="p">,</span><span class="n">player2_goals</span><span class="p">):</span>	
	<span class="n">cur</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE GamePlayers Set Tore = ? WHERE Nummer=1&quot;</span><span class="p">,(</span><span class="n">player1_goals</span><span class="p">,</span> <span class="p">))</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE GamePlayers Set Tore = ? WHERE Nummer=2&quot;</span><span class="p">,(</span><span class="n">player2_goals</span><span class="p">,</span> <span class="p">))</span>

	<span class="n">con</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
	<span class="n">messagecode</span> <span class="o">=</span> <span class="s2">&quot;61&quot;</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">messagecode</span><span class="p">)</span>	
	
</pre></div>
</div>
<ul class="simple">
<li><p>Alle Spiele Anzeigen</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="c1"># -*- coding: UTF-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Eigenständige HTML Ausgabe der Ewigen Tabelle. Die Tabelle wird hierfür direkt aus der Datenbank</span>
<span class="sd">geladen und ausschließlich je nach Sortierungswunsch sortiert.</span>
<span class="sd">&quot;&quot;&quot;</span>	
<span class="n">__author__</span> <span class="o">=</span> <span class="s2">&quot;Oliver Bleeker&quot;</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s2">&quot;1.0.1&quot;</span>
<span class="n">__status__</span> <span class="o">=</span> <span class="s2">&quot;Ready&quot;</span>

<span class="c1"># Laden der Verwendeten Bibliotheken</span>
<span class="kn">import</span> <span class="nn">sqlite3</span> <span class="k">as</span> <span class="nn">sqlite</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">cgi</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="c1"># Globale Variablen Definieren</span>
<span class="n">con</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;Stats.db&quot;</span><span class="p">)</span>
<span class="n">cur</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="n">datum</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">.%m.%Y&quot;</span><span class="p">)</span>	
<span class="n">tag</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">.%m.%Y&quot;</span><span class="p">)</span>
<span class="n">form</span><span class="o">=</span><span class="n">cgi</span><span class="o">.</span><span class="n">FieldStorage</span><span class="p">()</span>

<span class="c1"># Auslesen des Aktuellen Spieltages aus der Datenbank</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT MAX(Spieltag) FROM Games&quot;</span><span class="p">)</span>
<span class="n">maxSpieltag</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">maxSpieltag</span><span class="p">:</span>
	<span class="n">maxSpieltag</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
	<span class="k">if</span> <span class="n">maxSpieltag</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
		<span class="n">maxSpieltag</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="n">maxSpieltag</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>	
	
<span class="c1"># Abfragen aller Spiele aus der Datenbank		</span>
<span class="n">cur</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Datum FROM Games&quot;</span><span class="p">)</span>
<span class="n">datumdb</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Spieltag FROM Games&quot;</span><span class="p">)</span>
<span class="n">gamedaydb</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Spieler1 FROM Games&quot;</span><span class="p">)</span>
<span class="n">player1namedb</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Spieler2 FROM Games&quot;</span><span class="p">)</span>
<span class="n">player2namedb</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT ToreSpieler1 FROM Games&quot;</span><span class="p">)</span>
<span class="n">player1goalsdb</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT ToreSpieler2 FROM Games&quot;</span><span class="p">)</span>
<span class="n">player2goalsdb</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT TrendSpieler1 FROM Games&quot;</span><span class="p">)</span>
<span class="n">player1trend</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT TrendSpieler2 FROM Games&quot;</span><span class="p">)</span>
<span class="n">player2trend</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>

<span class="c1"># Zählen aller Spiele um diese auf der seite anzuzeigen</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Count(*) FROM `Games`&quot;</span><span class="p">)</span>
<span class="n">countgamesdb</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">countgamesdb</span><span class="p">:</span>
	<span class="n">countgames</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
	<span class="k">if</span> <span class="n">countgames</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
		<span class="n">countgames</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="n">countgames</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>

<span class="c1"># Beginn der HTML Ausgabe</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;!DOCTYPE HTML PUBLIC&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;html&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;head&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;title&gt;Aktuell&lt;/title&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=iso-8859-1&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/head&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;style.css&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;div id=&quot;main&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;div id=&quot;center&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;h1&gt;Alle Spiele&lt;/h1&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;Anzahl der Spiele: &quot;&quot;&quot;</span><span class="p">,</span><span class="n">countgames</span><span class="p">,</span><span class="s2">&quot;&quot;&quot;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;table id=&quot;table&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;  &lt;tr&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;th ALIGN=&quot;CENTER&quot; width=&quot;10%&quot;&gt;Spieltag&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;th ALIGN=&quot;CENTER&quot; width=&quot;10%&quot;&gt;Datum&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;th ALIGN=&quot;CENTER&quot; width=&quot;20%&quot;&gt;Spieler 1&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;th ALIGN=&quot;CENTER&quot; width=&quot;5%&quot;&gt;Trend&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;th ALIGN=&quot;CENTER&quot; width=&quot;5%&quot;&gt;Tore&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;th ALIGN=&quot;CENTER&quot; width=&quot;5%&quot;&gt;Tore&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;th ALIGN=&quot;CENTER&quot; width=&quot;5%&quot;&gt;Trend&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;th ALIGN=&quot;CENTER&quot; width=&quot;20%&quot;&gt;Spieler 2&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;  &lt;/tr&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;  &lt;tr align=&quot;center&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">gamedaydb</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/td&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">datumdb</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;/td&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">player1namedb</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;   &lt;/td&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">player1trend</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/td&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">player1goalsdb</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/td&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">player2goalsdb</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/td&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">player2trend</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/td&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">player2namedb</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/td&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;  &lt;/tr&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/table&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/div&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/div&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/html&gt;&quot;</span>

<span class="n">con</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="c1"># Ende der HTML Ausgabe</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Ewige Tabelle Anzeigen</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="c1"># -*- coding: UTF-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Eigenständige HTML Ausgabe der Ewigen Tabelle. Die Tabelle wird hierfür direkt aus der Datenbank</span>
<span class="sd">geladen und ausschließlich je nach Sortierungswunsch sortiert.</span>
<span class="sd">&quot;&quot;&quot;</span>	
<span class="n">__author__</span> <span class="o">=</span> <span class="s2">&quot;Oliver Bleeker&quot;</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s2">&quot;1.0.1&quot;</span>
<span class="n">__status__</span> <span class="o">=</span> <span class="s2">&quot;Ready&quot;</span>

<span class="c1"># Laden der Verwendeten Bibliotheken</span>
<span class="kn">import</span> <span class="nn">sqlite3</span> <span class="k">as</span> <span class="nn">sqlite</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">cgi</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="c1"># Globale Variablen Definieren</span>
<span class="n">con</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;Stats.db&quot;</span><span class="p">)</span>
<span class="n">cur</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="n">datum</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">.%m.%Y&quot;</span><span class="p">)</span>	
<span class="n">tag</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">.%m.%Y&quot;</span><span class="p">)</span>
<span class="n">form</span><span class="o">=</span><span class="n">cgi</span><span class="o">.</span><span class="n">FieldStorage</span><span class="p">()</span>

<span class="c1"># Abfrage der Einstellung Sortierung der Tabelle</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT EwigeTabelleDarstellung FROM Settings&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">tabledisplaydb</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">:</span>
    <span class="n">tabledisplay</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">%</span> <span class="n">tabledisplaydb</span>

<span class="c1"># Abfrage der Tabelle sortiert nach Punkten</span>
<span class="k">if</span> <span class="n">tabledisplay</span> <span class="o">==</span> <span class="s2">&quot;Punkte&quot;</span><span class="p">:</span>	
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Spieler FROM &#39;EverTable&#39; ORDER BY Punkte DESC, Tordifferenz DESC, Tore DESC&quot;</span> <span class="p">)</span>
	<span class="n">player</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Siege FROM &#39;EverTable&#39; ORDER BY Punkte DESC, Tordifferenz DESC, Tore DESC&quot;</span><span class="p">)</span>
	<span class="n">win</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Unentschieden FROM &#39;EverTable&#39; ORDER BY Punkte DESC, Tordifferenz DESC, Tore DESC&quot;</span><span class="p">)</span>
	<span class="n">draw</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Niederlagen FROM &#39;EverTable&#39; ORDER BY Punkte DESC, Tordifferenz DESC, Tore DESC&quot;</span><span class="p">)</span>
	<span class="n">loose</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Tore FROM &#39;EverTable&#39; ORDER BY Punkte DESC, Tordifferenz DESC, Tore DESC&quot;</span><span class="p">)</span>
	<span class="n">goals</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Gegentore FROM &#39;EverTable&#39; ORDER BY Punkte DESC, Tordifferenz DESC, Tore DESC&quot;</span><span class="p">)</span>
	<span class="n">goalsagainst</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Tordifferenz FROM &#39;EverTable&#39; ORDER BY Punkte DESC, Tordifferenz DESC, Tore DESC&quot;</span><span class="p">)</span>
	<span class="n">goaldifference</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Punkte FROM &#39;EverTable&#39; ORDER BY Punkte DESC, Tordifferenz DESC, Tore DESC&quot;</span><span class="p">)</span>
	<span class="n">points</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Spielanzahl FROM &#39;EverTable&#39; ORDER BY Punkte DESC, Tordifferenz DESC, Tore DESC&quot;</span><span class="p">)</span>
	<span class="n">countgame</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Bewertung FROM &#39;EverTable&#39; ORDER BY Punkte DESC, Tordifferenz DESC, Tore DESC&quot;</span><span class="p">)</span>
	<span class="n">rate</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>

<span class="c1"># Abfrage der Tabelle sortiert nach Bewertung</span>
<span class="k">if</span> <span class="n">tabledisplay</span> <span class="o">==</span> <span class="s2">&quot;Bewertung&quot;</span><span class="p">:</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Spieler FROM &#39;EverTable&#39; ORDER BY Bewertung DESC&quot;</span> <span class="p">)</span>
	<span class="n">player</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Siege FROM &#39;EverTable&#39; ORDER BY Bewertung DESC&quot;</span><span class="p">)</span>
	<span class="n">win</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Unentschieden FROM &#39;EverTable&#39; ORDER BY Bewertung DESC&quot;</span><span class="p">)</span>
	<span class="n">draw</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Niederlagen FROM &#39;EverTable&#39; ORDER BY Bewertung DESC&quot;</span><span class="p">)</span>
	<span class="n">loose</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Tore FROM &#39;EverTable&#39; ORDER BY Bewertung DESC&quot;</span><span class="p">)</span>
	<span class="n">goals</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Gegentore FROM &#39;EverTable&#39; ORDER BY Bewertung DESC&quot;</span><span class="p">)</span>
	<span class="n">goalsagainst</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Tordifferenz FROM &#39;EverTable&#39; ORDER BY Bewertung DESC&quot;</span><span class="p">)</span>
	<span class="n">goaldifference</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Punkte FROM &#39;EverTable&#39; ORDER BY Bewertung DESC&quot;</span><span class="p">)</span>
	<span class="n">points</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Spielanzahl FROM &#39;EverTable&#39; ORDER BY Bewertung DESC&quot;</span><span class="p">)</span>
	<span class="n">countgame</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Bewertung FROM &#39;EverTable&#39; ORDER BY Bewertung DESC&quot;</span><span class="p">)</span>
	<span class="n">rate</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	
<span class="c1">#	cur.execute(&quot;SELECT Bewertung FROM &#39;Players&#39; ORDER BY Bewertung DESC&quot;)</span>
<span class="c1">#	rate_new = cur.fetchall()</span>
<span class="c1">#	cur.execute(&quot;SELECT Bewertung_Alt FROM &#39;Players&#39; ORDER BY Bewertung DESC&quot;)</span>
<span class="c1">#	rate_old = cur.fetchall()</span>
<span class="c1">#	</span>
<span class="c1">#	rate_diff = rate_new + rate_old</span>

<span class="c1">#Datenbankverbindung schließen</span>
<span class="n">con</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="c1"># Beginn der HTML Ausgabe</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;!DOCTYPE HTML PUBLIC&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;html&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;head&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;title&gt;Aktuell&lt;/title&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=iso-8859-1&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/head&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;style.css&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;div id=&quot;main&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;div id=&quot;center&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;h1&gt;Ewige Tabelle&lt;/h1&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;table id=&quot;table&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;  &lt;tr&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;th ALIGN=&quot;CENTER&quot; width=&quot;347&quot;&gt;Spieler&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;th ALIGN=&quot;CENTER&quot; width=&quot;117&quot;&gt;Spielanzahl&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;th ALIGN=&quot;CENTER&quot; width=&quot;177&quot;&gt;Siege&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;th ALIGN=&quot;CENTER&quot; width=&quot;117&quot;&gt;Remis&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;th ALIGN=&quot;CENTER&quot; width=&quot;117&quot;&gt;Niederlagen&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;th ALIGN=&quot;CENTER&quot; width=&quot;117&quot;&gt;Tore&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;th ALIGN=&quot;CENTER&quot; width=&quot;117&quot;&gt;Gegentore&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;th ALIGN=&quot;CENTER&quot; width=&quot;117&quot;&gt;Tordifferenz&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;th ALIGN=&quot;CENTER&quot; width=&quot;117&quot;&gt;Bewertung&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;th ALIGN=&quot;CENTER&quot; width=&quot;117&quot;&gt;Punkte&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;  &lt;/tr&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;  &lt;tr&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">player</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;/td&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">countgame</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/td&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">win</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;   &lt;/td&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">draw</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/td&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">loose</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/td&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">goals</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/td&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">goalsagainst</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/td&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">goaldifference</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/td&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rate</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/td&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">points</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/td&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;  &lt;/tr&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/table&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;&lt;/div&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/div&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/html&gt;&quot;</span>
<span class="c1"># Ende der HTML Ausgabe</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Spieler miteinander Vergleichen</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="c1"># -*- coding: UTF-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Um einen direkten Vergleich zwischen zwei Spielern zu erstellen, wird nach Eingabe zweier Spielernamen,</span>
<span class="sd">nach allen Spielen gesucht in denen ein direktes Duell stattgefunden hat. Diese werden dann auf einer HTML Seite </span>
<span class="sd">tabellarisch dargestellt. Das Suchen und zusammenstellen der Daten wird in der Datei function_compace.py ausgeführt.</span>
<span class="sd">&quot;&quot;&quot;</span>	
<span class="n">__author__</span> <span class="o">=</span> <span class="s2">&quot;Oliver Bleeker&quot;</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s2">&quot;1.0.1&quot;</span>
<span class="n">__status__</span> <span class="o">=</span> <span class="s2">&quot;Ready&quot;</span>

<span class="c1"># Laden der Verwendeten Bibliotheken</span>
<span class="kn">import</span> <span class="nn">sqlite3</span> <span class="k">as</span> <span class="nn">sqlite</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">cgi</span>
<span class="kn">import</span> <span class="nn">function_compare</span> <span class="k">as</span> <span class="nn">function</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="c1"># Globale Variablen Definieren</span>
<span class="n">con</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;Stats.db&quot;</span><span class="p">)</span>
<span class="n">cur</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="n">datum</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">.%m.%Y&quot;</span><span class="p">)</span>	
<span class="n">tag</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">.%m.%Y&quot;</span><span class="p">)</span>
<span class="n">Fehler</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">text</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span>

<span class="c1"># Alle Zeilen der Spalte Players auslesen	</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Name FROM Players&quot;</span><span class="p">)</span>
<span class="n">players</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="n">playerlist</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="n">players</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">sub</span><span class="p">]</span>  <span class="c1"># Convert to list from tuple</span>

<span class="c1">#Datenbankverbindung schließen</span>
<span class="n">con</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="c1"># Eingabe von HTML Seite abfragen. In diesem Fall aus eigener Datei	</span>
<span class="n">form</span> <span class="o">=</span> <span class="n">cgi</span><span class="o">.</span><span class="n">FieldStorage</span><span class="p">()</span>
<span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">getvalue</span><span class="p">(</span><span class="s2">&quot;player1_name&quot;</span><span class="p">):</span>
    <span class="n">playername1db</span><span class="o">=</span><span class="n">form</span><span class="o">.</span><span class="n">getvalue</span><span class="p">(</span><span class="s1">&#39;player1_name&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
	<span class="n">playername1db</span> <span class="o">=</span> <span class="s2">&quot;Spieler 1&quot;</span>
	<span class="n">Fehler</span> <span class="o">=</span> <span class="mi">1</span>

<span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">getvalue</span><span class="p">(</span><span class="s2">&quot;player2_name&quot;</span><span class="p">):</span>
    <span class="n">playername2db</span><span class="o">=</span><span class="n">form</span><span class="o">.</span><span class="n">getvalue</span><span class="p">(</span><span class="s1">&#39;player2_name&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
	<span class="n">playername2db</span> <span class="o">=</span> <span class="s2">&quot;Spieler 2&quot;</span>
	<span class="n">Fehler</span> <span class="o">=</span> <span class="mi">1</span>

<span class="k">if</span> <span class="n">playername1db</span> <span class="o">==</span> <span class="s2">&quot;Spieler 1&quot;</span> <span class="ow">or</span> <span class="n">playername2db</span> <span class="o">==</span> <span class="s2">&quot;Spieler 2&quot;</span><span class="p">:</span>
	<span class="n">Fehler</span> <span class="o">=</span> <span class="mi">4</span>
<span class="k">if</span> <span class="n">playername1db</span> <span class="o">==</span> <span class="s2">&quot;Spieler 1&quot;</span> <span class="ow">and</span> <span class="n">playername2db</span> <span class="o">==</span> <span class="s2">&quot;Spieler 2&quot;</span><span class="p">:</span>
	<span class="n">Fehler</span> <span class="o">=</span> <span class="mi">1</span>	
<span class="k">if</span> <span class="n">playername1db</span> <span class="o">==</span> <span class="n">playername2db</span><span class="p">:</span>
	<span class="n">Fehler</span> <span class="o">=</span> <span class="mi">5</span>	

<span class="c1"># Wenn keine falschen eingaben getätigt worden sind, werden die Namen in die Funktion function_compare übergeben. Diese vergleicht alle Spiele der angefragten Namen miteinander</span>
<span class="k">if</span> <span class="n">playername1db</span> <span class="o">!=</span> <span class="s2">&quot;Spieler 1&quot;</span> <span class="ow">and</span> <span class="n">playername2db</span> <span class="o">!=</span> <span class="s2">&quot;Spieler 2&quot;</span><span class="p">:</span>	
	<span class="n">playerpoints1db</span> <span class="o">=</span> <span class="n">function</span><span class="o">.</span> <span class="n">askplayerpoints</span><span class="p">(</span><span class="n">playername1db</span><span class="p">,</span><span class="n">playername2db</span><span class="p">)</span>
	<span class="n">playergoals1db</span> <span class="o">=</span> <span class="n">function</span><span class="o">.</span> <span class="n">askplayergoals</span><span class="p">(</span><span class="n">playername1db</span><span class="p">,</span><span class="n">playername2db</span><span class="p">)</span>
	<span class="n">playergoalsagainst1db</span> <span class="o">=</span> <span class="n">function</span><span class="o">.</span> <span class="n">askplayergoalsagainst</span><span class="p">(</span><span class="n">playername1db</span><span class="p">,</span><span class="n">playername2db</span><span class="p">)</span>
	<span class="n">playercount1db</span> <span class="o">=</span> <span class="n">function</span><span class="o">.</span> <span class="n">askplayercount</span><span class="p">(</span><span class="n">playername1db</span><span class="p">,</span><span class="n">playername2db</span><span class="p">)</span>
	<span class="n">playerwin1db</span> <span class="o">=</span> <span class="n">function</span><span class="o">.</span> <span class="n">askplayerwin</span><span class="p">(</span><span class="n">playername1db</span><span class="p">,</span><span class="n">playername2db</span><span class="p">)</span>
	<span class="n">playerloose1db</span> <span class="o">=</span> <span class="n">function</span><span class="o">.</span> <span class="n">askplayerloose</span><span class="p">(</span><span class="n">playername1db</span><span class="p">,</span><span class="n">playername2db</span><span class="p">)</span>
	<span class="n">playerremi1db</span> <span class="o">=</span> <span class="n">function</span><span class="o">.</span> <span class="n">askplayerremi</span><span class="p">(</span><span class="n">playername1db</span><span class="p">,</span><span class="n">playername2db</span><span class="p">)</span>
	<span class="n">playerscore1db</span> <span class="o">=</span> <span class="n">function</span><span class="o">.</span> <span class="n">askplayerscore</span><span class="p">(</span><span class="n">playername1db</span><span class="p">,</span><span class="n">playername2db</span><span class="p">)</span>
	<span class="n">goaldifferent1</span> <span class="o">=</span> <span class="n">playergoals1db</span> <span class="o">-</span> <span class="n">playergoalsagainst1db</span>
	
	<span class="n">playerpoints2db</span> <span class="o">=</span> <span class="n">function</span><span class="o">.</span> <span class="n">askplayerpoints</span><span class="p">(</span><span class="n">playername2db</span><span class="p">,</span><span class="n">playername1db</span><span class="p">)</span>
	<span class="n">playergoals2db</span> <span class="o">=</span> <span class="n">function</span><span class="o">.</span> <span class="n">askplayergoals</span><span class="p">(</span><span class="n">playername2db</span><span class="p">,</span><span class="n">playername1db</span><span class="p">)</span>
	<span class="n">playergoalsagainst2db</span> <span class="o">=</span> <span class="n">function</span><span class="o">.</span> <span class="n">askplayergoalsagainst</span><span class="p">(</span><span class="n">playername2db</span><span class="p">,</span><span class="n">playername1db</span><span class="p">)</span>
	<span class="n">playercount2db</span> <span class="o">=</span> <span class="n">function</span><span class="o">.</span> <span class="n">askplayercount</span><span class="p">(</span><span class="n">playername2db</span><span class="p">,</span><span class="n">playername1db</span><span class="p">)</span>
	<span class="n">playerwin2db</span> <span class="o">=</span> <span class="n">function</span><span class="o">.</span> <span class="n">askplayerwin</span><span class="p">(</span><span class="n">playername2db</span><span class="p">,</span><span class="n">playername1db</span><span class="p">)</span>
	<span class="n">playerloose2db</span> <span class="o">=</span> <span class="n">function</span><span class="o">.</span> <span class="n">askplayerloose</span><span class="p">(</span><span class="n">playername2db</span><span class="p">,</span><span class="n">playername1db</span><span class="p">)</span>
	<span class="n">playerremi2db</span> <span class="o">=</span> <span class="n">function</span><span class="o">.</span> <span class="n">askplayerremi</span><span class="p">(</span><span class="n">playername2db</span><span class="p">,</span><span class="n">playername1db</span><span class="p">)</span>
	<span class="n">playerscore2db</span> <span class="o">=</span> <span class="n">function</span><span class="o">.</span> <span class="n">askplayerscore</span><span class="p">(</span><span class="n">playername2db</span><span class="p">,</span><span class="n">playername1db</span><span class="p">)</span>
	<span class="n">goaldifferent2</span> <span class="o">=</span> <span class="n">playergoals2db</span> <span class="o">-</span> <span class="n">playergoalsagainst2db</span>
<span class="k">else</span><span class="p">:</span>
	<span class="n">playerpoints1db</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="n">playergoals1db</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="n">playergoalsagainst1db</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="n">playercount1db</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="n">playerwin1db</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="n">playerloose1db</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="n">playerremi1db</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="n">playerscore1db</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="n">goaldifferent1</span> <span class="o">=</span> <span class="mi">0</span>

	<span class="n">playerpoints2db</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="n">playergoals2db</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="n">playergoalsagainst2db</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="n">playercount2db</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="n">playerwin2db</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="n">playerloose2db</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="n">playerremi2db</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="n">playerscore2db</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="n">goaldifferent2</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1"># Debug: Direkte Anzeige der Auswertung im Terminal </span>
<span class="c1">#print &quot;Spielername:	&quot; + str(playername1db)</span>
<span class="c1">#print &quot;Punkte:		&quot; + str(playerpoints1db)</span>
<span class="c1">#print &quot;Tore:		&quot; + str(playergoals1db)</span>
<span class="c1">#print &quot;Gegentore:	&quot; + str(playergoalsagainst1db)</span>
<span class="c1">#print &quot;Tordifferenz:	&quot; + str(goaldifferent1)</span>
<span class="c1">#print &quot;Spielanzahl:	&quot; + str(playercount1db)</span>
<span class="c1">#print &quot;Siege:		&quot; + str(playerwin1db)</span>
<span class="c1">#print &quot;Niederlagen:	&quot; + str(playerloose1db)</span>
<span class="c1">#print &quot;Remis:		&quot; + str(playerremi1db)</span>
<span class="c1">#print &quot;Bewertung:	&quot; + str(playerscore1db)</span>
<span class="c1">#	</span>
<span class="c1">#</span>
<span class="c1">#print &quot;Spielername:	&quot; + str(playername2db)</span>
<span class="c1">#print &quot;Punkte:		&quot; + str(playerpoints2db)</span>
<span class="c1">#print &quot;Tore:		&quot; + str(playergoals2db)</span>
<span class="c1">#print &quot;Gegentore:	&quot; + str(playergoalsagainst2db)</span>
<span class="c1">#print &quot;Tordifferenz:	&quot; + str(goaldifferent2)</span>
<span class="c1">#print &quot;Spielanzahl:	&quot; + str(playercount2db)</span>
<span class="c1">#print &quot;Siege:		&quot; + str(playerwin2db)</span>
<span class="c1">#print &quot;Niederlagen:	&quot; + str(playerloose2db)</span>
<span class="c1">#print &quot;Remis:		&quot; + str(playerremi2db)</span>
<span class="c1">#print &quot;Bewertung:	&quot; + str(playerscore2db)</span>

<span class="c1"># Fehlercode für Fehleranzeige festlegen</span>
<span class="k">if</span> <span class="n">Fehler</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
    <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Nur ein Spieler ausgew&amp;auml;hlt! &quot;</span>
<span class="k">if</span> <span class="n">Fehler</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
    <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Bitte Spieler w&amp;auml;hlen!&quot;</span>
<span class="k">if</span> <span class="n">Fehler</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
    <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Zwei gleiche Spieler ausgew&amp;auml;hlt!&quot;</span>

<span class="c1"># Beginn der HTML Ausgabe</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;!DOCTYPE HTML PUBLIC&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;html&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;head&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;title&gt;Aktuell&lt;/title&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=iso-8859-1&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/head&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;style.css&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;div id=&quot;main&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;div id=&quot;center&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;h1&gt;Direkter Spielervergleich&lt;/h1&gt;&quot;&quot;&quot;</span>
<span class="k">if</span> <span class="n">Fehler</span> <span class="o">==</span> <span class="mi">5</span> <span class="ow">or</span> <span class="n">Fehler</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;div id=&quot;message-box-fail&quot;&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="n">text</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;/div&gt;&quot;</span>
<span class="k">else</span><span class="p">:</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;div id=&quot;message-box&quot;&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="n">text</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;/div&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>	
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;form method=&quot;post&quot; action=&quot;main_compare.py&quot; target=&quot;mainFrame&quot;&gt;&quot;&quot;&quot;</span> 
<span class="nb">print</span> <span class="s2">&quot;&lt;p&gt;&quot;</span> 
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;  &lt;select style=&quot;height: 25px; width: 100px;&quot; name=&quot;player1_name&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;  &lt;option selected value=&quot;Spieler 1&quot;&gt;Spieler 1&lt;/option&gt;&quot;&quot;&quot;</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">playerlist</span><span class="p">:</span>
	<span class="nb">print</span> <span class="s1">&#39;&lt;option value=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/option&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
	
<span class="nb">print</span> <span class="s2">&quot;  &lt;/select&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;  &lt;select style=&quot;height: 25px; width: 100px;&quot; name=&quot;player2_name&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;  &lt;option selected value=&quot;Spieler 2&quot;&gt;Spieler 2&lt;/option&gt;&quot;&quot;&quot;</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">playerlist</span><span class="p">:</span>
	<span class="nb">print</span> <span class="s1">&#39;&lt;option value=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/option&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

<span class="nb">print</span> <span class="s2">&quot;  &lt;/select&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;form  name=&quot;form2&quot; method=&quot;post&quot; action=&quot;&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;   &lt;input style=&quot;height: 25px; width: 100px;&quot; value=&quot;Vergleichen&quot;  type=&quot;submit&quot; name=&quot;submit&quot;/&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;  &lt;/p&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;  &lt;p&gt;&amp;nbsp;&lt;/p&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/form&gt;&quot;</span>

	
<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;table id=&quot;table_compare&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;  &lt;tr&gt;&quot;</span>
<span class="nb">print</span><span class="s2">&quot;&quot;&quot;     &lt;th width=&quot;33%&quot;&gt;&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span><span class="s2">&quot;&quot;&quot;     &lt;th width=&quot;33%&quot;&gt;&quot;&quot;&quot;</span><span class="p">,</span><span class="n">playername1db</span><span class="p">,</span><span class="s2">&quot;&quot;&quot;&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span><span class="s2">&quot;&quot;&quot;     &lt;th width=&quot;33%&quot;&gt;&quot;&quot;&quot;</span><span class="p">,</span><span class="n">playername2db</span><span class="p">,</span><span class="s2">&quot;&quot;&quot;&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span><span class="s2">&quot;   &lt;/tr&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;  &lt;tr&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;Spiele&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;/td&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;td colspan= 2&gt;&quot;</span>
<span class="nb">print</span> <span class="n">playercount1db</span>
<span class="nb">print</span> <span class="s2">&quot;	   &lt;/td&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;/tr&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;  &lt;tr&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;Siege&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;/td&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="nb">print</span> <span class="n">playerwin1db</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;/td&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="nb">print</span> <span class="n">playerwin2db</span>
<span class="nb">print</span> <span class="s2">&quot;	   &lt;/td&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;/tr&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;  &lt;tr&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;Remis&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;/td&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;td colspan= 2&gt;&quot;</span>
<span class="nb">print</span> <span class="n">playerremi1db</span>
<span class="nb">print</span> <span class="s2">&quot;	   &lt;/td&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;/tr&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;  &lt;tr&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;Niederlagen&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;/td&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="nb">print</span> <span class="n">playerloose1db</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;/td&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="nb">print</span> <span class="n">playerloose2db</span>
<span class="nb">print</span> <span class="s2">&quot;	   &lt;/td&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;/tr&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;  &lt;tr&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;Tore&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;/td&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="nb">print</span> <span class="n">playergoals1db</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;/td&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="nb">print</span> <span class="n">playergoals2db</span>
<span class="nb">print</span> <span class="s2">&quot;	   &lt;/td&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;/tr&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;  &lt;tr&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;Tordifferenz&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;/td&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="nb">print</span> <span class="n">goaldifferent1</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;/td&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="nb">print</span> <span class="n">goaldifferent2</span>
<span class="nb">print</span> <span class="s2">&quot;	   &lt;/td&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;/tr&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;  &lt;tr&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;Punkte&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;/td&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="nb">print</span> <span class="n">playerpoints1db</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;/td&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="nb">print</span> <span class="n">playerpoints2db</span>
<span class="nb">print</span> <span class="s2">&quot;	   &lt;/td&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;/tr&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;&lt;/table&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/div&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/div&gt;&quot;</span>
<span class="nb">print</span><span class="s2">&quot; &lt;/body&gt;&quot;</span>
<span class="nb">print</span><span class="s2">&quot; &lt;/html&gt;&quot;</span>
<span class="c1"># Ende der HTML Ausgabe</span>

</pre></div>
</div>
<ul class="simple">
<li><p>Funktionsblock</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="c1"># -*- coding: UTF-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Aus der Eingabeseite der WEB GUI Werden Zwei Spielernamen  übertragen.  Zu diesen Spielern</span>
<span class="sd">werden alle Spiele zwischen den beiden Spielen ermittelt und deren Ergebnissen verglichen.</span>
<span class="sd">&quot;&quot;&quot;</span>	
<span class="n">__author__</span> <span class="o">=</span> <span class="s2">&quot;Oliver Bleeker&quot;</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s2">&quot;1.0.1&quot;</span>
<span class="n">__status__</span> <span class="o">=</span> <span class="s2">&quot;Ready&quot;</span>

<span class="c1"># Laden der Verwendeten Bibliotheken</span>
<span class="kn">import</span> <span class="nn">sqlite3</span> <span class="k">as</span> <span class="nn">sqlite</span>

<span class="c1"># Definieren von Globelen Variablen </span>
<span class="n">con</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;Stats.db&quot;</span><span class="p">)</span>
<span class="n">cur</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">askplayername</span><span class="p">(</span><span class="n">number</span><span class="p">):</span>	
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Spielernummer einem Spielernamen zuordnen&quot;&quot;&quot;</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT Name FROM Players WHERE Nummer=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">number</span><span class="p">,</span> <span class="p">))</span>
	<span class="k">for</span> <span class="n">playernumberdb</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">:</span>
		<span class="n">playername1</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">%</span> <span class="n">playernumberdb</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">playername1</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">askplayerscore</span><span class="p">(</span><span class="n">name1</span><span class="p">,</span><span class="n">name2</span><span class="p">):</span>	
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Spielernummer einem Spielernamen zuordnen&quot;&quot;&quot;</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT Bewertung FROM Players WHERE Name=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">name1</span><span class="p">,</span>  <span class="p">))</span>
	<span class="k">for</span> <span class="n">askplayerscoredb</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">:</span>
		<span class="n">askplayerscore</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">%</span> <span class="n">askplayerscoredb</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">askplayerscore</span><span class="p">)</span>
	
<span class="k">def</span> <span class="nf">askplayerpoints</span><span class="p">(</span><span class="n">name1</span><span class="p">,</span><span class="n">name2</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Anzahl der Punkte beider Spieler im direkten Duell abfragen&quot;&quot;&quot;</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT SUM (PunkteSpieler1) FROM Games WHERE Spieler1=? AND Spieler2 =?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">name1</span><span class="p">,</span> <span class="n">name2</span><span class="p">,</span>  <span class="p">))</span>
	<span class="n">points1db</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">points1db</span><span class="p">:</span>
		<span class="n">points1</span> <span class="o">=</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		<span class="k">if</span> <span class="n">points1</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
			<span class="n">points1</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">points1</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT SUM (PunkteSpieler2) FROM Games WHERE Spieler2=? AND Spieler1 =?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">name1</span><span class="p">,</span> <span class="n">name2</span><span class="p">,</span>  <span class="p">))</span>
	<span class="n">points2db</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">points2db</span><span class="p">:</span>
		<span class="n">points2</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		<span class="k">if</span> <span class="n">points2</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
			<span class="n">points2</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">points2</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		
	<span class="n">playerpoints</span> <span class="o">=</span> <span class="p">(</span><span class="n">points1</span> <span class="o">+</span> <span class="n">points2</span><span class="p">)</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">playerpoints</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">askplayergoals</span><span class="p">(</span><span class="n">name1</span><span class="p">,</span><span class="n">name2</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Anzahl der Tore beider Spieler im direkten Duell abfragen&quot;&quot;&quot;</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT SUM (ToreSpieler1) FROM Games WHERE Spieler1=? AND Spieler2 =?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">name1</span><span class="p">,</span> <span class="n">name2</span><span class="p">,</span>  <span class="p">))</span>
	<span class="n">goals1db</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">goals1db</span><span class="p">:</span>
		<span class="n">goals1</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		<span class="k">if</span> <span class="n">goals1</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
			<span class="n">goals1</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">goals1</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT SUM (ToreSpieler2) FROM Games WHERE Spieler2=? AND Spieler1 =?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">name1</span><span class="p">,</span> <span class="n">name2</span><span class="p">,</span>  <span class="p">))</span>
	<span class="n">goals2db</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">goals2db</span><span class="p">:</span>
		<span class="n">goals2</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		<span class="k">if</span> <span class="n">goals2</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
			<span class="n">goals2</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">goals2</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		
	<span class="n">playergoals</span> <span class="o">=</span> <span class="p">(</span><span class="n">goals1</span> <span class="o">+</span> <span class="n">goals2</span><span class="p">)</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">playergoals</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">askplayergoalsagainst</span><span class="p">(</span><span class="n">name1</span><span class="p">,</span><span class="n">name2</span><span class="p">):</span>	
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Anzahl der Gegentore beider Spieler abfragen&quot;&quot;&quot;</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT SUM (ToreSpieler2) FROM Games WHERE Spieler1=? AND Spieler2 =?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">name1</span><span class="p">,</span> <span class="n">name2</span><span class="p">,</span>  <span class="p">))</span>
	<span class="n">goalsagainst1db</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">goalsagainst1db</span><span class="p">:</span>
		<span class="n">goalsagainst1</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		<span class="k">if</span> <span class="n">goalsagainst1</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
			<span class="n">goalsagainst1</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">goalsagainst1</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT SUM (ToreSpieler1) FROM Games WHERE Spieler2=? AND Spieler1 =?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">name1</span><span class="p">,</span> <span class="n">name2</span><span class="p">,</span>  <span class="p">))</span>
	<span class="n">goalsagainst2db</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">goalsagainst2db</span><span class="p">:</span>
		<span class="n">goalsagainst2</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		<span class="k">if</span> <span class="n">goalsagainst2</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
			<span class="n">goalsagainst2</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">goalsagainst2</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		
	<span class="n">playergoalsagainst</span> <span class="o">=</span> <span class="p">(</span><span class="n">goalsagainst1</span> <span class="o">+</span> <span class="n">goalsagainst2</span><span class="p">)</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">playergoalsagainst</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">askplayercount</span><span class="p">(</span><span class="n">name1</span><span class="p">,</span><span class="n">name2</span><span class="p">):</span>	
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Anzahl der Spiele beider Spieler im direkten Duell abfragen&quot;&quot;&quot;</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Count(*) FROM `Games` WHERE Spieler1=? AND Spieler2 =?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">name1</span><span class="p">,</span> <span class="n">name2</span><span class="p">,</span>  <span class="p">))</span>
	<span class="n">playercount1db</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">playercount1db</span><span class="p">:</span>
		<span class="n">playercount1</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		<span class="k">if</span> <span class="n">playercount1</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
			<span class="n">playercount1</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">playercount1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
	
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Count(*) FROM `Games` WHERE Spieler2=? AND Spieler1 =?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">name1</span><span class="p">,</span> <span class="n">name2</span><span class="p">,</span>  <span class="p">))</span>
	<span class="n">playercount2db</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">playercount2db</span><span class="p">:</span>
		<span class="n">playercount2</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		<span class="k">if</span> <span class="n">playercount2</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
			<span class="n">playercount2</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">playercount2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>		
	<span class="n">playercount</span> <span class="o">=</span> <span class="n">playercount1</span> <span class="o">+</span> <span class="n">playercount2</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">playercount</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">askplayerwin</span><span class="p">(</span><span class="n">name1</span><span class="p">,</span><span class="n">name2</span><span class="p">):</span>	
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Anzahl der Siege beider Spieler im direkten Duell abfragen&quot;&quot;&quot;</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Count(*) FROM `Games` WHERE Spieler1=? AND PunkteSpieler1=3 AND Spieler2 =?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">name1</span><span class="p">,</span> <span class="n">name2</span><span class="p">,</span>  <span class="p">))</span>
	<span class="n">playerwin1db</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">playerwin1db</span><span class="p">:</span>
		<span class="n">playerwin1</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		<span class="k">if</span> <span class="n">playerwin1</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
			<span class="n">playerwin1</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">playerwin1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
	
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Count(*) FROM `Games` WHERE Spieler2=? AND PunkteSpieler2=3 AND Spieler1 =?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">name1</span><span class="p">,</span> <span class="n">name2</span><span class="p">,</span>  <span class="p">))</span>
	<span class="n">playerwin2db</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">playerwin2db</span><span class="p">:</span>
		<span class="n">playerwin2</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		<span class="k">if</span> <span class="n">playerwin2</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
			<span class="n">playerwin2</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">playerwin2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>		
	<span class="n">playerwin</span> <span class="o">=</span> <span class="n">playerwin1</span> <span class="o">+</span> <span class="n">playerwin2</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">playerwin</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">askplayerloose</span><span class="p">(</span><span class="n">name1</span><span class="p">,</span><span class="n">name2</span><span class="p">):</span>	
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Anzahl der Niederlagen beider Spieler im direkten Duell abfragen&quot;&quot;&quot;</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Count(*) FROM `Games` WHERE Spieler1=? AND PunkteSpieler1=0 AND Spieler2 =?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">name1</span><span class="p">,</span> <span class="n">name2</span><span class="p">,</span>  <span class="p">))</span>
	<span class="n">playerloose1db</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">playerloose1db</span><span class="p">:</span>
		<span class="n">playerloose1</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		<span class="k">if</span> <span class="n">playerloose1</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
			<span class="n">playerloose1</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">playerloose1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
	
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Count(*) FROM `Games` WHERE Spieler2=? AND PunkteSpieler2=0 AND Spieler1 =?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">name1</span><span class="p">,</span> <span class="n">name2</span><span class="p">,</span>  <span class="p">))</span>
	<span class="n">playerloose2db</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">playerloose2db</span><span class="p">:</span>
		<span class="n">playerloose2</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		<span class="k">if</span> <span class="n">playerloose2</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
			<span class="n">playerloose2</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">playerloose2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>		
	<span class="n">playerloose</span> <span class="o">=</span> <span class="n">playerloose1</span> <span class="o">+</span> <span class="n">playerloose2</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">playerloose</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">askplayerremi</span><span class="p">(</span><span class="n">name1</span><span class="p">,</span><span class="n">name2</span><span class="p">):</span>	
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Anzahl der Unentschieden beider Spieler im direkten Duell abfragen&quot;&quot;&quot;</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Count(*) FROM `Games` WHERE Spieler1=? AND PunkteSpieler1=1 AND Spieler2 =?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">name1</span><span class="p">,</span> <span class="n">name2</span><span class="p">,</span>  <span class="p">))</span>
	<span class="n">playerremi1db</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">playerremi1db</span><span class="p">:</span>
		<span class="n">playerremi1</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		<span class="k">if</span> <span class="n">playerremi1</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
			<span class="n">playerremi1</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">playerremi1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
	
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Count(*) FROM `Games` WHERE Spieler2=? AND PunkteSpieler2=1 AND Spieler1 =?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">name1</span><span class="p">,</span> <span class="n">name2</span><span class="p">,</span>  <span class="p">))</span>
	<span class="n">playerremi2db</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">playerremi2db</span><span class="p">:</span>
		<span class="n">playerremi2</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		<span class="k">if</span> <span class="n">playerremi2</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
			<span class="n">playerremi2</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">playerremi2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>		
	<span class="n">playerremi</span> <span class="o">=</span> <span class="n">playerremi1</span> <span class="o">+</span> <span class="n">playerremi2</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">playerremi</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Spieltag anzeigen und Spiel starten</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="c1"># -*- coding: UTF-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Eingeben der Spieldaten. Spielernamen und Ergebnis werden in die Datei function_add_game übergeben</span>
<span class="sd">und dort ausgewertet und in der Datenbank abgelegt. Zudem werden die Tagestabelle und die Spiele des</span>
<span class="sd">aktuellen Spieltages tabellarisch angezeigt.</span>
<span class="sd">&quot;&quot;&quot;</span>	
<span class="n">__author__</span> <span class="o">=</span> <span class="s2">&quot;Oliver Bleeker&quot;</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s2">&quot;1.0.1&quot;</span>
<span class="n">__status__</span> <span class="o">=</span> <span class="s2">&quot;Ready&quot;</span>

<span class="c1"># Laden der Verwendeten Bibliotheken</span>
<span class="kn">import</span> <span class="nn">sqlite3</span> <span class="k">as</span> <span class="nn">sqlite</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">cgi</span>
<span class="kn">import</span> <span class="nn">function_add_game</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="c1"># Globale Variablen Definieren</span>
<span class="n">con</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;Stats.db&quot;</span><span class="p">)</span>
<span class="n">cur</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="n">form</span> <span class="o">=</span> <span class="n">cgi</span><span class="o">.</span><span class="n">FieldStorage</span><span class="p">()</span>
<span class="n">datum</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">.%m.%Y&quot;</span><span class="p">)</span>	
<span class="n">tag</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">.%m.%Y&quot;</span><span class="p">)</span>
<span class="n">messagecode</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">Fehler</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1"># Abfrage der Eingabefelder HTML</span>
<span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">getvalue</span><span class="p">(</span><span class="s2">&quot;player1_name&quot;</span><span class="p">):</span>
	<span class="n">player1_name</span><span class="o">=</span><span class="n">form</span><span class="o">.</span><span class="n">getvalue</span><span class="p">(</span><span class="s1">&#39;player1_name&#39;</span><span class="p">)</span>
	<span class="k">if</span> <span class="n">player1_name</span> <span class="o">==</span> <span class="s2">&quot;Spieler 1&quot;</span><span class="p">:</span>
		<span class="n">Fehler</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">else</span><span class="p">:</span>
	<span class="n">player1_name</span> <span class="o">=</span> <span class="s2">&quot;Spieler 1&quot;</span>

<span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">getvalue</span><span class="p">(</span><span class="s2">&quot;player2_name&quot;</span><span class="p">):</span>
	<span class="n">player2_name</span><span class="o">=</span><span class="n">form</span><span class="o">.</span><span class="n">getvalue</span><span class="p">(</span><span class="s1">&#39;player2_name&#39;</span><span class="p">)</span>
	<span class="k">if</span> <span class="n">player2_name</span> <span class="o">==</span> <span class="s2">&quot;Spieler 2&quot;</span><span class="p">:</span>
		<span class="n">Fehler</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">else</span><span class="p">:</span>
	<span class="n">player2_name</span> <span class="o">=</span> <span class="s2">&quot;Spieler 2&quot;</span>

<span class="k">if</span> <span class="n">player1_name</span> <span class="o">==</span> <span class="n">player2_name</span><span class="p">:</span>
	<span class="n">Fehler</span> <span class="o">=</span> <span class="mi">2</span>

<span class="c1"># Abfrage der Checkbox für das Löschen eines Spiels</span>
<span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">getvalue</span><span class="p">(</span><span class="s2">&quot;checkbox1&quot;</span><span class="p">):</span>
	<span class="n">checkbox1</span><span class="o">=</span> <span class="s2">&quot;delete&quot;</span>
<span class="k">else</span><span class="p">:</span>
	<span class="n">checkbox1</span><span class="o">=</span> <span class="s2">&quot;null&quot;</span>	

<span class="c1"># Abfrage der Checkbox für das Abbrechen eines Spiels</span>
<span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">getvalue</span><span class="p">(</span><span class="s2">&quot;checkbox2&quot;</span><span class="p">):</span>
	<span class="n">checkbox2</span><span class="o">=</span> <span class="s2">&quot;delete&quot;</span>
<span class="k">else</span><span class="p">:</span>
	<span class="n">checkbox2</span><span class="o">=</span> <span class="s2">&quot;null&quot;</span>
	
<span class="c1"># Debug</span>
<span class="c1">#player1_name = &quot;Oliver B.&quot;</span>
<span class="c1">#player2_name = &quot;Daniel N.&quot;</span>
<span class="c1">#player1_goals = 2</span>
<span class="c1">#player1_goals = 1</span>
<span class="c1">#checkbox1 = &quot;delete&quot;</span>
<span class="c1">#checkbox2 = &quot;delete&quot;</span>

<span class="c1"># Wenn keine Eingabefehler erkannt worden sind werden die Spielernamen in die Datenbank geschrieben</span>
<span class="k">if</span> <span class="n">Fehler</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">player1_name</span> <span class="o">!=</span> <span class="s2">&quot;Spieler 1&quot;</span> <span class="ow">and</span> <span class="n">player2_name</span> <span class="o">!=</span> <span class="s2">&quot;Spieler 2&quot;</span><span class="p">:</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;UPDATE &#39;GamePlayers&#39; SET Spieler = ? WHERE Nummer=1&quot;</span><span class="p">,(</span><span class="n">player1_name</span><span class="p">,</span> <span class="p">))</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;UPDATE &#39;GamePlayers&#39; SET Spieler = ? WHERE Nummer=2&quot;</span><span class="p">,(</span><span class="n">player2_name</span><span class="p">,</span> <span class="p">))</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;UPDATE &#39;GamePlayers&#39; SET Tore = 0 WHERE Nummer=1&quot;</span><span class="p">)</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;UPDATE &#39;GamePlayers&#39; SET Tore = 0 WHERE Nummer=2&quot;</span><span class="p">)</span>
	<span class="n">con</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

<span class="c1"># Abfrage Checkbox1 zum löschen des letzten Spiels</span>
<span class="k">if</span> <span class="n">checkbox1</span> <span class="o">==</span> <span class="s2">&quot;delete&quot;</span><span class="p">:</span>
	<span class="c1"># Maximalen Zeilenwert aus den Spielen Laden</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT MAX (rowid) FROM Games&quot;</span><span class="p">)</span>
	<span class="nb">id</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
	<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">id</span><span class="p">:</span>
		<span class="nb">id</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		<span class="k">if</span> <span class="nb">id</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
			<span class="nb">id</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="nb">id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
	<span class="n">messagecode</span> <span class="o">=</span> <span class="n">function_add_game</span><span class="o">.</span> <span class="n">deletegame</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>

<span class="c1"># Abfrage Checkbox2 zum beenden des aktuellen spiels</span>
<span class="k">if</span> <span class="n">checkbox2</span> <span class="o">==</span> <span class="s2">&quot;delete&quot;</span><span class="p">:</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE GamePlayers Set Tore=99 WHERE Nummer=1&quot;</span><span class="p">)</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE GamePlayers Set Tore=99 WHERE Nummer=2&quot;</span><span class="p">)</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE GamePlayers Set Spieler=&#39;Spieler1&#39; WHERE Nummer=1&quot;</span><span class="p">)</span>
	<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;UPDATE GamePlayers Set Spieler=&#39;Spieler2&#39; WHERE Nummer=2&quot;</span><span class="p">)</span>
	<span class="n">con</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>


<span class="c1"># Alle Zeilen der Spalte Players auslesen</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Name FROM Players&quot;</span><span class="p">)</span>
<span class="n">players</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="n">playerlist</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="n">players</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">sub</span><span class="p">]</span>  <span class="c1"># Convert to list from tuple</span>

<span class="c1"># Werte für die Tagestabelle aus der Datenbank laden. Hier nach Punkten Sortiert</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Spieler FROM &#39;DayTable&#39; ORDER BY Punkte DESC, Tore DESC, Tordifferenz DESC&quot;</span> <span class="p">)</span>
<span class="n">player</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Siege FROM &#39;DayTable&#39; ORDER BY Punkte DESC, Tore DESC, Tordifferenz DESC&quot;</span><span class="p">)</span>
<span class="n">win</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Unentschieden FROM &#39;DayTable&#39; ORDER BY Punkte DESC, Tore DESC, Tordifferenz DESC&quot;</span><span class="p">)</span>
<span class="n">draw</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Niederlagen FROM &#39;DayTable&#39; ORDER BY Punkte DESC, Tore DESC, Tordifferenz DESC&quot;</span><span class="p">)</span>
<span class="n">loose</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Tore FROM &#39;DayTable&#39; ORDER BY Punkte DESC, Tore DESC, Tordifferenz DESC&quot;</span><span class="p">)</span>
<span class="n">goals</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Gegentore FROM &#39;DayTable&#39; ORDER BY Punkte DESC, Tore DESC, Tordifferenz DESC&quot;</span><span class="p">)</span>
<span class="n">goalsagainst</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Tordifferenz FROM &#39;DayTable&#39; ORDER BY Punkte DESC, Tore DESC, Tordifferenz DESC&quot;</span><span class="p">)</span>
<span class="n">goaldifference</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Punkte FROM &#39;DayTable&#39; ORDER BY Punkte DESC, Tore DESC, Tordifferenz DESC&quot;</span><span class="p">)</span>
<span class="n">points</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Spielanzahl FROM &#39;DayTable&#39; ORDER BY Punkte DESC, Tore DESC, Tordifferenz DESC&quot;</span><span class="p">)</span>
<span class="n">countgame</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>

<span class="c1"># Laden der Tore des aktuellen Spiels</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Tore FROM &#39;GamePlayers&#39; WHERE Nummer = 1&quot;</span> <span class="p">)</span>
<span class="k">for</span> <span class="n">goalsdb</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">:</span>
    <span class="n">player1_go</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">goalsdb</span><span class="p">)))</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Tore FROM &#39;GamePlayers&#39; WHERE Nummer = 2&quot;</span> <span class="p">)</span>
<span class="k">for</span> <span class="n">goalsdb</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">:</span>
    <span class="n">player2_go</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">goalsdb</span><span class="p">)))</span>

<span class="c1"># Maximalen Spieltag aus der Datenbank lesen</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span> <span class="p">(</span><span class="s2">&quot;SELECT MAX(Spieltag) FROM Games&quot;</span><span class="p">)</span>
<span class="n">maxSpieltag</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">maxSpieltag</span><span class="p">:</span>
	<span class="n">maxSpieltag</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
	<span class="k">if</span> <span class="n">maxSpieltag</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
		<span class="n">maxSpieltag</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="n">maxSpieltag</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>	

<span class="c1"># Spieltag aus der Datenbank lesen</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Spieltag FROM `Settings`&quot;</span><span class="p">)</span>
<span class="n">gamedaydb</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">gamedaydb</span><span class="p">:</span>
	<span class="n">gameday</span> <span class="o">=</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
	<span class="k">if</span> <span class="n">gameday</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
		<span class="n">gameday</span> <span class="o">=</span> <span class="n">maxSpieltag</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="n">gameday</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>

<span class="c1"># Ablegen ob ein Spiel gelöscht worden ist, da jeweils nur das letzte Spiel gelöscht werden kann		</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Setgamedelete FROM `Settings`&quot;</span><span class="p">)</span>
<span class="n">setdeletedb</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">setdeletedb</span><span class="p">:</span>
	<span class="n">setdelete</span> <span class="o">=</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
	<span class="k">if</span> <span class="n">setdelete</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
		<span class="n">setdelete</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="n">setdelete</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">)))</span>
		

<span class="c1"># Werte für die Tabelle aller Spiele des Spieltages aus der Datenbank laden</span>
<span class="n">cur</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Datum FROM Games WHERE Spieltag=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">maxSpieltag</span><span class="p">,</span> <span class="p">))</span>
<span class="n">datumdb</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Spieler1 FROM Games WHERE Spieltag=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">maxSpieltag</span><span class="p">,</span> <span class="p">))</span>
<span class="n">player1namedb</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Spieler2 FROM Games WHERE Spieltag=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">maxSpieltag</span><span class="p">,</span> <span class="p">))</span>
<span class="n">player2namedb</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT ToreSpieler1 FROM Games WHERE Spieltag=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">maxSpieltag</span><span class="p">,</span> <span class="p">))</span>
<span class="n">player1goalsdb</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT ToreSpieler2 FROM Games WHERE Spieltag=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">maxSpieltag</span><span class="p">,</span> <span class="p">))</span>
<span class="n">player2goalsdb</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT TrendSpieler1 FROM Games WHERE Spieltag=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">maxSpieltag</span><span class="p">,</span> <span class="p">))</span>
<span class="n">player1trend</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT TrendSpieler2 FROM Games WHERE Spieltag=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">maxSpieltag</span><span class="p">,</span> <span class="p">))</span>
<span class="n">player2trend</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Count(*) FROM `Games`&quot;</span><span class="p">)</span>
<span class="n">countgames</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>


<span class="c1">#Datenbankverbindung schließen</span>
<span class="n">con</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="c1"># Beginn der HTML Ausgabe</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;!DOCTYPE HTML PUBLIC&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;html&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;head&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;title&gt;Aktuell&lt;/title&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=iso-8859-1&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/head&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;style.css&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;div id=&quot;main&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;div id=&quot;center&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;h1&gt;Spieltag&lt;/h1&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;Aktueller Spieltag: &quot;&quot;&quot;</span><span class="p">,</span><span class="n">maxSpieltag</span><span class="p">,</span><span class="s2">&quot;&quot;&quot; &quot;&quot;&quot;</span>
<span class="c1"># Abrage von Eingabefehlern und darstellung auf der Webseite</span>
<span class="k">if</span> <span class="n">Fehler</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;div id=&quot;message-box-fail&quot;&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;Spieler Ausw&amp;auml;hlen!&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;/div&gt;&quot;</span>
<span class="k">elif</span> <span class="n">Fehler</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;div id=&quot;message-box-fail&quot;&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;Unterschiedliche Spieler Ausw&amp;auml;hlen!&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;/div&gt;&quot;</span>
<span class="k">elif</span> <span class="n">player1_go</span> <span class="o">!=</span> <span class="s2">&quot;99&quot;</span> <span class="ow">and</span> <span class="n">player2_go</span> <span class="o">!=</span> <span class="s2">&quot;99&quot;</span><span class="p">:</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;div id=&quot;message-box-done&quot;&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;Spiel Gestartet&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;/div&gt;&quot;</span>
<span class="k">elif</span> <span class="n">messagecode</span> <span class="o">==</span> <span class="s2">&quot;71&quot;</span> <span class="ow">and</span> <span class="n">setdelete</span> <span class="o">==</span> <span class="s2">&quot;1&quot;</span><span class="p">:</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;div id=&quot;message-box-done&quot;&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;Spiel wurde erfolgreich gel&amp;ouml;scht!&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;Es kann nur ein Spiel gel&amp;ouml;scht werden!&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;/div&gt;&quot;</span>
<span class="k">else</span><span class="p">:</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
<span class="c1"># Wenn aktuell kein Spiel angefangen wurde, die Eingabe der Spielernamen ermöglichen um ein Spiel zu starten</span>
<span class="k">if</span> <span class="n">player1_go</span> <span class="o">==</span> <span class="s2">&quot;99&quot;</span> <span class="ow">and</span> <span class="n">player2_go</span> <span class="o">==</span> <span class="s2">&quot;99&quot;</span><span class="p">:</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;h2&gt;Neues Spiel&lt;h2&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;form method=&quot;post&quot; action=&quot;main_gameday.py&quot; target=&quot;_self&quot;&gt;&quot;&quot;&quot;</span> 
	<span class="nb">print</span> <span class="s2">&quot;&lt;p&gt;&quot;</span> 
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;  &lt;select style=&quot;height: 50px; width: 160px;&quot; name=&quot;player1_name&quot;&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;  &lt;option selected value=&quot;Spieler 1&quot;&gt;Spieler Gr&amp;uuml;n&lt;/option&gt;&quot;&quot;&quot;</span>
	<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">playerlist</span><span class="p">:</span>
		<span class="nb">print</span> <span class="s1">&#39;&lt;option value=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/option&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
	<span class="nb">print</span> <span class="s2">&quot;  &lt;/select&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;  &lt;select style=&quot;height: 50px; width: 160px;&quot; name=&quot;player2_name&quot;&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;  &lt;option selected value=&quot;Spieler 2&quot;&gt;Spieler Wei&amp;szlig;&lt;/option&gt;&quot;&quot;&quot;</span>
	<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">playerlist</span><span class="p">:</span>
		<span class="nb">print</span> <span class="s1">&#39;&lt;option value=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/option&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
	<span class="nb">print</span> <span class="s2">&quot;  &lt;/select&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;form name=&quot;form2&quot; method=&quot;post&quot; action=&quot;&quot;&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;   &lt;input style=&quot;height: 40px; width: 150px;&quot; value=&quot;Spiel Starten&quot;  type=&quot;submit&quot; name=&quot;submit&quot;/&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;  &lt;/p&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;  &lt;p&gt;&amp;nbsp;&lt;/p&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;/form&gt;&quot;</span>
<span class="k">if</span> <span class="n">player1_go</span> <span class="o">!=</span> <span class="s2">&quot;99&quot;</span> <span class="ow">and</span> <span class="n">player2_go</span> <span class="o">!=</span> <span class="s2">&quot;99&quot;</span><span class="p">:</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;form method=&quot;post&quot; action=&quot;main_gameday.py&quot; target=&quot;_self&quot;&gt;&quot;&quot;&quot;</span> 
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;   &lt;input type=&quot;checkbox&quot; name=&quot;checkbox2&quot; value=&quot;checkbox2&quot;&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;Spiel Abbrechen&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;   &lt;input style=&quot;height: 25px; width: 100px;&quot; value=&quot;Best&amp;auml;tigen&quot;  type=&quot;submit&quot; name=&quot;submit&quot;/&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot; &lt;/form&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
<span class="c1"># Anzeige der Tagestabelle</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;h2&gt;Tagestabelle&lt;h2&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;table id=&quot;table&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;  &lt;tr&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;th ALIGN=&quot;CENTER&quot; width=&quot;10%&quot;&gt;Spieler&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;th ALIGN=&quot;CENTER&quot; width=&quot;5%&quot;&gt;Spielanzahl&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;th ALIGN=&quot;CENTER&quot; width=&quot;5%&quot;&gt;Siege&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;th ALIGN=&quot;CENTER&quot; width=&quot;5%&quot;&gt;Remis&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;th ALIGN=&quot;CENTER&quot; width=&quot;5%&quot;&gt;Niederlagen&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;th ALIGN=&quot;CENTER&quot; width=&quot;5%&quot;&gt;Tore&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;th ALIGN=&quot;CENTER&quot; width=&quot;5%&quot;&gt;Gegentore&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;th ALIGN=&quot;CENTER&quot; width=&quot;5%&quot;&gt;Tordifferenz&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;th ALIGN=&quot;CENTER&quot; width=&quot;5%&quot;&gt;Punkte&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;  &lt;/tr&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;  &lt;tr align=&quot;center&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">player</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;/td&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">countgame</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/td&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">win</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;   &lt;/td&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">draw</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/td&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">loose</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/td&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">goals</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/td&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">goalsagainst</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/td&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">goaldifference</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/td&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">points</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/td&gt;&quot;</span>


<span class="nb">print</span> <span class="s2">&quot;  &lt;/tr&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/table&gt;&quot;</span>

<span class="c1"># Anzeige der Tabelle aller Spiele</span>

<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;h2&gt;Spiele des Tages&lt;/h2&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;table id=&quot;table&quot;&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;  &lt;tr&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;th ALIGN=&quot;CENTER&quot; width=&quot;20%&quot;&gt;Spieler 1&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;th ALIGN=&quot;CENTER&quot; width=&quot;5%&quot;&gt;Trend&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;th ALIGN=&quot;CENTER&quot; width=&quot;5%&quot;&gt;Tore&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;th ALIGN=&quot;CENTER&quot; width=&quot;5%&quot;&gt;Tore&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;th ALIGN=&quot;CENTER&quot; width=&quot;5%&quot;&gt;Trend&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;    &lt;th ALIGN=&quot;CENTER&quot; width=&quot;20%&quot;&gt;Spieler 2&lt;/th&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;  &lt;/tr&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;  &lt;tr align=&quot;center&quot;&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">player1namedb</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;   &lt;/td&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">player1trend</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/td&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">player1goalsdb</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/td&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">player2goalsdb</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/td&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">player2trend</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/td&gt;&quot;</span>

<span class="nb">print</span> <span class="s2">&quot;    &lt;td&gt;&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">player2namedb</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">row</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/td&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;  &lt;/tr&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/table&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>


<span class="c1"># Möglichkeit zum Löschen eines Spieles wenn dies noch nicht ausgeführt worden ist</span>
<span class="k">if</span> <span class="n">messagecode</span> <span class="o">!=</span> <span class="s2">&quot;71&quot;</span> <span class="ow">and</span> <span class="n">setdelete</span> <span class="o">==</span> <span class="s2">&quot;0&quot;</span><span class="p">:</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;&lt;form method=&quot;post&quot; action=&quot;main_gameday.py&quot; target=&quot;_self&quot;&gt;&quot;&quot;&quot;</span> 
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;   &lt;input type=&quot;checkbox&quot; name=&quot;checkbox1&quot; value=&quot;checkbox1&quot;&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;Letztes Spiel L&amp;ouml;schen&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot;&quot;&quot;   &lt;input style=&quot;height: 25px; width: 100px;&quot; value=&quot;Best&amp;auml;tigen&quot;  type=&quot;submit&quot; name=&quot;submit&quot;/&gt;&quot;&quot;&quot;</span>
	<span class="nb">print</span> <span class="s2">&quot; &lt;/form&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/div&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/div&gt;&quot;</span>
<span class="nb">print</span> <span class="s2">&quot;&lt;/html&gt;&quot;</span>
<span class="c1"># Ende HTML Ausgabe</span>
</pre></div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "mimeiners/prj-wi",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./docs/Kicker/04_Appendix"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../03_Spielsteuerung.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Die Spielsteuerung des Kickers</p>
      </div>
    </a>
    <a class="right-next"
       href="../../AuVAReS/Anleitungen/Programm-AuVAReS.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Programmablauf AuVAReS</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#softwareseite">Softwareseite</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#programmablauf">Programmablauf</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#vorgehen">Vorgehen</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#quellcode">Quellcode</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By M. Meiners / B. Lehmann
</p>

  </div>
  
  <div class="footer-item">
    

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  <div>
<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><img src="https://licensebuttons.net/l/by-nc-sa/3.0/88x31.png"></a>
    All content on this site (unless otherwise specified) is licensed under the <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0 license</a>
</div>

</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>