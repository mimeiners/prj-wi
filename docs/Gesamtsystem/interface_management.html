
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Interface Management &#8212; PRJ2/PRJ3 Wohninvest 4.0</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link media="all" rel="stylesheet" type="text/css" href="https://dokie.li/media/css/dokieli.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script async="async" kind="dokieli" src="https://dokie.li/scripts/dokieli.js"></script>
    <script kind="utterances">

    var commentsRunWhenDOMLoaded = cb => {
    if (document.readyState != 'loading') {
        cb()
    } else if (document.addEventListener) {
        document.addEventListener('DOMContentLoaded', cb)
    } else {
        document.attachEvent('onreadystatechange', function() {
        if (document.readyState == 'complete') cb()
        })
    }
}

var addUtterances = () => {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src = "https://utteranc.es/client.js";
    script.async = "async";

    script.setAttribute("repo", "mimeiners/prj-wi");
    script.setAttribute("issue-term", "pathname");
    script.setAttribute("theme", "github-light");
    script.setAttribute("label", "ğŸ’¬ comment");
    script.setAttribute("crossorigin", "anonymous");

    sections = document.querySelectorAll("div.section");
    if (sections !== null) {
        section = sections[sections.length-1];
        section.appendChild(script);
    }
}
commentsRunWhenDOMLoaded(addUtterances);
</script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js?v=36754332"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js?v=afe5de03"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'docs/Gesamtsystem/interface_management';</script>
    <link rel="canonical" href="https://mimeiners.github.io/prj-wi/docs/Gesamtsystem/interface_management.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="SchlÃ¼sselwÃ¶rter bei Kommunikation im Netzwerk von Kicker-AuVAReS" href="network-communication-keywords.html" />
    <link rel="prev" title="AuVAReS System Anforderungen" href="../AuVAReS/01_Requirements.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../../about/unsyllabus.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/hsb-logo.png" class="logo__image only-light" alt="PRJ2/PRJ3 Wohninvest 4.0 - Home"/>
    <script>document.write(`<img src="../../_static/hsb-logo.png" class="logo__image only-dark" alt="PRJ2/PRJ3 Wohninvest 4.0 - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../about/unsyllabus.html">
                    <no title>
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">HowTo</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../HowTo/HowTo_JB.html">How-To Jupyter-Book</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Gesamtsystem</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="Projektbeschreibung.html">Projektbeschreibung</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Kicker/temp_prj_wohlinvest_requierements.html">Wohlinvestment Anforderungen</a></li>

<li class="toctree-l2"><a class="reference internal" href="../AuVAReS/01_Requirements.html">Anforderungen AuVAReS</a></li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="current reference internal" href="#">Schnittstelle Kicker - AuVAReS</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="network-communication-keywords.html">SchlÃ¼sselwÃ¶rter bei Kommunikation im Netzwerk von Kicker-AuVAReS</a></li>


</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Hardware-Setup</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Kicker/Pi_Einrichtung.html">Kicker Raspberry Pi Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AuVAReS/Anleitungen/setup.html">AuVAReS Nvidia Jetson Setup</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Kicker</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Kicker/01_Kicker.html">Einleitung und Ãœbersicht</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">AuVAReS</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../AuVAReS/Anleitungen/Programm%20-%20AuVAReS.html">Programmablauf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AuVAReS/Anleitungen/Objekterkennung.html">Objekterkennung</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AuVAReS/Anleitungen/Known_Issues.html">Bekannte Probleme</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Meetings</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Meetings/04-11_Protokoll.html">Kick-Off</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/mimeiners/prj-wi" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/mimeiners/prj-wi/edit/master/docs/Gesamtsystem/interface_management.md" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/mimeiners/prj-wi/issues/new?title=Issue%20on%20page%20%2Fdocs/Gesamtsystem/interface_management.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/docs/Gesamtsystem/interface_management.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Interface Management</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#function">Function</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#network-design">Network design</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#keywords">Keywords</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#location">Location</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#structure">Structure</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lvl2-interface-py">LvL2_interface.py</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lvl3-classes-py">LVL3_classes.py</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#receiving-messages-ack-and-nack">Receiving Messages, ACK and NACK</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Function</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#implementation">Implementation</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sending-messages-and-connection-status">Sending Messages and Connection Status</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#finding-a-connection-and-reconnect">Finding a Connection and Reconnect</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#concept">Concept</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Implementation</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="interface-management">
<h1>Interface Management<a class="headerlink" href="#interface-management" title="Link to this heading">#</a></h1>
<section id="function">
<h2>Function<a class="headerlink" href="#function" title="Link to this heading">#</a></h2>
<p>The interface allows the Kicker to communicate with another device. By design, this other device will be the control unit of the the AuVAReS drone. The interface searches for a connection and controlls the connectionâ€™s status once it is esstablished. Through the interface, the partner device can send keywords which interact with the current status of the host and the other way around.</p>
</section>
<section id="network-design">
<h2>Network design<a class="headerlink" href="#network-design" title="Link to this heading">#</a></h2>
<p>The Network traffic is designed around global keywords. Here, a keyword is a string message that can be sended by any device and can be received by any device. Once received, a reaction is called which is defined at the receiver. The reaction being defined locally allows the each reaction to be fitted to each system, regardless of system design. Of course, all parties must agree on a common set of keywords and their functionalty (but not the technical implementation!).</p>
<section id="keywords">
<h3>Keywords<a class="headerlink" href="#keywords" title="Link to this heading">#</a></h3>
<table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Sender</p></th>
<th class="head text-left"><p>SchlÃ¼sselwort</p></th>
<th class="head text-left"><p>Beschreibung</p></th>
<th class="head text-left"><p>ACK</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p>K</p></td>
<td class="text-left"><p>ping</p></td>
<td class="text-left"><p>Wird mindestens zum Programmstart benutzt, um AuVAReS zu detektieren; nach timeout werden keine AuVAReS-abhÃ¤ngigÃ¤ngen Funktionen verwendet.</p></td>
<td class="text-left"><p>hi</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>K</p></td>
<td class="text-left"><p>notify_drone_powered</p></td>
<td class="text-left"><p>Die Spielernamen sind eingetragen und sie haben die Drohne gestartet (Quittieren Ã¼ber Button)</p></td>
<td class="text-left"><p>connecting_drone</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>A</p></td>
<td class="text-left"><p>notify_drone_connected</p></td>
<td class="text-left"><p>Meldung, dass die Drone verbunden ist</p></td>
<td class="text-left"><p>waiting_for_startbutton</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>K</p></td>
<td class="text-left"><p>notify_start_permission</p></td>
<td class="text-left"><p>Meldung, dass die Drone freigegeben ist zum Starten</p></td>
<td class="text-left"><p>positioning_drone</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>A</p></td>
<td class="text-left"><p>notify_gamestart</p></td>
<td class="text-left"><p>Meldung, dass das Spiel gestartet werden kann</p></td>
<td class="text-left"><p>game_started</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>K</p></td>
<td class="text-left"><p>notify_newgoal</p></td>
<td class="text-left"><p>Ein Tor ist gefallen, ein replay sollte gestartet werden</p></td>
<td class="text-left"><p>received_newgoal</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>K</p></td>
<td class="text-left"><p>notify_foul</p></td>
<td class="text-left"><p>Ein RegelverstoÃŸ ist vorgefallen, ein replay sollte gestartet werden</p></td>
<td class="text-left"><p>received_foul</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>K</p></td>
<td class="text-left"><p>notify_gameover</p></td>
<td class="text-left"><p>ZusÃ¤tzlich zum replay des Siegertores wird die Abschlussroutine der Drohne ausgefÃ¼hrt.</p></td>
<td class="text-left"><p>received_gamover</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>A</p></td>
<td class="text-left"><p>please_wait</p></td>
<td class="text-left"><p>AuVAReS kann das Spiel pausieren, bspw. wenn es ZwischenfÃ¤lle gibt. Tore werden nicht gezÃ¤hlt.</p></td>
<td class="text-left"><p>waiting</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>A</p></td>
<td class="text-left"><p>please_resume</p></td>
<td class="text-left"><p>AuVAReS ist wieder einsatzbereit und erlaubt dem Kicker, wieder Tore zu zÃ¤hlen.</p></td>
<td class="text-left"><p>gaming</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>K</p></td>
<td class="text-left"><p>STOP</p></td>
<td class="text-left"><p>AuVAReS soll Notlandung einleiten</p></td>
<td class="text-left"><p>received_stop</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="location">
<h2>Location<a class="headerlink" href="#location" title="Link to this heading">#</a></h2>
<p>The interface is defined in the file â€œLVL2_interface.pyâ€ and also has functions and definitions in â€œLVL3_classes.pyâ€ . â€œLVL2_interface.pyâ€ controlls the connection status, listens for keywords and interprets all incoming messages. If a keyword is detected a function inside this file is called which includes the appropiate reaction to a keyword (e.g setting certain status flags). Sending messages aswell as the connection status flag and finding a connection are defined in â€œLVL3_classes.pyâ€ . That way they can easily be called by other functions and use the interface without importing â€œLVL2_interface.pyâ€ .</p>
<p>As a Level 2 function â€œLVL2_interface.pyâ€ is started in â€œLVL1_threads.pyâ€ as a thread upon system start.</p>
<section id="structure">
<h3>Structure<a class="headerlink" href="#structure" title="Link to this heading">#</a></h3>
<section id="lvl2-interface-py">
<h4>LvL2_interface.py<a class="headerlink" href="#lvl2-interface-py" title="Link to this heading">#</a></h4>
<p>The main interface is defined in â€œLVL2_interface.pyâ€. Itâ€™s main structure is defined in the function â€œinterface()â€, which is started as a thread in â€œLVL1_threadsâ€. Inside â€œInterface()â€ there two sections.</p>
<p>The first section initialises the used keyword dictionary for the interface. This section also includes a while loop which stops interface activity until the first connection, after a system start, has been found. The second section contains the main functionality of the interface, defined by two threads which both serve one function each. The first function is â€œ_ping()â€, which sends a ping keyword to the connected client and governs the current connection status. The second the thread calls the function â€œ_recv()â€ which constantly supervises the connection port. Once it receives a message from another device, it checks if this message is a keyword or a ACK. If a keyword or ACK has been detected, a reaction function is called. If the message is either, no reation follows. The reaction funtion stops the â€œ_recvâ€ function detecting any more messages until the reaction resolved.</p>
</section>
<section id="lvl3-classes-py">
<h4>LVL3_classes.py<a class="headerlink" href="#lvl3-classes-py" title="Link to this heading">#</a></h4>
<p>Another part of the interface can be found in â€œLVL3_classes.pyâ€. This part includes three integral parts of the interface functionality. The function â€œ_find_connection()â€, the variable â€œconnection_statusâ€ and the function â€œserver_send()â€.</p>
<p>The function â€œ_find_connection()â€ searches for a new connection. It is assumed that during the time of the function call, no connection with any other device exists.</p>
<p>The variable â€œconnection_statusâ€ reflects the current necessary status of a connection. â€œTrueâ€ means there is connection and â€œFalseâ€ means there is no connection. ##It can be called by any function inside the system, if needed. Most of the time the function â€œserver_send()â€ accesses the variable to check if an message can be send. This variable is set by â€œ_find_connection()â€ if a connection has been found and gets resetted by â€œ_ping()â€ if an NACK has been received.## The not yet mentioned function â€œset_connection_status()â€ is used to set â€œconnection_statusâ€ to any state. This function is used as there were concerns about the imported state of â€œconnection_statusâ€. With â€œset_connection_status()â€ the function can change â€œconnection_statusâ€ as a local variable in â€œLVL3_classes.pyâ€ instead of an imported one.</p>
<p>The function â€œserver_send()â€ can be accessed by every function in the code, which imported â€œLVL3_classes.pyâ€. It allows each part of the code to send a message to a connected device. The function automatically includes all necessary steps for a successfull transmission, including to check if there is a connection at all.</p>
</section>
</section>
</section>
<section id="receiving-messages-ack-and-nack">
<h2>Receiving Messages, ACK and NACK<a class="headerlink" href="#receiving-messages-ack-and-nack" title="Link to this heading">#</a></h2>
<section id="id1">
<h3>Function<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<p>The system is designed to always listen for any incoming messages, send an ACK and then react to the received message. During a reaction no other message can be recieved! The system can send messages during a reaction.</p>
<p>If a keyword is received, an acknowldgement(ACK) is sended. An ACK acts like another keyword, with the limitation of only being sended if itâ€™s keyword was received. The sender of the keyword can therefore check if a sended keyword was received. The interface can react to a received ACK just like to a keyeword. If no ACK has been recieved, it is counted as a NACK. There is no official implementation of a NACK and it must be added manually, if needed. The funtion â€œ_ping()â€ in â€œLVL2_interface.pyâ€ serves as a possible example.</p>
</section>
<section id="implementation">
<h3>Implementation<a class="headerlink" href="#implementation" title="Link to this heading">#</a></h3>
</section>
</section>
<section id="sending-messages-and-connection-status">
<h2>Sending Messages and Connection Status<a class="headerlink" href="#sending-messages-and-connection-status" title="Link to this heading">#</a></h2>
<p>All non-LVL2_interface.py functions only interact with the interface by sending messages. The function â€œserver_send()â€ has been created for this purpose. It serves as a â€˜interfaceâ€™ between the interface and the system.</p>
<p>The connection status flag â€œconnection_statusâ€ defined in â€œLVL3_classes.pyâ€ reflects the current status of a connection. By definition, a connection exists (True) or not (False). All functions can check the status flag if they imported LVL3_classes.py . The status is flaged is managed by two functions. â€œ_find_connection()â€, defined in LVL3_classes.py , can set the connection status to â€œTrueâ€. â€œ_ping()â€, defined in LVL2_interface.py , can set the connection status to â€œFalseâ€.</p>
</section>
<section id="finding-a-connection-and-reconnect">
<h2>Finding a Connection and Reconnect<a class="headerlink" href="#finding-a-connection-and-reconnect" title="Link to this heading">#</a></h2>
<section id="concept">
<h3>Concept<a class="headerlink" href="#concept" title="Link to this heading">#</a></h3>
<p>Once the system starts a search for a connection is started. Aslong as no connection is found, no interface activity is done. Once it is found the connection mangement is started. Part of the management will be a ping function which checks the current state of the connection by sending a ping keyword each second. If an ACK has been detected one second after the ping was send, the next ping is sendend. If a NACK is detected, the connection is closed and all interface activity is stopped. The system then automatically starts another search for a connection. Once found, interface activity is continued.</p>
</section>
<section id="id2">
<h3>Implementation<a class="headerlink" href="#id2" title="Link to this heading">#</a></h3>
<p>The system searches for a connection if the function â€œ_find_connection.pyâ€ is called. The function is first called as a daemon thread inside â€œinit()â€ from â€œLVL3_classes.pyâ€. As long as no connection is found, the interface Thread will not start operation, instead being locked inside a while loop. The condition for the while loop is defined by the â€œconnection_type_objectâ€ being â€œNoneâ€. This variabe being â€œNoneâ€ is a defined state in â€œLVL3_classes.init()â€ at the start of operation. Once a connection is established inside â€œ_find_connection()â€, â€œ_find_connection()â€ will return, thus ending itâ€™s thread, the while loop is broken and operation of the interface starts. All other calls of â€œ_find_connection()â€ are done inside the interface and only through the function â€œ_ping()â€.</p>
<p>Once a NACK is detected by the â€œping_ack_flagâ€ being â€œFalseâ€ a second after the ping was send, the connection is closed by the server, â€œconnection_statusâ€ is set to â€œFalseâ€ and â€œ_find_connection()â€ is called. This call of â€œ_find_connection()â€ is done without a thread. The function â€œ_ping()â€ therefore has to wait for it to return, thus stopping operation of the ping thread until a connection is found. The receive thread which calls the function â€œ_recv()â€ will raise Exceptions which are simply caught by an â€œexcept:passâ€. Interface operation is thereby virtually stopped until a new connection can be established.</p>
</section>
</section>
<div class="toctree-wrapper compound">
</div>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "mimeiners/prj-wi",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./docs/Gesamtsystem"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../AuVAReS/01_Requirements.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">AuVAReS System Anforderungen</p>
      </div>
    </a>
    <a class="right-next"
       href="network-communication-keywords.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">SchlÃ¼sselwÃ¶rter bei Kommunikation im Netzwerk von Kicker-AuVAReS</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#function">Function</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#network-design">Network design</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#keywords">Keywords</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#location">Location</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#structure">Structure</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lvl2-interface-py">LvL2_interface.py</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lvl3-classes-py">LVL3_classes.py</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#receiving-messages-ack-and-nack">Receiving Messages, ACK and NACK</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Function</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#implementation">Implementation</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sending-messages-and-connection-status">Sending Messages and Connection Status</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#finding-a-connection-and-reconnect">Finding a Connection and Reconnect</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#concept">Concept</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Implementation</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By M. Meiners / B. Lehmann
</p>

  </div>
  
  <div class="footer-item">
    

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  <div>
<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><img src="https://licensebuttons.net/l/by-nc-sa/3.0/88x31.png"></a>
    All content on this site (unless otherwise specified) is licensed under the <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0 license</a>
</div>

</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>